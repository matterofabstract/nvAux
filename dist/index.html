<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml,%3Csvg width='332px' height='332px' viewBox='0 0 332 332' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cdefs%3E%3CradialGradient cx='50%25' cy='0%25' fx='50%25' fy='0%25' r='100%25' id='radialGradient-1'%3E%3Cstop stop-color='%234B6D8D' offset='0%25'%3E%3C/stop%3E%3Cstop stop-color='%23310550' offset='100%25'%3E%3C/stop%3E%3C/radialGradient%3E%3C/defs%3E%3Cg stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E%3Cg%3E%3Cpath d='M80.7623838,-6.89023353e-15 L251.237616,3.26289697e-15 C279.320457,-1.8958371e-15 289.503973,2.92400675 299.77064,8.41468017 C310.037306,13.9053536 318.094646,21.9626937 323.58532,32.2293603 C329.075993,42.496027 332,52.6795435 332,80.7623838 L332,251.237616 C332,279.320457 329.075993,289.503973 323.58532,299.77064 C318.094646,310.037306 310.037306,318.094646 299.77064,323.58532 C289.503973,329.075993 279.320457,332 251.237616,332 L80.7623838,332 C52.6795435,332 42.496027,329.075993 32.2293603,323.58532 C21.9626937,318.094646 13.9053536,310.037306 8.41468017,299.77064 C2.92400675,289.503973 3.3714784e-15,279.320457 -5.8026012e-15,251.237616 L2.17526465e-15,80.7623838 C-1.2638914e-15,52.6795435 2.92400675,42.496027 8.41468017,32.2293603 C13.9053536,21.9626937 21.9626937,13.9053536 32.2293603,8.41468017 C42.496027,2.92400675 52.6795435,4.0034241e-15 80.7623838,-6.89023353e-15 Z' id='Rectangle' fill='url(%23radialGradient-1)'%3E%3C/path%3E%3Cpath d='M36.052459,205 L36.052459,151.157895 C36.052459,147.578947 36.6295082,144.842105 37.7836066,142.947368 C38.9377049,141.052632 41.0360656,140.105263 44.0786885,140.105263 C46.5967213,140.105263 48.5377049,140.947368 49.9016393,142.631579 C51.2655738,144.315789 51.947541,146.631579 51.947541,149.578947 L51.947541,149.578947 L51.947541,205 L68,205 L68,143.578947 C68,140 67.5278689,136.973684 66.5836066,134.5 C65.6393443,132.026316 64.3803279,130 62.8065574,128.421053 C61.2327869,126.842105 59.4491803,125.710526 57.4557377,125.026316 C55.4622951,124.342105 53.4688525,124 51.4754098,124 C47.8032787,124 44.7868852,124.815789 42.4262295,126.447368 C40.0655738,128.078947 38.0459016,130.157895 36.3672131,132.684211 L36.3672131,132.684211 L36.052459,132.684211 L36.052459,124.947368 L20,124.947368 L20,205 L36.052459,205 Z M110.118644,205 L131,125 L113.915254,125 L103.158192,176.12426 L102.841808,176.12426 L92.0847458,125 L75,125 L95.8813559,205 L110.118644,205 Z M147.198511,205 L151.962779,180.717697 L174.037221,180.717697 L178.801489,205 L195,205 L169.74938,92 L156.25062,92 L131,205 L147.198511,205 Z M171,165 L155,165 L162.843137,124 L163.156863,124 L171,165 Z M218.52459,206 C222.196721,206 225.213115,205.184211 227.57377,203.552632 C229.934426,201.921053 231.954098,199.842105 233.632787,197.315789 L233.632787,197.315789 L233.947541,197.315789 L233.947541,205.052632 L250,205.052632 L250,125 L233.947541,125 L233.947541,178.842105 C233.947541,182.421053 233.370492,185.157895 232.216393,187.052632 C231.062295,188.947368 228.963934,189.894737 225.921311,189.894737 C223.403279,189.894737 221.462295,189.052632 220.098361,187.368421 C218.734426,185.684211 218.052459,183.368421 218.052459,180.421053 L218.052459,180.421053 L218.052459,125 L202,125 L202,186.421053 C202,190 202.472131,193.026316 203.416393,195.5 C204.360656,197.973684 205.619672,200 207.193443,201.578947 C208.767213,203.157895 210.55082,204.289474 212.544262,204.973684 C214.537705,205.657895 216.531148,206 218.52459,206 Z M272.084746,205 L283,180.542406 L293.915254,205 L311,205 L290.909605,164.13215 L310.050847,125 L292.966102,125 L283,147.721893 L273.033898,125 L255.949153,125 L274.774011,164.13215 L255,205 L272.084746,205 Z' id='nvAux' fill='%23FFFFFF' fill-rule='nonzero'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/svg%3E%0A"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>nvAux</title>
    <script type="module" crossorigin>
var Th=Object.defineProperty;var $h=(e,t,r)=>t in e?Th(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var be=(e,t,r)=>($h(e,typeof t!="symbol"?t+"":t,r),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function ue(){}function Mh(e){return!!e&&(typeof e=="object"||typeof e=="function")&&typeof e.then=="function"}function Fc(e){return e()}function nu(){return Object.create(null)}function st(e){e.forEach(Fc)}function os(e){return typeof e=="function"}function mt(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Bh(e){return Object.keys(e).length===0}function Nh(e,...t){if(e==null){for(const n of t)n(void 0);return ue}const r=e.subscribe(...t);return r.unsubscribe?()=>r.unsubscribe():r}function pt(e,t,r){e.$$.on_destroy.push(Nh(t,r))}function iu(e,t,r){return e.set(r),t}function de(e,t){e.appendChild(t)}function Ne(e,t,r){e.insertBefore(t,r||null)}function Te(e){e.parentNode&&e.parentNode.removeChild(e)}function Fh(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function Ee(e){return document.createElement(e)}function ar(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function lr(e){return document.createTextNode(e)}function Xe(){return lr(" ")}function Lh(){return lr("")}function Se(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function Q(e,t,r){r==null?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function jh(e){return Array.from(e.childNodes)}function _o(e,t){t=""+t,e.data!==t&&(e.data=t)}function $i(e,t){e.value=t??""}function An(e,t,r,n){r==null?e.style.removeProperty(t):e.style.setProperty(t,r,n?"important":"")}let In;function St(e){In=e}function Lc(){if(!In)throw new Error("Function called outside component initialization");return In}function as(e){Lc().$$.on_mount.push(e)}const $r=[],Jo=[];let Lr=[];const ou=[],Uh=Promise.resolve();let ea=!1;function zh(){ea||(ea=!0,Uh.then(ss))}function Mi(e){Lr.push(e)}const wo=new Set;let Dr=0;function ss(){if(Dr!==0)return;const e=In;do{try{for(;Dr<$r.length;){const t=$r[Dr];Dr++,St(t),Kh(t.$$)}}catch(t){throw $r.length=0,Dr=0,t}for(St(null),$r.length=0,Dr=0;Jo.length;)Jo.pop()();for(let t=0;t<Lr.length;t+=1){const r=Lr[t];wo.has(r)||(wo.add(r),r())}Lr.length=0}while($r.length);for(;ou.length;)ou.pop()();ea=!1,wo.clear(),St(e)}function Kh(e){if(e.fragment!==null){e.update(),st(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Mi)}}function Wh(e){const t=[],r=[];Lr.forEach(n=>e.indexOf(n)===-1?t.push(n):r.push(n)),r.forEach(n=>n()),Lr=t}const vi=new Set;let sr;function ta(){sr={r:0,c:[],p:sr}}function ra(){sr.r||st(sr.c),sr=sr.p}function Ue(e,t){e&&e.i&&(vi.delete(e),e.i(t))}function Qe(e,t,r,n){if(e&&e.o){if(vi.has(e))return;vi.add(e),sr.c.push(()=>{vi.delete(e),n&&(r&&e.d(1),n())}),e.o(t)}else n&&n()}function au(e,t){const r=t.token={};function n(i,o,a,s){if(t.token!==r)return;t.resolved=s;let u=t.ctx;a!==void 0&&(u=u.slice(),u[a]=s);const c=i&&(t.current=i)(u);let l=!1;t.block&&(t.blocks?t.blocks.forEach((f,h)=>{h!==o&&f&&(ta(),Qe(f,1,1,()=>{t.blocks[h]===f&&(t.blocks[h]=null)}),ra())}):t.block.d(1),c.c(),Ue(c,1),c.m(t.mount(),t.anchor),l=!0),t.block=c,t.blocks&&(t.blocks[o]=c),l&&ss()}if(Mh(e)){const i=Lc();if(e.then(o=>{St(i),n(t.then,1,t.value,o),St(null)},o=>{if(St(i),n(t.catch,2,t.error,o),St(null),!t.hasCatch)throw o}),t.current!==t.pending)return n(t.pending,0),!0}else{if(t.current!==t.then)return n(t.then,1,t.value,e),!0;t.resolved=e}}function qh(e,t,r){const n=t.slice(),{resolved:i}=e;e.current===e.then&&(n[e.value]=i),e.current===e.catch&&(n[e.error]=i),e.block.p(n,r)}function su(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Wt(e){e&&e.c()}function Ot(e,t,r){const{fragment:n,after_update:i}=e.$$;n&&n.m(t,r),Mi(()=>{const o=e.$$.on_mount.map(Fc).filter(os);e.$$.on_destroy?e.$$.on_destroy.push(...o):st(o),e.$$.on_mount=[]}),i.forEach(Mi)}function Ct(e,t){const r=e.$$;r.fragment!==null&&(Wh(r.after_update),st(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function Hh(e,t){e.$$.dirty[0]===-1&&($r.push(e),zh(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Bt(e,t,r,n,i,o,a,s=[-1]){const u=In;St(e);const c=e.$$={fragment:null,ctx:[],props:o,update:ue,not_equal:i,bound:nu(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:nu(),dirty:s,skip_bound:!1,root:t.target||u.$$.root};a&&a(c.root);let l=!1;if(c.ctx=r?r(e,t.props||{},(f,h,...d)=>{const y=d.length?d[0]:h;return c.ctx&&i(c.ctx[f],c.ctx[f]=y)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](y),l&&Hh(e,f)),h}):[],c.update(),l=!0,st(c.before_update),c.fragment=n?n(c.ctx):!1,t.target){if(t.hydrate){const f=jh(t.target);c.fragment&&c.fragment.l(f),f.forEach(Te)}else c.fragment&&c.fragment.c();t.intro&&Ue(e.$$.fragment),Ot(e,t.target,t.anchor),ss()}St(u)}class Nt{constructor(){be(this,"$$");be(this,"$$set")}$destroy(){Ct(this,1),this.$destroy=ue}$on(t,r){if(!os(r))return ue;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(r),()=>{const i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!Bh(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Yh="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Yh);let ai;const Gh=new Uint8Array(16);function Qh(){if(!ai&&(ai=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ai))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ai(Gh)}const $e=[];for(let e=0;e<256;++e)$e.push((e+256).toString(16).slice(1));function Vh(e,t=0){return($e[e[t+0]]+$e[e[t+1]]+$e[e[t+2]]+$e[e[t+3]]+"-"+$e[e[t+4]]+$e[e[t+5]]+"-"+$e[e[t+6]]+$e[e[t+7]]+"-"+$e[e[t+8]]+$e[e[t+9]]+"-"+$e[e[t+10]]+$e[e[t+11]]+$e[e[t+12]]+$e[e[t+13]]+$e[e[t+14]]+$e[e[t+15]]).toLowerCase()}const Zh=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),uu={randomUUID:Zh};function jc(e,t,r){if(uu.randomUUID&&!t&&!e)return uu.randomUUID();e=e||{};const n=e.random||(e.rng||Qh)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let i=0;i<16;++i)t[r+i]=n[i];return t}return Vh(n)}var kt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Uc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function si(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var zc={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(e,t){(function(r){e.exports=r()})(function(){return function r(n,i,o){function a(c,l){if(!i[c]){if(!n[c]){var f=typeof si=="function"&&si;if(!l&&f)return f(c,!0);if(s)return s(c,!0);var h=new Error("Cannot find module '"+c+"'");throw h.code="MODULE_NOT_FOUND",h}var d=i[c]={exports:{}};n[c][0].call(d.exports,function(y){var p=n[c][1][y];return a(p||y)},d,d.exports,r,n,i,o)}return i[c].exports}for(var s=typeof si=="function"&&si,u=0;u<o.length;u++)a(o[u]);return a}({1:[function(r,n,i){var o=r("./utils"),a=r("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(u){for(var c,l,f,h,d,y,p,b=[],m=0,g=u.length,w=g,x=o.getTypeOf(u)!=="string";m<u.length;)w=g-m,f=x?(c=u[m++],l=m<g?u[m++]:0,m<g?u[m++]:0):(c=u.charCodeAt(m++),l=m<g?u.charCodeAt(m++):0,m<g?u.charCodeAt(m++):0),h=c>>2,d=(3&c)<<4|l>>4,y=1<w?(15&l)<<2|f>>6:64,p=2<w?63&f:64,b.push(s.charAt(h)+s.charAt(d)+s.charAt(y)+s.charAt(p));return b.join("")},i.decode=function(u){var c,l,f,h,d,y,p=0,b=0,m="data:";if(u.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");var g,w=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===s.charAt(64)&&w--,u.charAt(u.length-2)===s.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(g=a.uint8array?new Uint8Array(0|w):new Array(0|w);p<u.length;)c=s.indexOf(u.charAt(p++))<<2|(h=s.indexOf(u.charAt(p++)))>>4,l=(15&h)<<4|(d=s.indexOf(u.charAt(p++)))>>2,f=(3&d)<<6|(y=s.indexOf(u.charAt(p++))),g[b++]=c,d!==64&&(g[b++]=l),y!==64&&(g[b++]=f);return g}},{"./support":30,"./utils":32}],2:[function(r,n,i){var o=r("./external"),a=r("./stream/DataWorker"),s=r("./stream/Crc32Probe"),u=r("./stream/DataLengthProbe");function c(l,f,h,d,y){this.compressedSize=l,this.uncompressedSize=f,this.crc32=h,this.compression=d,this.compressedContent=y}c.prototype={getContentWorker:function(){var l=new a(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),f=this;return l.on("end",function(){if(this.streamInfo.data_length!==f.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),l},getCompressedWorker:function(){return new a(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(l,f,h){return l.pipe(new s).pipe(new u("uncompressedSize")).pipe(f.compressWorker(h)).pipe(new u("compressedSize")).withStreamInfo("compression",f)},n.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,n,i){var o=r("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},i.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,n,i){var o=r("./utils"),a=function(){for(var s,u=[],c=0;c<256;c++){s=c;for(var l=0;l<8;l++)s=1&s?3988292384^s>>>1:s>>>1;u[c]=s}return u}();n.exports=function(s,u){return s!==void 0&&s.length?o.getTypeOf(s)!=="string"?function(c,l,f,h){var d=a,y=h+f;c^=-1;for(var p=h;p<y;p++)c=c>>>8^d[255&(c^l[p])];return-1^c}(0|u,s,s.length,0):function(c,l,f,h){var d=a,y=h+f;c^=-1;for(var p=h;p<y;p++)c=c>>>8^d[255&(c^l.charCodeAt(p))];return-1^c}(0|u,s,s.length,0):0}},{"./utils":32}],5:[function(r,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(r,n,i){var o=null;o=typeof Promise<"u"?Promise:r("lie"),n.exports={Promise:o}},{lie:37}],7:[function(r,n,i){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=r("pako"),s=r("./utils"),u=r("./stream/GenericWorker"),c=o?"uint8array":"array";function l(f,h){u.call(this,"FlateWorker/"+f),this._pako=null,this._pakoAction=f,this._pakoOptions=h,this.meta={}}i.magic="\b\0",s.inherits(l,u),l.prototype.processChunk=function(f){this.meta=f.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(c,f.data),!1)},l.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var f=this;this._pako.onData=function(h){f.push({data:h,meta:f.meta})}},i.compressWorker=function(f){return new l("Deflate",f)},i.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,n,i){function o(d,y){var p,b="";for(p=0;p<y;p++)b+=String.fromCharCode(255&d),d>>>=8;return b}function a(d,y,p,b,m,g){var w,x,k=d.file,D=d.compression,E=g!==c.utf8encode,A=s.transformTo("string",g(k.name)),P=s.transformTo("string",c.utf8encode(k.name)),N=k.comment,Y=s.transformTo("string",g(N)),C=s.transformTo("string",c.utf8encode(N)),$=P.length!==k.name.length,_=C.length!==N.length,M="",V="",L="",te=k.dir,j=k.date,ee={crc32:0,compressedSize:0,uncompressedSize:0};y&&!p||(ee.crc32=d.crc32,ee.compressedSize=d.compressedSize,ee.uncompressedSize=d.uncompressedSize);var B=0;y&&(B|=8),E||!$&&!_||(B|=2048);var T=0,ie=0;te&&(T|=16),m==="UNIX"?(ie=798,T|=function(G,we){var Fe=G;return G||(Fe=we?16893:33204),(65535&Fe)<<16}(k.unixPermissions,te)):(ie=20,T|=function(G){return 63&(G||0)}(k.dosPermissions)),w=j.getUTCHours(),w<<=6,w|=j.getUTCMinutes(),w<<=5,w|=j.getUTCSeconds()/2,x=j.getUTCFullYear()-1980,x<<=4,x|=j.getUTCMonth()+1,x<<=5,x|=j.getUTCDate(),$&&(V=o(1,1)+o(l(A),4)+P,M+="up"+o(V.length,2)+V),_&&(L=o(1,1)+o(l(Y),4)+C,M+="uc"+o(L.length,2)+L);var Z="";return Z+=`
\0`,Z+=o(B,2),Z+=D.magic,Z+=o(w,2),Z+=o(x,2),Z+=o(ee.crc32,4),Z+=o(ee.compressedSize,4),Z+=o(ee.uncompressedSize,4),Z+=o(A.length,2),Z+=o(M.length,2),{fileRecord:f.LOCAL_FILE_HEADER+Z+A+M,dirRecord:f.CENTRAL_FILE_HEADER+o(ie,2)+Z+o(Y.length,2)+"\0\0\0\0"+o(T,4)+o(b,4)+A+M+Y}}var s=r("../utils"),u=r("../stream/GenericWorker"),c=r("../utf8"),l=r("../crc32"),f=r("../signature");function h(d,y,p,b){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=p,this.encodeFileName=b,this.streamFiles=d,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(h,u),h.prototype.push=function(d){var y=d.meta.percent||0,p=this.entriesCount,b=this._sources.length;this.accumulate?this.contentBuffer.push(d):(this.bytesWritten+=d.data.length,u.prototype.push.call(this,{data:d.data,meta:{currentFile:this.currentFile,percent:p?(y+100*(p-b-1))/p:100}}))},h.prototype.openedSource=function(d){this.currentSourceOffset=this.bytesWritten,this.currentFile=d.file.name;var y=this.streamFiles&&!d.file.dir;if(y){var p=a(d,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:p.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(d){this.accumulate=!1;var y=this.streamFiles&&!d.file.dir,p=a(d,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(p.dirRecord),y)this.push({data:function(b){return f.DATA_DESCRIPTOR+o(b.crc32,4)+o(b.compressedSize,4)+o(b.uncompressedSize,4)}(d),meta:{percent:100}});else for(this.push({data:p.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var d=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var p=this.bytesWritten-d,b=function(m,g,w,x,k){var D=s.transformTo("string",k(x));return f.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(m,2)+o(m,2)+o(g,4)+o(w,4)+o(D.length,2)+D}(this.dirRecords.length,p,d,this.zipComment,this.encodeFileName);this.push({data:b,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(d){this._sources.push(d);var y=this;return d.on("data",function(p){y.processChunk(p)}),d.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),d.on("error",function(p){y.error(p)}),this},h.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(d){var y=this._sources;if(!u.prototype.error.call(this,d))return!1;for(var p=0;p<y.length;p++)try{y[p].error(d)}catch{}return!0},h.prototype.lock=function(){u.prototype.lock.call(this);for(var d=this._sources,y=0;y<d.length;y++)d[y].lock()},n.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,n,i){var o=r("../compressions"),a=r("./ZipFileWorker");i.generateWorker=function(s,u,c){var l=new a(u.streamFiles,c,u.platform,u.encodeFileName),f=0;try{s.forEach(function(h,d){f++;var y=function(g,w){var x=g||w,k=o[x];if(!k)throw new Error(x+" is not a valid compression method !");return k}(d.options.compression,u.compression),p=d.options.compressionOptions||u.compressionOptions||{},b=d.dir,m=d.date;d._compressWorker(y,p).withStreamInfo("file",{name:h,dir:b,date:m,comment:d.comment||"",unixPermissions:d.unixPermissions,dosPermissions:d.dosPermissions}).pipe(l)}),l.entriesCount=f}catch(h){l.error(h)}return l}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,n,i){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new o;for(var s in this)typeof this[s]!="function"&&(a[s]=this[s]);return a}}(o.prototype=r("./object")).loadAsync=r("./load"),o.support=r("./support"),o.defaults=r("./defaults"),o.version="3.10.1",o.loadAsync=function(a,s){return new o().loadAsync(a,s)},o.external=r("./external"),n.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,n,i){var o=r("./utils"),a=r("./external"),s=r("./utf8"),u=r("./zipEntries"),c=r("./stream/Crc32Probe"),l=r("./nodejsUtils");function f(h){return new a.Promise(function(d,y){var p=h.decompressed.getContentWorker().pipe(new c);p.on("error",function(b){y(b)}).on("end",function(){p.streamInfo.crc32!==h.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}n.exports=function(h,d){var y=this;return d=o.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),l.isNode&&l.isStream(h)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",h,!0,d.optimizedBinaryString,d.base64).then(function(p){var b=new u(d);return b.load(p),b}).then(function(p){var b=[a.Promise.resolve(p)],m=p.files;if(d.checkCRC32)for(var g=0;g<m.length;g++)b.push(f(m[g]));return a.Promise.all(b)}).then(function(p){for(var b=p.shift(),m=b.files,g=0;g<m.length;g++){var w=m[g],x=w.fileNameStr,k=o.resolve(w.fileNameStr);y.file(k,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:d.createFolders}),w.dir||(y.file(k).unsafeOriginalName=x)}return b.zipComment.length&&(y.comment=b.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,n,i){var o=r("../utils"),a=r("../stream/GenericWorker");function s(u,c){a.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(c)}o.inherits(s,a),s.prototype._bindStream=function(u){var c=this;(this._stream=u).pause(),u.on("data",function(l){c.push({data:l,meta:{percent:0}})}).on("error",function(l){c.isPaused?this.generatedError=l:c.error(l)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},s.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,n,i){var o=r("readable-stream").Readable;function a(s,u,c){o.call(this,u),this._helper=s;var l=this;s.on("data",function(f,h){l.push(f)||l._helper.pause(),c&&c(h)}).on("error",function(f){l.emit("error",f)}).on("end",function(){l.push(null)})}r("../utils").inherits(a,o),a.prototype._read=function(){this._helper.resume()},n.exports=a},{"../utils":32,"readable-stream":16}],14:[function(r,n,i){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,a);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,a)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var a=new Buffer(o);return a.fill(0),a},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(r,n,i){function o(k,D,E){var A,P=s.getTypeOf(D),N=s.extend(E||{},l);N.date=N.date||new Date,N.compression!==null&&(N.compression=N.compression.toUpperCase()),typeof N.unixPermissions=="string"&&(N.unixPermissions=parseInt(N.unixPermissions,8)),N.unixPermissions&&16384&N.unixPermissions&&(N.dir=!0),N.dosPermissions&&16&N.dosPermissions&&(N.dir=!0),N.dir&&(k=m(k)),N.createFolders&&(A=b(k))&&g.call(this,A,!0);var Y=P==="string"&&N.binary===!1&&N.base64===!1;E&&E.binary!==void 0||(N.binary=!Y),(D instanceof f&&D.uncompressedSize===0||N.dir||!D||D.length===0)&&(N.base64=!1,N.binary=!0,D="",N.compression="STORE",P="string");var C=null;C=D instanceof f||D instanceof u?D:y.isNode&&y.isStream(D)?new p(k,D):s.prepareContent(k,D,N.binary,N.optimizedBinaryString,N.base64);var $=new h(k,C,N);this.files[k]=$}var a=r("./utf8"),s=r("./utils"),u=r("./stream/GenericWorker"),c=r("./stream/StreamHelper"),l=r("./defaults"),f=r("./compressedObject"),h=r("./zipObject"),d=r("./generate"),y=r("./nodejsUtils"),p=r("./nodejs/NodejsStreamInputAdapter"),b=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var D=k.lastIndexOf("/");return 0<D?k.substring(0,D):""},m=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},g=function(k,D){return D=D!==void 0?D:l.createFolders,k=m(k),this.files[k]||o.call(this,k,null,{dir:!0,createFolders:D}),this.files[k]};function w(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var x={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var D,E,A;for(D in this.files)A=this.files[D],(E=D.slice(this.root.length,D.length))&&D.slice(0,this.root.length)===this.root&&k(E,A)},filter:function(k){var D=[];return this.forEach(function(E,A){k(E,A)&&D.push(A)}),D},file:function(k,D,E){if(arguments.length!==1)return k=this.root+k,o.call(this,k,D,E),this;if(w(k)){var A=k;return this.filter(function(N,Y){return!Y.dir&&A.test(N)})}var P=this.files[this.root+k];return P&&!P.dir?P:null},folder:function(k){if(!k)return this;if(w(k))return this.filter(function(P,N){return N.dir&&k.test(P)});var D=this.root+k,E=g.call(this,D),A=this.clone();return A.root=E.name,A},remove:function(k){k=this.root+k;var D=this.files[k];if(D||(k.slice(-1)!=="/"&&(k+="/"),D=this.files[k]),D&&!D.dir)delete this.files[k];else for(var E=this.filter(function(P,N){return N.name.slice(0,k.length)===k}),A=0;A<E.length;A++)delete this.files[E[A].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var D,E={};try{if((E=s.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=E.type.toLowerCase(),E.compression=E.compression.toUpperCase(),E.type==="binarystring"&&(E.type="string"),!E.type)throw new Error("No output type specified.");s.checkSupport(E.type),E.platform!=="darwin"&&E.platform!=="freebsd"&&E.platform!=="linux"&&E.platform!=="sunos"||(E.platform="UNIX"),E.platform==="win32"&&(E.platform="DOS");var A=E.comment||this.comment||"";D=d.generateWorker(this,E,A)}catch(P){(D=new u("error")).error(P)}return new c(D,E.type||"string",E.mimeType)},generateAsync:function(k,D){return this.generateInternalStream(k).accumulate(D)},generateNodeStream:function(k,D){return(k=k||{}).type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(D)}};n.exports=x},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,n,i){n.exports=r("stream")},{stream:void 0}],17:[function(r,n,i){var o=r("./DataReader");function a(s){o.call(this,s);for(var u=0;u<this.data.length;u++)s[u]=255&s[u]}r("../utils").inherits(a,o),a.prototype.byteAt=function(s){return this.data[this.zero+s]},a.prototype.lastIndexOfSignature=function(s){for(var u=s.charCodeAt(0),c=s.charCodeAt(1),l=s.charCodeAt(2),f=s.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===u&&this.data[h+1]===c&&this.data[h+2]===l&&this.data[h+3]===f)return h-this.zero;return-1},a.prototype.readAndCheckSignature=function(s){var u=s.charCodeAt(0),c=s.charCodeAt(1),l=s.charCodeAt(2),f=s.charCodeAt(3),h=this.readData(4);return u===h[0]&&c===h[1]&&l===h[2]&&f===h[3]},a.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},n.exports=a},{"../utils":32,"./DataReader":18}],18:[function(r,n,i){var o=r("../utils");function a(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var u,c=0;for(this.checkOffset(s),u=this.index+s-1;u>=this.index;u--)c=(c<<8)+this.byteAt(u);return this.index+=s,c},readString:function(s){return o.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},n.exports=a},{"../utils":32}],19:[function(r,n,i){var o=r("./Uint8ArrayReader");function a(s){o.call(this,s)}r("../utils").inherits(a,o),a.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},n.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,n,i){var o=r("./DataReader");function a(s){o.call(this,s)}r("../utils").inherits(a,o),a.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},a.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},a.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},a.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},n.exports=a},{"../utils":32,"./DataReader":18}],21:[function(r,n,i){var o=r("./ArrayReader");function a(s){o.call(this,s)}r("../utils").inherits(a,o),a.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},n.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(r,n,i){var o=r("../utils"),a=r("../support"),s=r("./ArrayReader"),u=r("./StringReader"),c=r("./NodeBufferReader"),l=r("./Uint8ArrayReader");n.exports=function(f){var h=o.getTypeOf(f);return o.checkSupport(h),h!=="string"||a.uint8array?h==="nodebuffer"?new c(f):a.uint8array?new l(o.transformTo("uint8array",f)):new s(o.transformTo("array",f)):new u(f)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,n,i){var o=r("./GenericWorker"),a=r("../utils");function s(u){o.call(this,"ConvertWorker to "+u),this.destType=u}a.inherits(s,o),s.prototype.processChunk=function(u){this.push({data:a.transformTo(this.destType,u.data),meta:u.meta})},n.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(r,n,i){var o=r("./GenericWorker"),a=r("../crc32");function s(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(s,o),s.prototype.processChunk=function(u){this.streamInfo.crc32=a(u.data,this.streamInfo.crc32||0),this.push(u)},n.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,n,i){var o=r("../utils"),a=r("./GenericWorker");function s(u){a.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}o.inherits(s,a),s.prototype.processChunk=function(u){if(u){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+u.data.length}a.prototype.processChunk.call(this,u)},n.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(r,n,i){var o=r("../utils"),a=r("./GenericWorker");function s(u){a.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(l){c.dataIsReady=!0,c.data=l,c.max=l&&l.length||0,c.type=o.getTypeOf(l),c.isPaused||c._tickAndRepeat()},function(l){c.error(l)})}o.inherits(s,a),s.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,c);break;case"uint8array":u=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":u=this.data.slice(this.index,c)}return this.index=c,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(r,n,i){function o(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,s){return this._listeners[a].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,s){if(this._listeners[a])for(var u=0;u<this._listeners[a].length;u++)this._listeners[a][u].call(this,s)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var s=this;return a.on("data",function(u){s.processChunk(u)}),a.on("end",function(){s.end()}),a.on("error",function(u){s.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,s){return this.extraStreamInfo[a]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},n.exports=o},{}],29:[function(r,n,i){var o=r("../utils"),a=r("./ConvertWorker"),s=r("./GenericWorker"),u=r("../base64"),c=r("../support"),l=r("../external"),f=null;if(c.nodestream)try{f=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(y,p){return new l.Promise(function(b,m){var g=[],w=y._internalType,x=y._outputType,k=y._mimeType;y.on("data",function(D,E){g.push(D),p&&p(E)}).on("error",function(D){g=[],m(D)}).on("end",function(){try{var D=function(E,A,P){switch(E){case"blob":return o.newBlob(o.transformTo("arraybuffer",A),P);case"base64":return u.encode(A);default:return o.transformTo(E,A)}}(x,function(E,A){var P,N=0,Y=null,C=0;for(P=0;P<A.length;P++)C+=A[P].length;switch(E){case"string":return A.join("");case"array":return Array.prototype.concat.apply([],A);case"uint8array":for(Y=new Uint8Array(C),P=0;P<A.length;P++)Y.set(A[P],N),N+=A[P].length;return Y;case"nodebuffer":return Buffer.concat(A);default:throw new Error("concat : unsupported type '"+E+"'")}}(w,g),k);b(D)}catch(E){m(E)}g=[]}).resume()})}function d(y,p,b){var m=p;switch(p){case"blob":case"arraybuffer":m="uint8array";break;case"base64":m="string"}try{this._internalType=m,this._outputType=p,this._mimeType=b,o.checkSupport(m),this._worker=y.pipe(new a(m)),y.lock()}catch(g){this._worker=new s("error"),this._worker.error(g)}}d.prototype={accumulate:function(y){return h(this,y)},on:function(y,p){var b=this;return y==="data"?this._worker.on(y,function(m){p.call(b,m.data,m.meta)}):this._worker.on(y,function(){o.delay(p,arguments,b)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new f(this,{objectMode:this._outputType!=="nodebuffer"},y)}},n.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var o=new ArrayBuffer(0);try{i.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(o),i.blob=a.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!r("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(r,n,i){for(var o=r("./utils"),a=r("./support"),s=r("./nodejsUtils"),u=r("./stream/GenericWorker"),c=new Array(256),l=0;l<256;l++)c[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;c[254]=c[254]=1;function f(){u.call(this,"utf-8 decode"),this.leftOver=null}function h(){u.call(this,"utf-8 encode")}i.utf8encode=function(d){return a.nodebuffer?s.newBufferFrom(d,"utf-8"):function(y){var p,b,m,g,w,x=y.length,k=0;for(g=0;g<x;g++)(64512&(b=y.charCodeAt(g)))==55296&&g+1<x&&(64512&(m=y.charCodeAt(g+1)))==56320&&(b=65536+(b-55296<<10)+(m-56320),g++),k+=b<128?1:b<2048?2:b<65536?3:4;for(p=a.uint8array?new Uint8Array(k):new Array(k),g=w=0;w<k;g++)(64512&(b=y.charCodeAt(g)))==55296&&g+1<x&&(64512&(m=y.charCodeAt(g+1)))==56320&&(b=65536+(b-55296<<10)+(m-56320),g++),b<128?p[w++]=b:(b<2048?p[w++]=192|b>>>6:(b<65536?p[w++]=224|b>>>12:(p[w++]=240|b>>>18,p[w++]=128|b>>>12&63),p[w++]=128|b>>>6&63),p[w++]=128|63&b);return p}(d)},i.utf8decode=function(d){return a.nodebuffer?o.transformTo("nodebuffer",d).toString("utf-8"):function(y){var p,b,m,g,w=y.length,x=new Array(2*w);for(p=b=0;p<w;)if((m=y[p++])<128)x[b++]=m;else if(4<(g=c[m]))x[b++]=65533,p+=g-1;else{for(m&=g===2?31:g===3?15:7;1<g&&p<w;)m=m<<6|63&y[p++],g--;1<g?x[b++]=65533:m<65536?x[b++]=m:(m-=65536,x[b++]=55296|m>>10&1023,x[b++]=56320|1023&m)}return x.length!==b&&(x.subarray?x=x.subarray(0,b):x.length=b),o.applyFromCharCode(x)}(d=o.transformTo(a.uint8array?"uint8array":"array",d))},o.inherits(f,u),f.prototype.processChunk=function(d){var y=o.transformTo(a.uint8array?"uint8array":"array",d.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var p=y;(y=new Uint8Array(p.length+this.leftOver.length)).set(this.leftOver,0),y.set(p,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var b=function(g,w){var x;for((w=w||g.length)>g.length&&(w=g.length),x=w-1;0<=x&&(192&g[x])==128;)x--;return x<0||x===0?w:x+c[g[x]]>w?x:w}(y),m=y;b!==y.length&&(a.uint8array?(m=y.subarray(0,b),this.leftOver=y.subarray(b,y.length)):(m=y.slice(0,b),this.leftOver=y.slice(b,y.length))),this.push({data:i.utf8decode(m),meta:d.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=f,o.inherits(h,u),h.prototype.processChunk=function(d){this.push({data:i.utf8encode(d.data),meta:d.meta})},i.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,n,i){var o=r("./support"),a=r("./base64"),s=r("./nodejsUtils"),u=r("./external");function c(p){return p}function l(p,b){for(var m=0;m<p.length;++m)b[m]=255&p.charCodeAt(m);return b}r("setimmediate"),i.newBlob=function(p,b){i.checkSupport("blob");try{return new Blob([p],{type:b})}catch{try{var m=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return m.append(p),m.getBlob(b)}catch{throw new Error("Bug : can't construct the Blob.")}}};var f={stringifyByChunk:function(p,b,m){var g=[],w=0,x=p.length;if(x<=m)return String.fromCharCode.apply(null,p);for(;w<x;)b==="array"||b==="nodebuffer"?g.push(String.fromCharCode.apply(null,p.slice(w,Math.min(w+m,x)))):g.push(String.fromCharCode.apply(null,p.subarray(w,Math.min(w+m,x)))),w+=m;return g.join("")},stringifyByChar:function(p){for(var b="",m=0;m<p.length;m++)b+=String.fromCharCode(p[m]);return b},applyCanBeUsed:{uint8array:function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function h(p){var b=65536,m=i.getTypeOf(p),g=!0;if(m==="uint8array"?g=f.applyCanBeUsed.uint8array:m==="nodebuffer"&&(g=f.applyCanBeUsed.nodebuffer),g)for(;1<b;)try{return f.stringifyByChunk(p,m,b)}catch{b=Math.floor(b/2)}return f.stringifyByChar(p)}function d(p,b){for(var m=0;m<p.length;m++)b[m]=p[m];return b}i.applyFromCharCode=h;var y={};y.string={string:c,array:function(p){return l(p,new Array(p.length))},arraybuffer:function(p){return y.string.uint8array(p).buffer},uint8array:function(p){return l(p,new Uint8Array(p.length))},nodebuffer:function(p){return l(p,s.allocBuffer(p.length))}},y.array={string:h,array:c,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return s.newBufferFrom(p)}},y.arraybuffer={string:function(p){return h(new Uint8Array(p))},array:function(p){return d(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:c,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return s.newBufferFrom(new Uint8Array(p))}},y.uint8array={string:h,array:function(p){return d(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:c,nodebuffer:function(p){return s.newBufferFrom(p)}},y.nodebuffer={string:h,array:function(p){return d(p,new Array(p.length))},arraybuffer:function(p){return y.nodebuffer.uint8array(p).buffer},uint8array:function(p){return d(p,new Uint8Array(p.length))},nodebuffer:c},i.transformTo=function(p,b){if(b=b||"",!p)return b;i.checkSupport(p);var m=i.getTypeOf(b);return y[m][p](b)},i.resolve=function(p){for(var b=p.split("/"),m=[],g=0;g<b.length;g++){var w=b[g];w==="."||w===""&&g!==0&&g!==b.length-1||(w===".."?m.pop():m.push(w))}return m.join("/")},i.getTypeOf=function(p){return typeof p=="string"?"string":Object.prototype.toString.call(p)==="[object Array]"?"array":o.nodebuffer&&s.isBuffer(p)?"nodebuffer":o.uint8array&&p instanceof Uint8Array?"uint8array":o.arraybuffer&&p instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(p){if(!o[p.toLowerCase()])throw new Error(p+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(p){var b,m,g="";for(m=0;m<(p||"").length;m++)g+="\\x"+((b=p.charCodeAt(m))<16?"0":"")+b.toString(16).toUpperCase();return g},i.delay=function(p,b,m){setImmediate(function(){p.apply(m||null,b||[])})},i.inherits=function(p,b){function m(){}m.prototype=b.prototype,p.prototype=new m},i.extend=function(){var p,b,m={};for(p=0;p<arguments.length;p++)for(b in arguments[p])Object.prototype.hasOwnProperty.call(arguments[p],b)&&m[b]===void 0&&(m[b]=arguments[p][b]);return m},i.prepareContent=function(p,b,m,g,w){return u.Promise.resolve(b).then(function(x){return o.blob&&(x instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(x))!==-1)&&typeof FileReader<"u"?new u.Promise(function(k,D){var E=new FileReader;E.onload=function(A){k(A.target.result)},E.onerror=function(A){D(A.target.error)},E.readAsArrayBuffer(x)}):x}).then(function(x){var k=i.getTypeOf(x);return k?(k==="arraybuffer"?x=i.transformTo("uint8array",x):k==="string"&&(w?x=a.decode(x):m&&g!==!0&&(x=function(D){return l(D,o.uint8array?new Uint8Array(D.length):new Array(D.length))}(x))),x):u.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,n,i){var o=r("./reader/readerFor"),a=r("./utils"),s=r("./signature"),u=r("./zipEntry"),c=r("./support");function l(f){this.files=[],this.loadOptions=f}l.prototype={checkSignature:function(f){if(!this.reader.readAndCheckSignature(f)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(h)+", expected "+a.pretty(f)+")")}},isSignature:function(f,h){var d=this.reader.index;this.reader.setIndex(f);var y=this.reader.readString(4)===h;return this.reader.setIndex(d),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var f=this.reader.readData(this.zipCommentLength),h=c.uint8array?"uint8array":"array",d=a.transformTo(h,f);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var f,h,d,y=this.zip64EndOfCentralSize-44;0<y;)f=this.reader.readInt(2),h=this.reader.readInt(4),d=this.reader.readData(h),this.zip64ExtensibleData[f]={id:f,length:h,value:d}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var f,h;for(f=0;f<this.files.length;f++)h=this.files[f],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var f;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(f=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(f);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var f=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(f<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(f);var h=f;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(f=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(f),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var d=this.centralDirOffset+this.centralDirSize;this.zip64&&(d+=20,d+=12+this.zip64EndOfCentralSize);var y=h-d;if(0<y)this.isSignature(h,s.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(f){this.reader=o(f)},load:function(f){this.prepareReader(f),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,n,i){var o=r("./reader/readerFor"),a=r("./utils"),s=r("./compressedObject"),u=r("./crc32"),c=r("./utf8"),l=r("./compressions"),f=r("./support");function h(d,y){this.options=d,this.loadOptions=y}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(d){var y,p;if(d.skip(22),this.fileNameLength=d.readInt(2),p=d.readInt(2),this.fileName=d.readData(this.fileNameLength),d.skip(p),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=function(b){for(var m in l)if(Object.prototype.hasOwnProperty.call(l,m)&&l[m].magic===b)return l[m];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,y,d.readData(this.compressedSize))},readCentralPart:function(d){this.versionMadeBy=d.readInt(2),d.skip(2),this.bitFlag=d.readInt(2),this.compressionMethod=d.readString(2),this.date=d.readDate(),this.crc32=d.readInt(4),this.compressedSize=d.readInt(4),this.uncompressedSize=d.readInt(4);var y=d.readInt(2);if(this.extraFieldsLength=d.readInt(2),this.fileCommentLength=d.readInt(2),this.diskNumberStart=d.readInt(2),this.internalFileAttributes=d.readInt(2),this.externalFileAttributes=d.readInt(4),this.localHeaderOffset=d.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");d.skip(y),this.readExtraFields(d),this.parseZIP64ExtraField(d),this.fileComment=d.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var d=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),d==0&&(this.dosPermissions=63&this.externalFileAttributes),d==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var d=o(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=d.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=d.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=d.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=d.readInt(4))}},readExtraFields:function(d){var y,p,b,m=d.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});d.index+4<m;)y=d.readInt(2),p=d.readInt(2),b=d.readData(p),this.extraFields[y]={id:y,length:p,value:b};d.setIndex(m)},handleUTF8:function(){var d=f.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var p=a.transformTo(d,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(p)}var b=this.findExtraFieldUnicodeComment();if(b!==null)this.fileCommentStr=b;else{var m=a.transformTo(d,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(m)}}},findExtraFieldUnicodePath:function(){var d=this.extraFields[28789];if(d){var y=o(d.value);return y.readInt(1)!==1||u(this.fileName)!==y.readInt(4)?null:c.utf8decode(y.readData(d.length-5))}return null},findExtraFieldUnicodeComment:function(){var d=this.extraFields[25461];if(d){var y=o(d.value);return y.readInt(1)!==1||u(this.fileComment)!==y.readInt(4)?null:c.utf8decode(y.readData(d.length-5))}return null}},n.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,n,i){function o(y,p,b){this.name=y,this.dir=b.dir,this.date=b.date,this.comment=b.comment,this.unixPermissions=b.unixPermissions,this.dosPermissions=b.dosPermissions,this._data=p,this._dataBinary=b.binary,this.options={compression:b.compression,compressionOptions:b.compressionOptions}}var a=r("./stream/StreamHelper"),s=r("./stream/DataWorker"),u=r("./utf8"),c=r("./compressedObject"),l=r("./stream/GenericWorker");o.prototype={internalStream:function(y){var p=null,b="string";try{if(!y)throw new Error("No output type specified.");var m=(b=y.toLowerCase())==="string"||b==="text";b!=="binarystring"&&b!=="text"||(b="string"),p=this._decompressWorker();var g=!this._dataBinary;g&&!m&&(p=p.pipe(new u.Utf8EncodeWorker)),!g&&m&&(p=p.pipe(new u.Utf8DecodeWorker))}catch(w){(p=new l("error")).error(w)}return new a(p,b,"")},async:function(y,p){return this.internalStream(y).accumulate(p)},nodeStream:function(y,p){return this.internalStream(y||"nodebuffer").toNodejsStream(p)},_compressWorker:function(y,p){if(this._data instanceof c&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var b=this._decompressWorker();return this._dataBinary||(b=b.pipe(new u.Utf8EncodeWorker)),c.createWorkerFrom(b,y,p)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof l?this._data:new s(this._data)}};for(var f=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<f.length;d++)o.prototype[f[d]]=h;n.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,n,i){(function(o){var a,s,u=o.MutationObserver||o.WebKitMutationObserver;if(u){var c=0,l=new u(y),f=o.document.createTextNode("");l.observe(f,{characterData:!0}),a=function(){f.data=c=++c%2}}else if(o.setImmediate||o.MessageChannel===void 0)a="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var p=o.document.createElement("script");p.onreadystatechange=function(){y(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},o.document.documentElement.appendChild(p)}:function(){setTimeout(y,0)};else{var h=new o.MessageChannel;h.port1.onmessage=y,a=function(){h.port2.postMessage(0)}}var d=[];function y(){var p,b;s=!0;for(var m=d.length;m;){for(b=d,d=[],p=-1;++p<m;)b[p]();m=d.length}s=!1}n.exports=function(p){d.push(p)!==1||s||a()}}).call(this,typeof kt<"u"?kt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,n,i){var o=r("immediate");function a(){}var s={},u=["REJECTED"],c=["FULFILLED"],l=["PENDING"];function f(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,m!==a&&p(this,m)}function h(m,g,w){this.promise=m,typeof g=="function"&&(this.onFulfilled=g,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function d(m,g,w){o(function(){var x;try{x=g(w)}catch(k){return s.reject(m,k)}x===m?s.reject(m,new TypeError("Cannot resolve promise with itself")):s.resolve(m,x)})}function y(m){var g=m&&m.then;if(m&&(typeof m=="object"||typeof m=="function")&&typeof g=="function")return function(){g.apply(m,arguments)}}function p(m,g){var w=!1;function x(E){w||(w=!0,s.reject(m,E))}function k(E){w||(w=!0,s.resolve(m,E))}var D=b(function(){g(k,x)});D.status==="error"&&x(D.value)}function b(m,g){var w={};try{w.value=m(g),w.status="success"}catch(x){w.status="error",w.value=x}return w}(n.exports=f).prototype.finally=function(m){if(typeof m!="function")return this;var g=this.constructor;return this.then(function(w){return g.resolve(m()).then(function(){return w})},function(w){return g.resolve(m()).then(function(){throw w})})},f.prototype.catch=function(m){return this.then(null,m)},f.prototype.then=function(m,g){if(typeof m!="function"&&this.state===c||typeof g!="function"&&this.state===u)return this;var w=new this.constructor(a);return this.state!==l?d(w,this.state===c?m:g,this.outcome):this.queue.push(new h(w,m,g)),w},h.prototype.callFulfilled=function(m){s.resolve(this.promise,m)},h.prototype.otherCallFulfilled=function(m){d(this.promise,this.onFulfilled,m)},h.prototype.callRejected=function(m){s.reject(this.promise,m)},h.prototype.otherCallRejected=function(m){d(this.promise,this.onRejected,m)},s.resolve=function(m,g){var w=b(y,g);if(w.status==="error")return s.reject(m,w.value);var x=w.value;if(x)p(m,x);else{m.state=c,m.outcome=g;for(var k=-1,D=m.queue.length;++k<D;)m.queue[k].callFulfilled(g)}return m},s.reject=function(m,g){m.state=u,m.outcome=g;for(var w=-1,x=m.queue.length;++w<x;)m.queue[w].callRejected(g);return m},f.resolve=function(m){return m instanceof this?m:s.resolve(new this(a),m)},f.reject=function(m){var g=new this(a);return s.reject(g,m)},f.all=function(m){var g=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=m.length,x=!1;if(!w)return this.resolve([]);for(var k=new Array(w),D=0,E=-1,A=new this(a);++E<w;)P(m[E],E);return A;function P(N,Y){g.resolve(N).then(function(C){k[Y]=C,++D!==w||x||(x=!0,s.resolve(A,k))},function(C){x||(x=!0,s.reject(A,C))})}},f.race=function(m){var g=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=m.length,x=!1;if(!w)return this.resolve([]);for(var k=-1,D=new this(a);++k<w;)E=m[k],g.resolve(E).then(function(A){x||(x=!0,s.resolve(D,A))},function(A){x||(x=!0,s.reject(D,A))});var E;return D}},{immediate:36}],38:[function(r,n,i){var o={};(0,r("./lib/utils/common").assign)(o,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),n.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,n,i){var o=r("./zlib/deflate"),a=r("./utils/common"),s=r("./utils/strings"),u=r("./zlib/messages"),c=r("./zlib/zstream"),l=Object.prototype.toString,f=0,h=-1,d=0,y=8;function p(m){if(!(this instanceof p))return new p(m);this.options=a.assign({level:h,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},m||{});var g=this.options;g.raw&&0<g.windowBits?g.windowBits=-g.windowBits:g.gzip&&0<g.windowBits&&g.windowBits<16&&(g.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var w=o.deflateInit2(this.strm,g.level,g.method,g.windowBits,g.memLevel,g.strategy);if(w!==f)throw new Error(u[w]);if(g.header&&o.deflateSetHeader(this.strm,g.header),g.dictionary){var x;if(x=typeof g.dictionary=="string"?s.string2buf(g.dictionary):l.call(g.dictionary)==="[object ArrayBuffer]"?new Uint8Array(g.dictionary):g.dictionary,(w=o.deflateSetDictionary(this.strm,x))!==f)throw new Error(u[w]);this._dict_set=!0}}function b(m,g){var w=new p(g);if(w.push(m,!0),w.err)throw w.msg||u[w.err];return w.result}p.prototype.push=function(m,g){var w,x,k=this.strm,D=this.options.chunkSize;if(this.ended)return!1;x=g===~~g?g:g===!0?4:0,typeof m=="string"?k.input=s.string2buf(m):l.call(m)==="[object ArrayBuffer]"?k.input=new Uint8Array(m):k.input=m,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new a.Buf8(D),k.next_out=0,k.avail_out=D),(w=o.deflate(k,x))!==1&&w!==f)return this.onEnd(w),!(this.ended=!0);k.avail_out!==0&&(k.avail_in!==0||x!==4&&x!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(a.shrinkBuf(k.output,k.next_out))):this.onData(a.shrinkBuf(k.output,k.next_out)))}while((0<k.avail_in||k.avail_out===0)&&w!==1);return x===4?(w=o.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===f):x!==2||(this.onEnd(f),!(k.avail_out=0))},p.prototype.onData=function(m){this.chunks.push(m)},p.prototype.onEnd=function(m){m===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},i.Deflate=p,i.deflate=b,i.deflateRaw=function(m,g){return(g=g||{}).raw=!0,b(m,g)},i.gzip=function(m,g){return(g=g||{}).gzip=!0,b(m,g)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,n,i){var o=r("./zlib/inflate"),a=r("./utils/common"),s=r("./utils/strings"),u=r("./zlib/constants"),c=r("./zlib/messages"),l=r("./zlib/zstream"),f=r("./zlib/gzheader"),h=Object.prototype.toString;function d(p){if(!(this instanceof d))return new d(p);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},p||{});var b=this.options;b.raw&&0<=b.windowBits&&b.windowBits<16&&(b.windowBits=-b.windowBits,b.windowBits===0&&(b.windowBits=-15)),!(0<=b.windowBits&&b.windowBits<16)||p&&p.windowBits||(b.windowBits+=32),15<b.windowBits&&b.windowBits<48&&!(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var m=o.inflateInit2(this.strm,b.windowBits);if(m!==u.Z_OK)throw new Error(c[m]);this.header=new f,o.inflateGetHeader(this.strm,this.header)}function y(p,b){var m=new d(b);if(m.push(p,!0),m.err)throw m.msg||c[m.err];return m.result}d.prototype.push=function(p,b){var m,g,w,x,k,D,E=this.strm,A=this.options.chunkSize,P=this.options.dictionary,N=!1;if(this.ended)return!1;g=b===~~b?b:b===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof p=="string"?E.input=s.binstring2buf(p):h.call(p)==="[object ArrayBuffer]"?E.input=new Uint8Array(p):E.input=p,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new a.Buf8(A),E.next_out=0,E.avail_out=A),(m=o.inflate(E,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&P&&(D=typeof P=="string"?s.string2buf(P):h.call(P)==="[object ArrayBuffer]"?new Uint8Array(P):P,m=o.inflateSetDictionary(this.strm,D)),m===u.Z_BUF_ERROR&&N===!0&&(m=u.Z_OK,N=!1),m!==u.Z_STREAM_END&&m!==u.Z_OK)return this.onEnd(m),!(this.ended=!0);E.next_out&&(E.avail_out!==0&&m!==u.Z_STREAM_END&&(E.avail_in!==0||g!==u.Z_FINISH&&g!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(w=s.utf8border(E.output,E.next_out),x=E.next_out-w,k=s.buf2string(E.output,w),E.next_out=x,E.avail_out=A-x,x&&a.arraySet(E.output,E.output,w,x,0),this.onData(k)):this.onData(a.shrinkBuf(E.output,E.next_out)))),E.avail_in===0&&E.avail_out===0&&(N=!0)}while((0<E.avail_in||E.avail_out===0)&&m!==u.Z_STREAM_END);return m===u.Z_STREAM_END&&(g=u.Z_FINISH),g===u.Z_FINISH?(m=o.inflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===u.Z_OK):g!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(E.avail_out=0))},d.prototype.onData=function(p){this.chunks.push(p)},d.prototype.onEnd=function(p){p===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},i.Inflate=d,i.inflate=y,i.inflateRaw=function(p,b){return(b=b||{}).raw=!0,y(p,b)},i.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,n,i){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(u){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var l=c.shift();if(l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(var f in l)l.hasOwnProperty(f)&&(u[f]=l[f])}}return u},i.shrinkBuf=function(u,c){return u.length===c?u:u.subarray?u.subarray(0,c):(u.length=c,u)};var a={arraySet:function(u,c,l,f,h){if(c.subarray&&u.subarray)u.set(c.subarray(l,l+f),h);else for(var d=0;d<f;d++)u[h+d]=c[l+d]},flattenChunks:function(u){var c,l,f,h,d,y;for(c=f=0,l=u.length;c<l;c++)f+=u[c].length;for(y=new Uint8Array(f),c=h=0,l=u.length;c<l;c++)d=u[c],y.set(d,h),h+=d.length;return y}},s={arraySet:function(u,c,l,f,h){for(var d=0;d<f;d++)u[h+d]=c[l+d]},flattenChunks:function(u){return[].concat.apply([],u)}};i.setTyped=function(u){u?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,a)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,s))},i.setTyped(o)},{}],42:[function(r,n,i){var o=r("./common"),a=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var u=new o.Buf8(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function l(f,h){if(h<65537&&(f.subarray&&s||!f.subarray&&a))return String.fromCharCode.apply(null,o.shrinkBuf(f,h));for(var d="",y=0;y<h;y++)d+=String.fromCharCode(f[y]);return d}u[254]=u[254]=1,i.string2buf=function(f){var h,d,y,p,b,m=f.length,g=0;for(p=0;p<m;p++)(64512&(d=f.charCodeAt(p)))==55296&&p+1<m&&(64512&(y=f.charCodeAt(p+1)))==56320&&(d=65536+(d-55296<<10)+(y-56320),p++),g+=d<128?1:d<2048?2:d<65536?3:4;for(h=new o.Buf8(g),p=b=0;b<g;p++)(64512&(d=f.charCodeAt(p)))==55296&&p+1<m&&(64512&(y=f.charCodeAt(p+1)))==56320&&(d=65536+(d-55296<<10)+(y-56320),p++),d<128?h[b++]=d:(d<2048?h[b++]=192|d>>>6:(d<65536?h[b++]=224|d>>>12:(h[b++]=240|d>>>18,h[b++]=128|d>>>12&63),h[b++]=128|d>>>6&63),h[b++]=128|63&d);return h},i.buf2binstring=function(f){return l(f,f.length)},i.binstring2buf=function(f){for(var h=new o.Buf8(f.length),d=0,y=h.length;d<y;d++)h[d]=f.charCodeAt(d);return h},i.buf2string=function(f,h){var d,y,p,b,m=h||f.length,g=new Array(2*m);for(d=y=0;d<m;)if((p=f[d++])<128)g[y++]=p;else if(4<(b=u[p]))g[y++]=65533,d+=b-1;else{for(p&=b===2?31:b===3?15:7;1<b&&d<m;)p=p<<6|63&f[d++],b--;1<b?g[y++]=65533:p<65536?g[y++]=p:(p-=65536,g[y++]=55296|p>>10&1023,g[y++]=56320|1023&p)}return l(g,y)},i.utf8border=function(f,h){var d;for((h=h||f.length)>f.length&&(h=f.length),d=h-1;0<=d&&(192&f[d])==128;)d--;return d<0||d===0?h:d+u[f[d]]>h?d:h}},{"./common":41}],43:[function(r,n,i){n.exports=function(o,a,s,u){for(var c=65535&o|0,l=o>>>16&65535|0,f=0;s!==0;){for(s-=f=2e3<s?2e3:s;l=l+(c=c+a[u++]|0)|0,--f;);c%=65521,l%=65521}return c|l<<16|0}},{}],44:[function(r,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,n,i){var o=function(){for(var a,s=[],u=0;u<256;u++){a=u;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;s[u]=a}return s}();n.exports=function(a,s,u,c){var l=o,f=c+u;a^=-1;for(var h=c;h<f;h++)a=a>>>8^l[255&(a^s[h])];return-1^a}},{}],46:[function(r,n,i){var o,a=r("../utils/common"),s=r("./trees"),u=r("./adler32"),c=r("./crc32"),l=r("./messages"),f=0,h=4,d=0,y=-2,p=-1,b=4,m=2,g=8,w=9,x=286,k=30,D=19,E=2*x+1,A=15,P=3,N=258,Y=N+P+1,C=42,$=113,_=1,M=2,V=3,L=4;function te(v,U){return v.msg=l[U],U}function j(v){return(v<<1)-(4<v?9:0)}function ee(v){for(var U=v.length;0<=--U;)v[U]=0}function B(v){var U=v.state,F=U.pending;F>v.avail_out&&(F=v.avail_out),F!==0&&(a.arraySet(v.output,U.pending_buf,U.pending_out,F,v.next_out),v.next_out+=F,U.pending_out+=F,v.total_out+=F,v.avail_out-=F,U.pending-=F,U.pending===0&&(U.pending_out=0))}function T(v,U){s._tr_flush_block(v,0<=v.block_start?v.block_start:-1,v.strstart-v.block_start,U),v.block_start=v.strstart,B(v.strm)}function ie(v,U){v.pending_buf[v.pending++]=U}function Z(v,U){v.pending_buf[v.pending++]=U>>>8&255,v.pending_buf[v.pending++]=255&U}function G(v,U){var F,O,S=v.max_chain_length,I=v.strstart,z=v.prev_length,K=v.nice_match,R=v.strstart>v.w_size-Y?v.strstart-(v.w_size-Y):0,q=v.window,X=v.w_mask,H=v.prev,ne=v.strstart+N,me=q[I+z-1],le=q[I+z];v.prev_length>=v.good_match&&(S>>=2),K>v.lookahead&&(K=v.lookahead);do if(q[(F=U)+z]===le&&q[F+z-1]===me&&q[F]===q[I]&&q[++F]===q[I+1]){I+=2,F++;do;while(q[++I]===q[++F]&&q[++I]===q[++F]&&q[++I]===q[++F]&&q[++I]===q[++F]&&q[++I]===q[++F]&&q[++I]===q[++F]&&q[++I]===q[++F]&&q[++I]===q[++F]&&I<ne);if(O=N-(ne-I),I=ne-N,z<O){if(v.match_start=U,K<=(z=O))break;me=q[I+z-1],le=q[I+z]}}while((U=H[U&X])>R&&--S!=0);return z<=v.lookahead?z:v.lookahead}function we(v){var U,F,O,S,I,z,K,R,q,X,H=v.w_size;do{if(S=v.window_size-v.lookahead-v.strstart,v.strstart>=H+(H-Y)){for(a.arraySet(v.window,v.window,H,H,0),v.match_start-=H,v.strstart-=H,v.block_start-=H,U=F=v.hash_size;O=v.head[--U],v.head[U]=H<=O?O-H:0,--F;);for(U=F=H;O=v.prev[--U],v.prev[U]=H<=O?O-H:0,--F;);S+=H}if(v.strm.avail_in===0)break;if(z=v.strm,K=v.window,R=v.strstart+v.lookahead,q=S,X=void 0,X=z.avail_in,q<X&&(X=q),F=X===0?0:(z.avail_in-=X,a.arraySet(K,z.input,z.next_in,X,R),z.state.wrap===1?z.adler=u(z.adler,K,X,R):z.state.wrap===2&&(z.adler=c(z.adler,K,X,R)),z.next_in+=X,z.total_in+=X,X),v.lookahead+=F,v.lookahead+v.insert>=P)for(I=v.strstart-v.insert,v.ins_h=v.window[I],v.ins_h=(v.ins_h<<v.hash_shift^v.window[I+1])&v.hash_mask;v.insert&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[I+P-1])&v.hash_mask,v.prev[I&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=I,I++,v.insert--,!(v.lookahead+v.insert<P)););}while(v.lookahead<Y&&v.strm.avail_in!==0)}function Fe(v,U){for(var F,O;;){if(v.lookahead<Y){if(we(v),v.lookahead<Y&&U===f)return _;if(v.lookahead===0)break}if(F=0,v.lookahead>=P&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+P-1])&v.hash_mask,F=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart),F!==0&&v.strstart-F<=v.w_size-Y&&(v.match_length=G(v,F)),v.match_length>=P)if(O=s._tr_tally(v,v.strstart-v.match_start,v.match_length-P),v.lookahead-=v.match_length,v.match_length<=v.max_lazy_match&&v.lookahead>=P){for(v.match_length--;v.strstart++,v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+P-1])&v.hash_mask,F=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart,--v.match_length!=0;);v.strstart++}else v.strstart+=v.match_length,v.match_length=0,v.ins_h=v.window[v.strstart],v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+1])&v.hash_mask;else O=s._tr_tally(v,0,v.window[v.strstart]),v.lookahead--,v.strstart++;if(O&&(T(v,!1),v.strm.avail_out===0))return _}return v.insert=v.strstart<P-1?v.strstart:P-1,U===h?(T(v,!0),v.strm.avail_out===0?V:L):v.last_lit&&(T(v,!1),v.strm.avail_out===0)?_:M}function ce(v,U){for(var F,O,S;;){if(v.lookahead<Y){if(we(v),v.lookahead<Y&&U===f)return _;if(v.lookahead===0)break}if(F=0,v.lookahead>=P&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+P-1])&v.hash_mask,F=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart),v.prev_length=v.match_length,v.prev_match=v.match_start,v.match_length=P-1,F!==0&&v.prev_length<v.max_lazy_match&&v.strstart-F<=v.w_size-Y&&(v.match_length=G(v,F),v.match_length<=5&&(v.strategy===1||v.match_length===P&&4096<v.strstart-v.match_start)&&(v.match_length=P-1)),v.prev_length>=P&&v.match_length<=v.prev_length){for(S=v.strstart+v.lookahead-P,O=s._tr_tally(v,v.strstart-1-v.prev_match,v.prev_length-P),v.lookahead-=v.prev_length-1,v.prev_length-=2;++v.strstart<=S&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+P-1])&v.hash_mask,F=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart),--v.prev_length!=0;);if(v.match_available=0,v.match_length=P-1,v.strstart++,O&&(T(v,!1),v.strm.avail_out===0))return _}else if(v.match_available){if((O=s._tr_tally(v,0,v.window[v.strstart-1]))&&T(v,!1),v.strstart++,v.lookahead--,v.strm.avail_out===0)return _}else v.match_available=1,v.strstart++,v.lookahead--}return v.match_available&&(O=s._tr_tally(v,0,v.window[v.strstart-1]),v.match_available=0),v.insert=v.strstart<P-1?v.strstart:P-1,U===h?(T(v,!0),v.strm.avail_out===0?V:L):v.last_lit&&(T(v,!1),v.strm.avail_out===0)?_:M}function fe(v,U,F,O,S){this.good_length=v,this.max_lazy=U,this.nice_length=F,this.max_chain=O,this.func=S}function Ae(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*E),this.dyn_dtree=new a.Buf16(2*(2*k+1)),this.bl_tree=new a.Buf16(2*(2*D+1)),ee(this.dyn_ltree),ee(this.dyn_dtree),ee(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(A+1),this.heap=new a.Buf16(2*x+1),ee(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*x+1),ee(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ke(v){var U;return v&&v.state?(v.total_in=v.total_out=0,v.data_type=m,(U=v.state).pending=0,U.pending_out=0,U.wrap<0&&(U.wrap=-U.wrap),U.status=U.wrap?C:$,v.adler=U.wrap===2?0:1,U.last_flush=f,s._tr_init(U),d):te(v,y)}function ct(v){var U=ke(v);return U===d&&function(F){F.window_size=2*F.w_size,ee(F.head),F.max_lazy_match=o[F.level].max_lazy,F.good_match=o[F.level].good_length,F.nice_match=o[F.level].nice_length,F.max_chain_length=o[F.level].max_chain,F.strstart=0,F.block_start=0,F.lookahead=0,F.insert=0,F.match_length=F.prev_length=P-1,F.match_available=0,F.ins_h=0}(v.state),U}function nt(v,U,F,O,S,I){if(!v)return y;var z=1;if(U===p&&(U=6),O<0?(z=0,O=-O):15<O&&(z=2,O-=16),S<1||w<S||F!==g||O<8||15<O||U<0||9<U||I<0||b<I)return te(v,y);O===8&&(O=9);var K=new Ae;return(v.state=K).strm=v,K.wrap=z,K.gzhead=null,K.w_bits=O,K.w_size=1<<K.w_bits,K.w_mask=K.w_size-1,K.hash_bits=S+7,K.hash_size=1<<K.hash_bits,K.hash_mask=K.hash_size-1,K.hash_shift=~~((K.hash_bits+P-1)/P),K.window=new a.Buf8(2*K.w_size),K.head=new a.Buf16(K.hash_size),K.prev=new a.Buf16(K.w_size),K.lit_bufsize=1<<S+6,K.pending_buf_size=4*K.lit_bufsize,K.pending_buf=new a.Buf8(K.pending_buf_size),K.d_buf=1*K.lit_bufsize,K.l_buf=3*K.lit_bufsize,K.level=U,K.strategy=I,K.method=F,ct(v)}o=[new fe(0,0,0,0,function(v,U){var F=65535;for(F>v.pending_buf_size-5&&(F=v.pending_buf_size-5);;){if(v.lookahead<=1){if(we(v),v.lookahead===0&&U===f)return _;if(v.lookahead===0)break}v.strstart+=v.lookahead,v.lookahead=0;var O=v.block_start+F;if((v.strstart===0||v.strstart>=O)&&(v.lookahead=v.strstart-O,v.strstart=O,T(v,!1),v.strm.avail_out===0)||v.strstart-v.block_start>=v.w_size-Y&&(T(v,!1),v.strm.avail_out===0))return _}return v.insert=0,U===h?(T(v,!0),v.strm.avail_out===0?V:L):(v.strstart>v.block_start&&(T(v,!1),v.strm.avail_out),_)}),new fe(4,4,8,4,Fe),new fe(4,5,16,8,Fe),new fe(4,6,32,32,Fe),new fe(4,4,16,16,ce),new fe(8,16,32,32,ce),new fe(8,16,128,128,ce),new fe(8,32,128,256,ce),new fe(32,128,258,1024,ce),new fe(32,258,258,4096,ce)],i.deflateInit=function(v,U){return nt(v,U,g,15,8,0)},i.deflateInit2=nt,i.deflateReset=ct,i.deflateResetKeep=ke,i.deflateSetHeader=function(v,U){return v&&v.state?v.state.wrap!==2?y:(v.state.gzhead=U,d):y},i.deflate=function(v,U){var F,O,S,I;if(!v||!v.state||5<U||U<0)return v?te(v,y):y;if(O=v.state,!v.output||!v.input&&v.avail_in!==0||O.status===666&&U!==h)return te(v,v.avail_out===0?-5:y);if(O.strm=v,F=O.last_flush,O.last_flush=U,O.status===C)if(O.wrap===2)v.adler=0,ie(O,31),ie(O,139),ie(O,8),O.gzhead?(ie(O,(O.gzhead.text?1:0)+(O.gzhead.hcrc?2:0)+(O.gzhead.extra?4:0)+(O.gzhead.name?8:0)+(O.gzhead.comment?16:0)),ie(O,255&O.gzhead.time),ie(O,O.gzhead.time>>8&255),ie(O,O.gzhead.time>>16&255),ie(O,O.gzhead.time>>24&255),ie(O,O.level===9?2:2<=O.strategy||O.level<2?4:0),ie(O,255&O.gzhead.os),O.gzhead.extra&&O.gzhead.extra.length&&(ie(O,255&O.gzhead.extra.length),ie(O,O.gzhead.extra.length>>8&255)),O.gzhead.hcrc&&(v.adler=c(v.adler,O.pending_buf,O.pending,0)),O.gzindex=0,O.status=69):(ie(O,0),ie(O,0),ie(O,0),ie(O,0),ie(O,0),ie(O,O.level===9?2:2<=O.strategy||O.level<2?4:0),ie(O,3),O.status=$);else{var z=g+(O.w_bits-8<<4)<<8;z|=(2<=O.strategy||O.level<2?0:O.level<6?1:O.level===6?2:3)<<6,O.strstart!==0&&(z|=32),z+=31-z%31,O.status=$,Z(O,z),O.strstart!==0&&(Z(O,v.adler>>>16),Z(O,65535&v.adler)),v.adler=1}if(O.status===69)if(O.gzhead.extra){for(S=O.pending;O.gzindex<(65535&O.gzhead.extra.length)&&(O.pending!==O.pending_buf_size||(O.gzhead.hcrc&&O.pending>S&&(v.adler=c(v.adler,O.pending_buf,O.pending-S,S)),B(v),S=O.pending,O.pending!==O.pending_buf_size));)ie(O,255&O.gzhead.extra[O.gzindex]),O.gzindex++;O.gzhead.hcrc&&O.pending>S&&(v.adler=c(v.adler,O.pending_buf,O.pending-S,S)),O.gzindex===O.gzhead.extra.length&&(O.gzindex=0,O.status=73)}else O.status=73;if(O.status===73)if(O.gzhead.name){S=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>S&&(v.adler=c(v.adler,O.pending_buf,O.pending-S,S)),B(v),S=O.pending,O.pending===O.pending_buf_size)){I=1;break}I=O.gzindex<O.gzhead.name.length?255&O.gzhead.name.charCodeAt(O.gzindex++):0,ie(O,I)}while(I!==0);O.gzhead.hcrc&&O.pending>S&&(v.adler=c(v.adler,O.pending_buf,O.pending-S,S)),I===0&&(O.gzindex=0,O.status=91)}else O.status=91;if(O.status===91)if(O.gzhead.comment){S=O.pending;do{if(O.pending===O.pending_buf_size&&(O.gzhead.hcrc&&O.pending>S&&(v.adler=c(v.adler,O.pending_buf,O.pending-S,S)),B(v),S=O.pending,O.pending===O.pending_buf_size)){I=1;break}I=O.gzindex<O.gzhead.comment.length?255&O.gzhead.comment.charCodeAt(O.gzindex++):0,ie(O,I)}while(I!==0);O.gzhead.hcrc&&O.pending>S&&(v.adler=c(v.adler,O.pending_buf,O.pending-S,S)),I===0&&(O.status=103)}else O.status=103;if(O.status===103&&(O.gzhead.hcrc?(O.pending+2>O.pending_buf_size&&B(v),O.pending+2<=O.pending_buf_size&&(ie(O,255&v.adler),ie(O,v.adler>>8&255),v.adler=0,O.status=$)):O.status=$),O.pending!==0){if(B(v),v.avail_out===0)return O.last_flush=-1,d}else if(v.avail_in===0&&j(U)<=j(F)&&U!==h)return te(v,-5);if(O.status===666&&v.avail_in!==0)return te(v,-5);if(v.avail_in!==0||O.lookahead!==0||U!==f&&O.status!==666){var K=O.strategy===2?function(R,q){for(var X;;){if(R.lookahead===0&&(we(R),R.lookahead===0)){if(q===f)return _;break}if(R.match_length=0,X=s._tr_tally(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++,X&&(T(R,!1),R.strm.avail_out===0))return _}return R.insert=0,q===h?(T(R,!0),R.strm.avail_out===0?V:L):R.last_lit&&(T(R,!1),R.strm.avail_out===0)?_:M}(O,U):O.strategy===3?function(R,q){for(var X,H,ne,me,le=R.window;;){if(R.lookahead<=N){if(we(R),R.lookahead<=N&&q===f)return _;if(R.lookahead===0)break}if(R.match_length=0,R.lookahead>=P&&0<R.strstart&&(H=le[ne=R.strstart-1])===le[++ne]&&H===le[++ne]&&H===le[++ne]){me=R.strstart+N;do;while(H===le[++ne]&&H===le[++ne]&&H===le[++ne]&&H===le[++ne]&&H===le[++ne]&&H===le[++ne]&&H===le[++ne]&&H===le[++ne]&&ne<me);R.match_length=N-(me-ne),R.match_length>R.lookahead&&(R.match_length=R.lookahead)}if(R.match_length>=P?(X=s._tr_tally(R,1,R.match_length-P),R.lookahead-=R.match_length,R.strstart+=R.match_length,R.match_length=0):(X=s._tr_tally(R,0,R.window[R.strstart]),R.lookahead--,R.strstart++),X&&(T(R,!1),R.strm.avail_out===0))return _}return R.insert=0,q===h?(T(R,!0),R.strm.avail_out===0?V:L):R.last_lit&&(T(R,!1),R.strm.avail_out===0)?_:M}(O,U):o[O.level].func(O,U);if(K!==V&&K!==L||(O.status=666),K===_||K===V)return v.avail_out===0&&(O.last_flush=-1),d;if(K===M&&(U===1?s._tr_align(O):U!==5&&(s._tr_stored_block(O,0,0,!1),U===3&&(ee(O.head),O.lookahead===0&&(O.strstart=0,O.block_start=0,O.insert=0))),B(v),v.avail_out===0))return O.last_flush=-1,d}return U!==h?d:O.wrap<=0?1:(O.wrap===2?(ie(O,255&v.adler),ie(O,v.adler>>8&255),ie(O,v.adler>>16&255),ie(O,v.adler>>24&255),ie(O,255&v.total_in),ie(O,v.total_in>>8&255),ie(O,v.total_in>>16&255),ie(O,v.total_in>>24&255)):(Z(O,v.adler>>>16),Z(O,65535&v.adler)),B(v),0<O.wrap&&(O.wrap=-O.wrap),O.pending!==0?d:1)},i.deflateEnd=function(v){var U;return v&&v.state?(U=v.state.status)!==C&&U!==69&&U!==73&&U!==91&&U!==103&&U!==$&&U!==666?te(v,y):(v.state=null,U===$?te(v,-3):d):y},i.deflateSetDictionary=function(v,U){var F,O,S,I,z,K,R,q,X=U.length;if(!v||!v.state||(I=(F=v.state).wrap)===2||I===1&&F.status!==C||F.lookahead)return y;for(I===1&&(v.adler=u(v.adler,U,X,0)),F.wrap=0,X>=F.w_size&&(I===0&&(ee(F.head),F.strstart=0,F.block_start=0,F.insert=0),q=new a.Buf8(F.w_size),a.arraySet(q,U,X-F.w_size,F.w_size,0),U=q,X=F.w_size),z=v.avail_in,K=v.next_in,R=v.input,v.avail_in=X,v.next_in=0,v.input=U,we(F);F.lookahead>=P;){for(O=F.strstart,S=F.lookahead-(P-1);F.ins_h=(F.ins_h<<F.hash_shift^F.window[O+P-1])&F.hash_mask,F.prev[O&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=O,O++,--S;);F.strstart=O,F.lookahead=P-1,we(F)}return F.strstart+=F.lookahead,F.block_start=F.strstart,F.insert=F.lookahead,F.lookahead=0,F.match_length=F.prev_length=P-1,F.match_available=0,v.next_in=K,v.input=R,v.avail_in=z,F.wrap=I,d},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,n,i){n.exports=function(o,a){var s,u,c,l,f,h,d,y,p,b,m,g,w,x,k,D,E,A,P,N,Y,C,$,_,M;s=o.state,u=o.next_in,_=o.input,c=u+(o.avail_in-5),l=o.next_out,M=o.output,f=l-(a-o.avail_out),h=l+(o.avail_out-257),d=s.dmax,y=s.wsize,p=s.whave,b=s.wnext,m=s.window,g=s.hold,w=s.bits,x=s.lencode,k=s.distcode,D=(1<<s.lenbits)-1,E=(1<<s.distbits)-1;e:do{w<15&&(g+=_[u++]<<w,w+=8,g+=_[u++]<<w,w+=8),A=x[g&D];t:for(;;){if(g>>>=P=A>>>24,w-=P,(P=A>>>16&255)===0)M[l++]=65535&A;else{if(!(16&P)){if(!(64&P)){A=x[(65535&A)+(g&(1<<P)-1)];continue t}if(32&P){s.mode=12;break e}o.msg="invalid literal/length code",s.mode=30;break e}N=65535&A,(P&=15)&&(w<P&&(g+=_[u++]<<w,w+=8),N+=g&(1<<P)-1,g>>>=P,w-=P),w<15&&(g+=_[u++]<<w,w+=8,g+=_[u++]<<w,w+=8),A=k[g&E];r:for(;;){if(g>>>=P=A>>>24,w-=P,!(16&(P=A>>>16&255))){if(!(64&P)){A=k[(65535&A)+(g&(1<<P)-1)];continue r}o.msg="invalid distance code",s.mode=30;break e}if(Y=65535&A,w<(P&=15)&&(g+=_[u++]<<w,(w+=8)<P&&(g+=_[u++]<<w,w+=8)),d<(Y+=g&(1<<P)-1)){o.msg="invalid distance too far back",s.mode=30;break e}if(g>>>=P,w-=P,(P=l-f)<Y){if(p<(P=Y-P)&&s.sane){o.msg="invalid distance too far back",s.mode=30;break e}if($=m,(C=0)===b){if(C+=y-P,P<N){for(N-=P;M[l++]=m[C++],--P;);C=l-Y,$=M}}else if(b<P){if(C+=y+b-P,(P-=b)<N){for(N-=P;M[l++]=m[C++],--P;);if(C=0,b<N){for(N-=P=b;M[l++]=m[C++],--P;);C=l-Y,$=M}}}else if(C+=b-P,P<N){for(N-=P;M[l++]=m[C++],--P;);C=l-Y,$=M}for(;2<N;)M[l++]=$[C++],M[l++]=$[C++],M[l++]=$[C++],N-=3;N&&(M[l++]=$[C++],1<N&&(M[l++]=$[C++]))}else{for(C=l-Y;M[l++]=M[C++],M[l++]=M[C++],M[l++]=M[C++],2<(N-=3););N&&(M[l++]=M[C++],1<N&&(M[l++]=M[C++]))}break}}break}}while(u<c&&l<h);u-=N=w>>3,g&=(1<<(w-=N<<3))-1,o.next_in=u,o.next_out=l,o.avail_in=u<c?c-u+5:5-(u-c),o.avail_out=l<h?h-l+257:257-(l-h),s.hold=g,s.bits=w}},{}],49:[function(r,n,i){var o=r("../utils/common"),a=r("./adler32"),s=r("./crc32"),u=r("./inffast"),c=r("./inftrees"),l=1,f=2,h=0,d=-2,y=1,p=852,b=592;function m(C){return(C>>>24&255)+(C>>>8&65280)+((65280&C)<<8)+((255&C)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(C){var $;return C&&C.state?($=C.state,C.total_in=C.total_out=$.total=0,C.msg="",$.wrap&&(C.adler=1&$.wrap),$.mode=y,$.last=0,$.havedict=0,$.dmax=32768,$.head=null,$.hold=0,$.bits=0,$.lencode=$.lendyn=new o.Buf32(p),$.distcode=$.distdyn=new o.Buf32(b),$.sane=1,$.back=-1,h):d}function x(C){var $;return C&&C.state?(($=C.state).wsize=0,$.whave=0,$.wnext=0,w(C)):d}function k(C,$){var _,M;return C&&C.state?(M=C.state,$<0?(_=0,$=-$):(_=1+($>>4),$<48&&($&=15)),$&&($<8||15<$)?d:(M.window!==null&&M.wbits!==$&&(M.window=null),M.wrap=_,M.wbits=$,x(C))):d}function D(C,$){var _,M;return C?(M=new g,(C.state=M).window=null,(_=k(C,$))!==h&&(C.state=null),_):d}var E,A,P=!0;function N(C){if(P){var $;for(E=new o.Buf32(512),A=new o.Buf32(32),$=0;$<144;)C.lens[$++]=8;for(;$<256;)C.lens[$++]=9;for(;$<280;)C.lens[$++]=7;for(;$<288;)C.lens[$++]=8;for(c(l,C.lens,0,288,E,0,C.work,{bits:9}),$=0;$<32;)C.lens[$++]=5;c(f,C.lens,0,32,A,0,C.work,{bits:5}),P=!1}C.lencode=E,C.lenbits=9,C.distcode=A,C.distbits=5}function Y(C,$,_,M){var V,L=C.state;return L.window===null&&(L.wsize=1<<L.wbits,L.wnext=0,L.whave=0,L.window=new o.Buf8(L.wsize)),M>=L.wsize?(o.arraySet(L.window,$,_-L.wsize,L.wsize,0),L.wnext=0,L.whave=L.wsize):(M<(V=L.wsize-L.wnext)&&(V=M),o.arraySet(L.window,$,_-M,V,L.wnext),(M-=V)?(o.arraySet(L.window,$,_-M,M,0),L.wnext=M,L.whave=L.wsize):(L.wnext+=V,L.wnext===L.wsize&&(L.wnext=0),L.whave<L.wsize&&(L.whave+=V))),0}i.inflateReset=x,i.inflateReset2=k,i.inflateResetKeep=w,i.inflateInit=function(C){return D(C,15)},i.inflateInit2=D,i.inflate=function(C,$){var _,M,V,L,te,j,ee,B,T,ie,Z,G,we,Fe,ce,fe,Ae,ke,ct,nt,v,U,F,O,S=0,I=new o.Buf8(4),z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!C||!C.state||!C.output||!C.input&&C.avail_in!==0)return d;(_=C.state).mode===12&&(_.mode=13),te=C.next_out,V=C.output,ee=C.avail_out,L=C.next_in,M=C.input,j=C.avail_in,B=_.hold,T=_.bits,ie=j,Z=ee,U=h;e:for(;;)switch(_.mode){case y:if(_.wrap===0){_.mode=13;break}for(;T<16;){if(j===0)break e;j--,B+=M[L++]<<T,T+=8}if(2&_.wrap&&B===35615){I[_.check=0]=255&B,I[1]=B>>>8&255,_.check=s(_.check,I,2,0),T=B=0,_.mode=2;break}if(_.flags=0,_.head&&(_.head.done=!1),!(1&_.wrap)||(((255&B)<<8)+(B>>8))%31){C.msg="incorrect header check",_.mode=30;break}if((15&B)!=8){C.msg="unknown compression method",_.mode=30;break}if(T-=4,v=8+(15&(B>>>=4)),_.wbits===0)_.wbits=v;else if(v>_.wbits){C.msg="invalid window size",_.mode=30;break}_.dmax=1<<v,C.adler=_.check=1,_.mode=512&B?10:12,T=B=0;break;case 2:for(;T<16;){if(j===0)break e;j--,B+=M[L++]<<T,T+=8}if(_.flags=B,(255&_.flags)!=8){C.msg="unknown compression method",_.mode=30;break}if(57344&_.flags){C.msg="unknown header flags set",_.mode=30;break}_.head&&(_.head.text=B>>8&1),512&_.flags&&(I[0]=255&B,I[1]=B>>>8&255,_.check=s(_.check,I,2,0)),T=B=0,_.mode=3;case 3:for(;T<32;){if(j===0)break e;j--,B+=M[L++]<<T,T+=8}_.head&&(_.head.time=B),512&_.flags&&(I[0]=255&B,I[1]=B>>>8&255,I[2]=B>>>16&255,I[3]=B>>>24&255,_.check=s(_.check,I,4,0)),T=B=0,_.mode=4;case 4:for(;T<16;){if(j===0)break e;j--,B+=M[L++]<<T,T+=8}_.head&&(_.head.xflags=255&B,_.head.os=B>>8),512&_.flags&&(I[0]=255&B,I[1]=B>>>8&255,_.check=s(_.check,I,2,0)),T=B=0,_.mode=5;case 5:if(1024&_.flags){for(;T<16;){if(j===0)break e;j--,B+=M[L++]<<T,T+=8}_.length=B,_.head&&(_.head.extra_len=B),512&_.flags&&(I[0]=255&B,I[1]=B>>>8&255,_.check=s(_.check,I,2,0)),T=B=0}else _.head&&(_.head.extra=null);_.mode=6;case 6:if(1024&_.flags&&(j<(G=_.length)&&(G=j),G&&(_.head&&(v=_.head.extra_len-_.length,_.head.extra||(_.head.extra=new Array(_.head.extra_len)),o.arraySet(_.head.extra,M,L,G,v)),512&_.flags&&(_.check=s(_.check,M,G,L)),j-=G,L+=G,_.length-=G),_.length))break e;_.length=0,_.mode=7;case 7:if(2048&_.flags){if(j===0)break e;for(G=0;v=M[L+G++],_.head&&v&&_.length<65536&&(_.head.name+=String.fromCharCode(v)),v&&G<j;);if(512&_.flags&&(_.check=s(_.check,M,G,L)),j-=G,L+=G,v)break e}else _.head&&(_.head.name=null);_.length=0,_.mode=8;case 8:if(4096&_.flags){if(j===0)break e;for(G=0;v=M[L+G++],_.head&&v&&_.length<65536&&(_.head.comment+=String.fromCharCode(v)),v&&G<j;);if(512&_.flags&&(_.check=s(_.check,M,G,L)),j-=G,L+=G,v)break e}else _.head&&(_.head.comment=null);_.mode=9;case 9:if(512&_.flags){for(;T<16;){if(j===0)break e;j--,B+=M[L++]<<T,T+=8}if(B!==(65535&_.check)){C.msg="header crc mismatch",_.mode=30;break}T=B=0}_.head&&(_.head.hcrc=_.flags>>9&1,_.head.done=!0),C.adler=_.check=0,_.mode=12;break;case 10:for(;T<32;){if(j===0)break e;j--,B+=M[L++]<<T,T+=8}C.adler=_.check=m(B),T=B=0,_.mode=11;case 11:if(_.havedict===0)return C.next_out=te,C.avail_out=ee,C.next_in=L,C.avail_in=j,_.hold=B,_.bits=T,2;C.adler=_.check=1,_.mode=12;case 12:if($===5||$===6)break e;case 13:if(_.last){B>>>=7&T,T-=7&T,_.mode=27;break}for(;T<3;){if(j===0)break e;j--,B+=M[L++]<<T,T+=8}switch(_.last=1&B,T-=1,3&(B>>>=1)){case 0:_.mode=14;break;case 1:if(N(_),_.mode=20,$!==6)break;B>>>=2,T-=2;break e;case 2:_.mode=17;break;case 3:C.msg="invalid block type",_.mode=30}B>>>=2,T-=2;break;case 14:for(B>>>=7&T,T-=7&T;T<32;){if(j===0)break e;j--,B+=M[L++]<<T,T+=8}if((65535&B)!=(B>>>16^65535)){C.msg="invalid stored block lengths",_.mode=30;break}if(_.length=65535&B,T=B=0,_.mode=15,$===6)break e;case 15:_.mode=16;case 16:if(G=_.length){if(j<G&&(G=j),ee<G&&(G=ee),G===0)break e;o.arraySet(V,M,L,G,te),j-=G,L+=G,ee-=G,te+=G,_.length-=G;break}_.mode=12;break;case 17:for(;T<14;){if(j===0)break e;j--,B+=M[L++]<<T,T+=8}if(_.nlen=257+(31&B),B>>>=5,T-=5,_.ndist=1+(31&B),B>>>=5,T-=5,_.ncode=4+(15&B),B>>>=4,T-=4,286<_.nlen||30<_.ndist){C.msg="too many length or distance symbols",_.mode=30;break}_.have=0,_.mode=18;case 18:for(;_.have<_.ncode;){for(;T<3;){if(j===0)break e;j--,B+=M[L++]<<T,T+=8}_.lens[z[_.have++]]=7&B,B>>>=3,T-=3}for(;_.have<19;)_.lens[z[_.have++]]=0;if(_.lencode=_.lendyn,_.lenbits=7,F={bits:_.lenbits},U=c(0,_.lens,0,19,_.lencode,0,_.work,F),_.lenbits=F.bits,U){C.msg="invalid code lengths set",_.mode=30;break}_.have=0,_.mode=19;case 19:for(;_.have<_.nlen+_.ndist;){for(;fe=(S=_.lencode[B&(1<<_.lenbits)-1])>>>16&255,Ae=65535&S,!((ce=S>>>24)<=T);){if(j===0)break e;j--,B+=M[L++]<<T,T+=8}if(Ae<16)B>>>=ce,T-=ce,_.lens[_.have++]=Ae;else{if(Ae===16){for(O=ce+2;T<O;){if(j===0)break e;j--,B+=M[L++]<<T,T+=8}if(B>>>=ce,T-=ce,_.have===0){C.msg="invalid bit length repeat",_.mode=30;break}v=_.lens[_.have-1],G=3+(3&B),B>>>=2,T-=2}else if(Ae===17){for(O=ce+3;T<O;){if(j===0)break e;j--,B+=M[L++]<<T,T+=8}T-=ce,v=0,G=3+(7&(B>>>=ce)),B>>>=3,T-=3}else{for(O=ce+7;T<O;){if(j===0)break e;j--,B+=M[L++]<<T,T+=8}T-=ce,v=0,G=11+(127&(B>>>=ce)),B>>>=7,T-=7}if(_.have+G>_.nlen+_.ndist){C.msg="invalid bit length repeat",_.mode=30;break}for(;G--;)_.lens[_.have++]=v}}if(_.mode===30)break;if(_.lens[256]===0){C.msg="invalid code -- missing end-of-block",_.mode=30;break}if(_.lenbits=9,F={bits:_.lenbits},U=c(l,_.lens,0,_.nlen,_.lencode,0,_.work,F),_.lenbits=F.bits,U){C.msg="invalid literal/lengths set",_.mode=30;break}if(_.distbits=6,_.distcode=_.distdyn,F={bits:_.distbits},U=c(f,_.lens,_.nlen,_.ndist,_.distcode,0,_.work,F),_.distbits=F.bits,U){C.msg="invalid distances set",_.mode=30;break}if(_.mode=20,$===6)break e;case 20:_.mode=21;case 21:if(6<=j&&258<=ee){C.next_out=te,C.avail_out=ee,C.next_in=L,C.avail_in=j,_.hold=B,_.bits=T,u(C,Z),te=C.next_out,V=C.output,ee=C.avail_out,L=C.next_in,M=C.input,j=C.avail_in,B=_.hold,T=_.bits,_.mode===12&&(_.back=-1);break}for(_.back=0;fe=(S=_.lencode[B&(1<<_.lenbits)-1])>>>16&255,Ae=65535&S,!((ce=S>>>24)<=T);){if(j===0)break e;j--,B+=M[L++]<<T,T+=8}if(fe&&!(240&fe)){for(ke=ce,ct=fe,nt=Ae;fe=(S=_.lencode[nt+((B&(1<<ke+ct)-1)>>ke)])>>>16&255,Ae=65535&S,!(ke+(ce=S>>>24)<=T);){if(j===0)break e;j--,B+=M[L++]<<T,T+=8}B>>>=ke,T-=ke,_.back+=ke}if(B>>>=ce,T-=ce,_.back+=ce,_.length=Ae,fe===0){_.mode=26;break}if(32&fe){_.back=-1,_.mode=12;break}if(64&fe){C.msg="invalid literal/length code",_.mode=30;break}_.extra=15&fe,_.mode=22;case 22:if(_.extra){for(O=_.extra;T<O;){if(j===0)break e;j--,B+=M[L++]<<T,T+=8}_.length+=B&(1<<_.extra)-1,B>>>=_.extra,T-=_.extra,_.back+=_.extra}_.was=_.length,_.mode=23;case 23:for(;fe=(S=_.distcode[B&(1<<_.distbits)-1])>>>16&255,Ae=65535&S,!((ce=S>>>24)<=T);){if(j===0)break e;j--,B+=M[L++]<<T,T+=8}if(!(240&fe)){for(ke=ce,ct=fe,nt=Ae;fe=(S=_.distcode[nt+((B&(1<<ke+ct)-1)>>ke)])>>>16&255,Ae=65535&S,!(ke+(ce=S>>>24)<=T);){if(j===0)break e;j--,B+=M[L++]<<T,T+=8}B>>>=ke,T-=ke,_.back+=ke}if(B>>>=ce,T-=ce,_.back+=ce,64&fe){C.msg="invalid distance code",_.mode=30;break}_.offset=Ae,_.extra=15&fe,_.mode=24;case 24:if(_.extra){for(O=_.extra;T<O;){if(j===0)break e;j--,B+=M[L++]<<T,T+=8}_.offset+=B&(1<<_.extra)-1,B>>>=_.extra,T-=_.extra,_.back+=_.extra}if(_.offset>_.dmax){C.msg="invalid distance too far back",_.mode=30;break}_.mode=25;case 25:if(ee===0)break e;if(G=Z-ee,_.offset>G){if((G=_.offset-G)>_.whave&&_.sane){C.msg="invalid distance too far back",_.mode=30;break}we=G>_.wnext?(G-=_.wnext,_.wsize-G):_.wnext-G,G>_.length&&(G=_.length),Fe=_.window}else Fe=V,we=te-_.offset,G=_.length;for(ee<G&&(G=ee),ee-=G,_.length-=G;V[te++]=Fe[we++],--G;);_.length===0&&(_.mode=21);break;case 26:if(ee===0)break e;V[te++]=_.length,ee--,_.mode=21;break;case 27:if(_.wrap){for(;T<32;){if(j===0)break e;j--,B|=M[L++]<<T,T+=8}if(Z-=ee,C.total_out+=Z,_.total+=Z,Z&&(C.adler=_.check=_.flags?s(_.check,V,Z,te-Z):a(_.check,V,Z,te-Z)),Z=ee,(_.flags?B:m(B))!==_.check){C.msg="incorrect data check",_.mode=30;break}T=B=0}_.mode=28;case 28:if(_.wrap&&_.flags){for(;T<32;){if(j===0)break e;j--,B+=M[L++]<<T,T+=8}if(B!==(4294967295&_.total)){C.msg="incorrect length check",_.mode=30;break}T=B=0}_.mode=29;case 29:U=1;break e;case 30:U=-3;break e;case 31:return-4;case 32:default:return d}return C.next_out=te,C.avail_out=ee,C.next_in=L,C.avail_in=j,_.hold=B,_.bits=T,(_.wsize||Z!==C.avail_out&&_.mode<30&&(_.mode<27||$!==4))&&Y(C,C.output,C.next_out,Z-C.avail_out)?(_.mode=31,-4):(ie-=C.avail_in,Z-=C.avail_out,C.total_in+=ie,C.total_out+=Z,_.total+=Z,_.wrap&&Z&&(C.adler=_.check=_.flags?s(_.check,V,Z,C.next_out-Z):a(_.check,V,Z,C.next_out-Z)),C.data_type=_.bits+(_.last?64:0)+(_.mode===12?128:0)+(_.mode===20||_.mode===15?256:0),(ie==0&&Z===0||$===4)&&U===h&&(U=-5),U)},i.inflateEnd=function(C){if(!C||!C.state)return d;var $=C.state;return $.window&&($.window=null),C.state=null,h},i.inflateGetHeader=function(C,$){var _;return C&&C.state&&2&(_=C.state).wrap?((_.head=$).done=!1,h):d},i.inflateSetDictionary=function(C,$){var _,M=$.length;return C&&C.state?(_=C.state).wrap!==0&&_.mode!==11?d:_.mode===11&&a(1,$,M,0)!==_.check?-3:Y(C,$,M,M)?(_.mode=31,-4):(_.havedict=1,h):d},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,n,i){var o=r("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(l,f,h,d,y,p,b,m){var g,w,x,k,D,E,A,P,N,Y=m.bits,C=0,$=0,_=0,M=0,V=0,L=0,te=0,j=0,ee=0,B=0,T=null,ie=0,Z=new o.Buf16(16),G=new o.Buf16(16),we=null,Fe=0;for(C=0;C<=15;C++)Z[C]=0;for($=0;$<d;$++)Z[f[h+$]]++;for(V=Y,M=15;1<=M&&Z[M]===0;M--);if(M<V&&(V=M),M===0)return y[p++]=20971520,y[p++]=20971520,m.bits=1,0;for(_=1;_<M&&Z[_]===0;_++);for(V<_&&(V=_),C=j=1;C<=15;C++)if(j<<=1,(j-=Z[C])<0)return-1;if(0<j&&(l===0||M!==1))return-1;for(G[1]=0,C=1;C<15;C++)G[C+1]=G[C]+Z[C];for($=0;$<d;$++)f[h+$]!==0&&(b[G[f[h+$]]++]=$);if(E=l===0?(T=we=b,19):l===1?(T=a,ie-=257,we=s,Fe-=257,256):(T=u,we=c,-1),C=_,D=p,te=$=B=0,x=-1,k=(ee=1<<(L=V))-1,l===1&&852<ee||l===2&&592<ee)return 1;for(;;){for(A=C-te,N=b[$]<E?(P=0,b[$]):b[$]>E?(P=we[Fe+b[$]],T[ie+b[$]]):(P=96,0),g=1<<C-te,_=w=1<<L;y[D+(B>>te)+(w-=g)]=A<<24|P<<16|N|0,w!==0;);for(g=1<<C-1;B&g;)g>>=1;if(g!==0?(B&=g-1,B+=g):B=0,$++,--Z[C]==0){if(C===M)break;C=f[h+b[$]]}if(V<C&&(B&k)!==x){for(te===0&&(te=V),D+=_,j=1<<(L=C-te);L+te<M&&!((j-=Z[L+te])<=0);)L++,j<<=1;if(ee+=1<<L,l===1&&852<ee||l===2&&592<ee)return 1;y[x=B&k]=V<<24|L<<16|D-p|0}}return B!==0&&(y[D+B]=C-te<<24|64<<16|0),m.bits=V,0}},{"../utils/common":41}],51:[function(r,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,n,i){var o=r("../utils/common"),a=0,s=1;function u(S){for(var I=S.length;0<=--I;)S[I]=0}var c=0,l=29,f=256,h=f+1+l,d=30,y=19,p=2*h+1,b=15,m=16,g=7,w=256,x=16,k=17,D=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],A=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Y=new Array(2*(h+2));u(Y);var C=new Array(2*d);u(C);var $=new Array(512);u($);var _=new Array(256);u(_);var M=new Array(l);u(M);var V,L,te,j=new Array(d);function ee(S,I,z,K,R){this.static_tree=S,this.extra_bits=I,this.extra_base=z,this.elems=K,this.max_length=R,this.has_stree=S&&S.length}function B(S,I){this.dyn_tree=S,this.max_code=0,this.stat_desc=I}function T(S){return S<256?$[S]:$[256+(S>>>7)]}function ie(S,I){S.pending_buf[S.pending++]=255&I,S.pending_buf[S.pending++]=I>>>8&255}function Z(S,I,z){S.bi_valid>m-z?(S.bi_buf|=I<<S.bi_valid&65535,ie(S,S.bi_buf),S.bi_buf=I>>m-S.bi_valid,S.bi_valid+=z-m):(S.bi_buf|=I<<S.bi_valid&65535,S.bi_valid+=z)}function G(S,I,z){Z(S,z[2*I],z[2*I+1])}function we(S,I){for(var z=0;z|=1&S,S>>>=1,z<<=1,0<--I;);return z>>>1}function Fe(S,I,z){var K,R,q=new Array(b+1),X=0;for(K=1;K<=b;K++)q[K]=X=X+z[K-1]<<1;for(R=0;R<=I;R++){var H=S[2*R+1];H!==0&&(S[2*R]=we(q[H]++,H))}}function ce(S){var I;for(I=0;I<h;I++)S.dyn_ltree[2*I]=0;for(I=0;I<d;I++)S.dyn_dtree[2*I]=0;for(I=0;I<y;I++)S.bl_tree[2*I]=0;S.dyn_ltree[2*w]=1,S.opt_len=S.static_len=0,S.last_lit=S.matches=0}function fe(S){8<S.bi_valid?ie(S,S.bi_buf):0<S.bi_valid&&(S.pending_buf[S.pending++]=S.bi_buf),S.bi_buf=0,S.bi_valid=0}function Ae(S,I,z,K){var R=2*I,q=2*z;return S[R]<S[q]||S[R]===S[q]&&K[I]<=K[z]}function ke(S,I,z){for(var K=S.heap[z],R=z<<1;R<=S.heap_len&&(R<S.heap_len&&Ae(I,S.heap[R+1],S.heap[R],S.depth)&&R++,!Ae(I,K,S.heap[R],S.depth));)S.heap[z]=S.heap[R],z=R,R<<=1;S.heap[z]=K}function ct(S,I,z){var K,R,q,X,H=0;if(S.last_lit!==0)for(;K=S.pending_buf[S.d_buf+2*H]<<8|S.pending_buf[S.d_buf+2*H+1],R=S.pending_buf[S.l_buf+H],H++,K===0?G(S,R,I):(G(S,(q=_[R])+f+1,I),(X=E[q])!==0&&Z(S,R-=M[q],X),G(S,q=T(--K),z),(X=A[q])!==0&&Z(S,K-=j[q],X)),H<S.last_lit;);G(S,w,I)}function nt(S,I){var z,K,R,q=I.dyn_tree,X=I.stat_desc.static_tree,H=I.stat_desc.has_stree,ne=I.stat_desc.elems,me=-1;for(S.heap_len=0,S.heap_max=p,z=0;z<ne;z++)q[2*z]!==0?(S.heap[++S.heap_len]=me=z,S.depth[z]=0):q[2*z+1]=0;for(;S.heap_len<2;)q[2*(R=S.heap[++S.heap_len]=me<2?++me:0)]=1,S.depth[R]=0,S.opt_len--,H&&(S.static_len-=X[2*R+1]);for(I.max_code=me,z=S.heap_len>>1;1<=z;z--)ke(S,q,z);for(R=ne;z=S.heap[1],S.heap[1]=S.heap[S.heap_len--],ke(S,q,1),K=S.heap[1],S.heap[--S.heap_max]=z,S.heap[--S.heap_max]=K,q[2*R]=q[2*z]+q[2*K],S.depth[R]=(S.depth[z]>=S.depth[K]?S.depth[z]:S.depth[K])+1,q[2*z+1]=q[2*K+1]=R,S.heap[1]=R++,ke(S,q,1),2<=S.heap_len;);S.heap[--S.heap_max]=S.heap[1],function(le,Ze){var hn,lt,dn,xe,ii,bo,gt=Ze.dyn_tree,tu=Ze.max_code,Ah=Ze.stat_desc.static_tree,Ih=Ze.stat_desc.has_stree,Rh=Ze.stat_desc.extra_bits,ru=Ze.stat_desc.extra_base,pn=Ze.stat_desc.max_length,oi=0;for(xe=0;xe<=b;xe++)le.bl_count[xe]=0;for(gt[2*le.heap[le.heap_max]+1]=0,hn=le.heap_max+1;hn<p;hn++)pn<(xe=gt[2*gt[2*(lt=le.heap[hn])+1]+1]+1)&&(xe=pn,oi++),gt[2*lt+1]=xe,tu<lt||(le.bl_count[xe]++,ii=0,ru<=lt&&(ii=Rh[lt-ru]),bo=gt[2*lt],le.opt_len+=bo*(xe+ii),Ih&&(le.static_len+=bo*(Ah[2*lt+1]+ii)));if(oi!==0){do{for(xe=pn-1;le.bl_count[xe]===0;)xe--;le.bl_count[xe]--,le.bl_count[xe+1]+=2,le.bl_count[pn]--,oi-=2}while(0<oi);for(xe=pn;xe!==0;xe--)for(lt=le.bl_count[xe];lt!==0;)tu<(dn=le.heap[--hn])||(gt[2*dn+1]!==xe&&(le.opt_len+=(xe-gt[2*dn+1])*gt[2*dn],gt[2*dn+1]=xe),lt--)}}(S,I),Fe(q,me,S.bl_count)}function v(S,I,z){var K,R,q=-1,X=I[1],H=0,ne=7,me=4;for(X===0&&(ne=138,me=3),I[2*(z+1)+1]=65535,K=0;K<=z;K++)R=X,X=I[2*(K+1)+1],++H<ne&&R===X||(H<me?S.bl_tree[2*R]+=H:R!==0?(R!==q&&S.bl_tree[2*R]++,S.bl_tree[2*x]++):H<=10?S.bl_tree[2*k]++:S.bl_tree[2*D]++,q=R,me=(H=0)===X?(ne=138,3):R===X?(ne=6,3):(ne=7,4))}function U(S,I,z){var K,R,q=-1,X=I[1],H=0,ne=7,me=4;for(X===0&&(ne=138,me=3),K=0;K<=z;K++)if(R=X,X=I[2*(K+1)+1],!(++H<ne&&R===X)){if(H<me)for(;G(S,R,S.bl_tree),--H!=0;);else R!==0?(R!==q&&(G(S,R,S.bl_tree),H--),G(S,x,S.bl_tree),Z(S,H-3,2)):H<=10?(G(S,k,S.bl_tree),Z(S,H-3,3)):(G(S,D,S.bl_tree),Z(S,H-11,7));q=R,me=(H=0)===X?(ne=138,3):R===X?(ne=6,3):(ne=7,4)}}u(j);var F=!1;function O(S,I,z,K){Z(S,(c<<1)+(K?1:0),3),function(R,q,X,H){fe(R),H&&(ie(R,X),ie(R,~X)),o.arraySet(R.pending_buf,R.window,q,X,R.pending),R.pending+=X}(S,I,z,!0)}i._tr_init=function(S){F||(function(){var I,z,K,R,q,X=new Array(b+1);for(R=K=0;R<l-1;R++)for(M[R]=K,I=0;I<1<<E[R];I++)_[K++]=R;for(_[K-1]=R,R=q=0;R<16;R++)for(j[R]=q,I=0;I<1<<A[R];I++)$[q++]=R;for(q>>=7;R<d;R++)for(j[R]=q<<7,I=0;I<1<<A[R]-7;I++)$[256+q++]=R;for(z=0;z<=b;z++)X[z]=0;for(I=0;I<=143;)Y[2*I+1]=8,I++,X[8]++;for(;I<=255;)Y[2*I+1]=9,I++,X[9]++;for(;I<=279;)Y[2*I+1]=7,I++,X[7]++;for(;I<=287;)Y[2*I+1]=8,I++,X[8]++;for(Fe(Y,h+1,X),I=0;I<d;I++)C[2*I+1]=5,C[2*I]=we(I,5);V=new ee(Y,E,f+1,h,b),L=new ee(C,A,0,d,b),te=new ee(new Array(0),P,0,y,g)}(),F=!0),S.l_desc=new B(S.dyn_ltree,V),S.d_desc=new B(S.dyn_dtree,L),S.bl_desc=new B(S.bl_tree,te),S.bi_buf=0,S.bi_valid=0,ce(S)},i._tr_stored_block=O,i._tr_flush_block=function(S,I,z,K){var R,q,X=0;0<S.level?(S.strm.data_type===2&&(S.strm.data_type=function(H){var ne,me=4093624447;for(ne=0;ne<=31;ne++,me>>>=1)if(1&me&&H.dyn_ltree[2*ne]!==0)return a;if(H.dyn_ltree[18]!==0||H.dyn_ltree[20]!==0||H.dyn_ltree[26]!==0)return s;for(ne=32;ne<f;ne++)if(H.dyn_ltree[2*ne]!==0)return s;return a}(S)),nt(S,S.l_desc),nt(S,S.d_desc),X=function(H){var ne;for(v(H,H.dyn_ltree,H.l_desc.max_code),v(H,H.dyn_dtree,H.d_desc.max_code),nt(H,H.bl_desc),ne=y-1;3<=ne&&H.bl_tree[2*N[ne]+1]===0;ne--);return H.opt_len+=3*(ne+1)+5+5+4,ne}(S),R=S.opt_len+3+7>>>3,(q=S.static_len+3+7>>>3)<=R&&(R=q)):R=q=z+5,z+4<=R&&I!==-1?O(S,I,z,K):S.strategy===4||q===R?(Z(S,2+(K?1:0),3),ct(S,Y,C)):(Z(S,4+(K?1:0),3),function(H,ne,me,le){var Ze;for(Z(H,ne-257,5),Z(H,me-1,5),Z(H,le-4,4),Ze=0;Ze<le;Ze++)Z(H,H.bl_tree[2*N[Ze]+1],3);U(H,H.dyn_ltree,ne-1),U(H,H.dyn_dtree,me-1)}(S,S.l_desc.max_code+1,S.d_desc.max_code+1,X+1),ct(S,S.dyn_ltree,S.dyn_dtree)),ce(S),K&&fe(S)},i._tr_tally=function(S,I,z){return S.pending_buf[S.d_buf+2*S.last_lit]=I>>>8&255,S.pending_buf[S.d_buf+2*S.last_lit+1]=255&I,S.pending_buf[S.l_buf+S.last_lit]=255&z,S.last_lit++,I===0?S.dyn_ltree[2*z]++:(S.matches++,I--,S.dyn_ltree[2*(_[z]+f+1)]++,S.dyn_dtree[2*T(I)]++),S.last_lit===S.lit_bufsize-1},i._tr_align=function(S){Z(S,2,3),G(S,w,Y),function(I){I.bi_valid===16?(ie(I,I.bi_buf),I.bi_buf=0,I.bi_valid=0):8<=I.bi_valid&&(I.pending_buf[I.pending++]=255&I.bi_buf,I.bi_buf>>=8,I.bi_valid-=8)}(S)}},{"../utils/common":41}],53:[function(r,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,n,i){(function(o){(function(a,s){if(!a.setImmediate){var u,c,l,f,h=1,d={},y=!1,p=a.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(a);b=b&&b.setTimeout?b:a,u={}.toString.call(a.process)==="[object process]"?function(x){process.nextTick(function(){g(x)})}:function(){if(a.postMessage&&!a.importScripts){var x=!0,k=a.onmessage;return a.onmessage=function(){x=!1},a.postMessage("","*"),a.onmessage=k,x}}()?(f="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",w,!1):a.attachEvent("onmessage",w),function(x){a.postMessage(f+x,"*")}):a.MessageChannel?((l=new MessageChannel).port1.onmessage=function(x){g(x.data)},function(x){l.port2.postMessage(x)}):p&&"onreadystatechange"in p.createElement("script")?(c=p.documentElement,function(x){var k=p.createElement("script");k.onreadystatechange=function(){g(x),k.onreadystatechange=null,c.removeChild(k),k=null},c.appendChild(k)}):function(x){setTimeout(g,0,x)},b.setImmediate=function(x){typeof x!="function"&&(x=new Function(""+x));for(var k=new Array(arguments.length-1),D=0;D<k.length;D++)k[D]=arguments[D+1];var E={callback:x,args:k};return d[h]=E,u(h),h++},b.clearImmediate=m}function m(x){delete d[x]}function g(x){if(y)setTimeout(g,0,x);else{var k=d[x];if(k){y=!0;try{(function(D){var E=D.callback,A=D.args;switch(A.length){case 0:E();break;case 1:E(A[0]);break;case 2:E(A[0],A[1]);break;case 3:E(A[0],A[1],A[2]);break;default:E.apply(s,A)}})(k)}finally{m(x),y=!1}}}}function w(x){x.source===a&&typeof x.data=="string"&&x.data.indexOf(f)===0&&g(+x.data.slice(f.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof kt<"u"?kt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(zc);var Xh=zc.exports;const Kc=Uc(Xh);var Wc={exports:{}};(function(e,t){(function(r,n){n()})(kt,function(){function r(c,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function n(c,l,f){var h=new XMLHttpRequest;h.open("GET",c),h.responseType="blob",h.onload=function(){u(h.response,l,f)},h.onerror=function(){console.error("could not download file")},h.send()}function i(c){var l=new XMLHttpRequest;l.open("HEAD",c,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function o(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(l)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof kt=="object"&&kt.global===kt?kt:void 0,s=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(c,l,f){var h=a.URL||a.webkitURL,d=document.createElement("a");l=l||c.name||"download",d.download=l,d.rel="noopener",typeof c=="string"?(d.href=c,d.origin===location.origin?o(d):i(d.href)?n(c,l,f):o(d,d.target="_blank")):(d.href=h.createObjectURL(c),setTimeout(function(){h.revokeObjectURL(d.href)},4e4),setTimeout(function(){o(d)},0))}:"msSaveOrOpenBlob"in navigator?function(c,l,f){if(l=l||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(r(c,f),l);else if(i(c))n(c,l,f);else{var h=document.createElement("a");h.href=c,h.target="_blank",setTimeout(function(){o(h)})}}:function(c,l,f,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof c=="string")return n(c,l,f);var d=c.type==="application/octet-stream",y=/constructor/i.test(a.HTMLElement)||a.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||d&&y||s)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var w=b.result;w=p?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=w:location=w,h=null},b.readAsDataURL(c)}else{var m=a.URL||a.webkitURL,g=m.createObjectURL(c);h?h.location=g:location.href=g,h=null,setTimeout(function(){m.revokeObjectURL(g)},4e4)}});a.saveAs=u.saveAs=u,e.exports=u})})(Wc);var Jh=Wc.exports;const Pr=[];function ed(e,t){return{subscribe:an(e,t).subscribe}}function an(e,t=ue){let r;const n=new Set;function i(s){if(mt(e,s)&&(e=s,r)){const u=!Pr.length;for(const c of n)c[1](),Pr.push(c,e);if(u){for(let c=0;c<Pr.length;c+=2)Pr[c][0](Pr[c+1]);Pr.length=0}}}function o(s){i(s(e))}function a(s,u=ue){const c=[s,u];return n.add(c),n.size===1&&(r=t(i,o)||ue),s(e),()=>{n.delete(c),n.size===0&&r&&(r(),r=null)}}return{set:i,update:o,subscribe:a}}function gr(e){"@babel/helpers - typeof";return gr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gr(e)}function td(e,t){if(gr(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(gr(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rd(e){var t=td(e,"string");return gr(t)==="symbol"?t:String(t)}function cu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rd(n.key),n)}}function sn(e,t,r){return t&&cu(e.prototype,t),r&&cu(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function nd(e){return e[e.length-1]}function us(e){return Array.isArray(e)?e.slice(0):[e]}function jr(e){return Array.isArray(e)}function id(e){return e!=null}function ko(e,t){var r=0,n=-1;for(var i of e){n=n+1;var o=t(i,n);if(o)r=r+1;else break}return r}function no(e,t){for(var r=t.length,n=0;n<r;++n){var i=t[n];e.push(i)}}function na(e){var t=e.split("-");if(t.length!==2)throw new Error("malformatted revision: "+e);return{height:parseInt(t[0],10),hash:t[1]}}function od(e){var t=parseInt(e.split("-")[0],10);return t}function ia(e,t){var r=t?t._rev:null,n=r?na(r).height:0,i=n+1;return i+"-"+e}var cs=1;function io(){return{lwt:cs}}function oo(){return""}function ad(e){return Object.assign({},e,{_meta:void 0,_deleted:void 0,_rev:void 0})}function sd(e,t,r){if(t.length!==r.length)return!1;for(var n=0,i=t.length;n<i;){var o=t[n],a=r[n];if(n++,o._rev!==a._rev||o[e]!==a[e])return!1}return!0}function ud(e){return(t,r)=>t._meta.lwt===r._meta.lwt?r[e]<t[e]?1:-1:t._meta.lwt-r._meta.lwt}function cd(e,t){return t.sort(ud(e))}class Qr{constructor(t,r){t=this.words=t||[],this.sigBytes=r!==void 0?r:t.length*4}toString(t){return(t||ld).stringify(this)}concat(t){if(this.clamp(),this.sigBytes%4)for(let r=0;r<t.sigBytes;r++){const n=t.words[r>>>2]>>>24-r%4*8&255;this.words[this.sigBytes+r>>>2]|=n<<24-(this.sigBytes+r)%4*8}else for(let r=0;r<t.sigBytes;r+=4)this.words[this.sigBytes+r>>>2]=t.words[r>>>2];return this.sigBytes+=t.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new Qr([...this.words])}}const ld={stringify(e){const t=[];for(let r=0;r<e.sigBytes;r++){const n=e.words[r>>>2]>>>24-r%4*8&255;t.push((n>>>4).toString(16),(n&15).toString(16))}return t.join("")}},fd={parse(e){const t=e.length,r=[];for(let n=0;n<t;n++)r[n>>>2]|=(e.charCodeAt(n)&255)<<24-n%4*8;return new Qr(r,t)}},hd={parse(e){return fd.parse(unescape(encodeURIComponent(e)))}};class dd{constructor(){this._minBufferSize=0,this.blockSize=512/32,this.reset()}reset(){this._data=new Qr,this._nDataBytes=0}_append(t){typeof t=="string"&&(t=hd.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes}_doProcessBlock(t,r){}_process(t){let r,n=this._data.sigBytes/(this.blockSize*4);t?n=Math.ceil(n):n=Math.max((n|0)-this._minBufferSize,0);const i=n*this.blockSize,o=Math.min(i*4,this._data.sigBytes);if(i){for(let a=0;a<i;a+=this.blockSize)this._doProcessBlock(this._data.words,a);r=this._data.words.splice(0,i),this._data.sigBytes-=o}return new Qr(r,o)}}class pd extends dd{update(t){return this._append(t),this._process(),this}finalize(t){t&&this._append(t)}}const md=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],yd=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],nr=[];class vd extends pd{constructor(){super(),this.reset()}reset(){super.reset(),this._hash=new Qr([...md])}_doProcessBlock(t,r){const n=this._hash.words;let i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],c=n[5],l=n[6],f=n[7];for(let h=0;h<64;h++){if(h<16)nr[h]=t[r+h]|0;else{const w=nr[h-15],x=(w<<25|w>>>7)^(w<<14|w>>>18)^w>>>3,k=nr[h-2],D=(k<<15|k>>>17)^(k<<13|k>>>19)^k>>>10;nr[h]=x+nr[h-7]+D+nr[h-16]}const d=u&c^~u&l,y=i&o^i&a^o&a,p=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),b=(u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25),m=f+b+d+yd[h]+nr[h],g=p+y;f=l,l=c,c=u,u=s+m|0,s=a,a=o,o=i,i=m+g|0}n[0]=n[0]+i|0,n[1]=n[1]+o|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+u|0,n[5]=n[5]+c|0,n[6]=n[6]+l|0,n[7]=n[7]+f|0}finalize(t){super.finalize(t);const r=this._nDataBytes*8,n=this._data.sigBytes*8;return this._data.words[n>>>5]|=128<<24-n%32,this._data.words[(n+64>>>9<<4)+14]=Math.floor(r/4294967296),this._data.words[(n+64>>>9<<4)+15]=r,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}}function gd(e){return new vd().finalize(e).toString()}function kn(e){return gd(e)}function bd(){return new Promise(e=>setTimeout(e,0))}function _d(e=0){return new Promise(t=>setTimeout(t,e))}Promise.resolve(!0);var qt=Promise.resolve(!1),wd=Promise.resolve(null),ht=Promise.resolve(),xo=ht;function kd(e=void 0){return xo=xo.then(()=>typeof requestIdleCallback=="function"?new Promise(t=>{requestIdleCallback(()=>t(),{timeout:e})}):_d(0)),xo}function xd(e,t){return e.reduce((r,n)=>r.then(n),Promise.resolve(t))}function ao(e=10){for(var t="",r="abcdefghijklmnopqrstuvwxyz",n=0;n<e;n++)t+=r.charAt(Math.floor(Math.random()*r.length));return t}function qc(e){e+="";var t=e.charAt(0).toUpperCase();return t+e.substr(1)}function Rn(e){for(;e.charAt(0)===".";)e=e.substr(1);for(;e.slice(-1)===".";)e=e.slice(0,-1);return e}function Hc(e){return!!(e.includes("/")||e.includes("\\"))}function Tn(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n;if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Tn(e[n],t[n]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();var i=Object.keys(e);if(r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[n]))return!1;for(n=r;n--!==0;){var o=i[n];if(!Tn(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}var Ed=e=>{var t=typeof e;return e!==null&&(t==="object"||t==="function")},Eo=new Set(["__proto__","prototype","constructor"]),Sd=new Set("0123456789");function Od(e){var t=[],r="",n="start",i=!1;for(var o of e)switch(o){case"\\":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");i&&(r+=o),n="property",i=!i;break}case".":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="property";break}if(i){i=!1,r+=o;break}if(Eo.has(r))return[];t.push(r),r="",n="property";break}case"[":{if(n==="index")throw new Error("Invalid character in an index");if(n==="indexEnd"){n="index";break}if(i){i=!1,r+=o;break}if(n==="property"){if(Eo.has(r))return[];t.push(r),r=""}n="index";break}case"]":{if(n==="index"){t.push(Number.parseInt(r,10)),r="",n="indexEnd";break}if(n==="indexEnd")throw new Error("Invalid character after an index")}default:{if(n==="index"&&!Sd.has(o))throw new Error("Invalid character in an index");if(n==="indexEnd")throw new Error("Invalid character after an index");n==="start"&&(n="property"),i&&(i=!1,r+="\\"),r+=o}}switch(i&&(r+="\\"),n){case"property":{if(Eo.has(r))return[];t.push(r);break}case"index":throw new Error("Index was not closed");case"start":{t.push("");break}}return t}function Cd(e,t){if(typeof t!="number"&&Array.isArray(e)){var r=Number.parseInt(t,10);return Number.isInteger(r)&&e[r]===e[t]}return!1}function Ht(e,t,r){if(Array.isArray(t)&&(t=t.join(".")),!Ed(e)||typeof t!="string")return r===void 0?e:r;var n=Od(t);if(n.length===0)return r;for(var i=0;i<n.length;i++){var o=n[i];if(Cd(e,o)?e=i===n.length-1?void 0:null:e=e[o],e==null){if(i!==n.length-1)return r;break}}return e===void 0?r:e}function Yc(e){return Object.freeze(e),Object.getOwnPropertyNames(e).forEach(function(t){e.hasOwnProperty(t)&&e[t]!==null&&(typeof e[t]=="object"||typeof e[t]=="function")&&!Object.isFrozen(e[t])&&Yc(e[t])}),e}function Dd(e){var t=e.split("."),r=t.length;return r===1?n=>n[e]:n=>{for(var i=n,o=0;o<r;++o){var a=t[o];if(i=i[a],typeof i>"u")return i}return i}}function lu(e,t){var r=e[t];if(!r)throw new Error("missing value from object "+t);return r}function oa(e){var t={};for(var r in e)if(e.hasOwnProperty(r))if(typeof e[r]=="object"){var n=oa(e[r]);for(var i in n)n.hasOwnProperty(i)&&(t[r+"."+i]=n[i])}else t[r]=e[r];return t}function Re(e){return Object.assign({},e)}function Pd(e){return Object.keys(e)[0]}function Bi(e,t=!1){if(!e)return e;if(!t&&Array.isArray(e))return e.sort((n,i)=>typeof n=="string"&&typeof i=="string"?n.localeCompare(i):typeof n=="object"?1:-1).map(n=>Bi(n,t));if(typeof e=="object"&&!Array.isArray(e)){if(e instanceof RegExp)return e;var r={};return Object.keys(e).sort((n,i)=>n.localeCompare(i)).forEach(n=>{r[n]=Bi(e[n],t)}),r}return e}function aa(e){if(!e||e===null||typeof e!="object")return e;if(Array.isArray(e)){for(var t=new Array(e.length),r=t.length;r--;)t[r]=aa(e[r]);return t}var n={};for(var i in e)n[i]=aa(e[i]);return n}var Ur=aa;function gi(e,t,r){return Object.defineProperty(e,t,{get:function(){return r}}),r}function Ad(e,t){return t instanceof RegExp?t.toString():t}function $n(e,t){var r=e.get(t);if(typeof r>"u")throw new Error("missing value from map "+t);return r}function br(e,t,r,n){var i=e.get(t);return typeof i>"u"?(i=r(),e.set(t,i)):n&&n(i),i}function ge(e){var t=e.split("-"),r="RxDB";return t.forEach(n=>{r+=qc(n)}),r+="Plugin",new Error(`You are using a function which must be overwritten by a plugin.
        You should either prevent the usage of this function or add the plugin via:
            import { `+r+" } from 'rxdb/plugins/"+e+`';
            addRxPlugin(`+r+`);
        `)}var So=0;function ze(){var e=new Date().getTime();e=e+.01,e<=So&&(e=So+.01);var t=parseFloat(e.toFixed(2));return So=t,t}function _e(e){if(!e)throw new Error("ensureNotFalsy() is falsy");return e}var Gc={bufferSize:1,refCount:!0},Id=/\./g,Rd=/(\/?)(.+)\1([a-z]*)/i;function Td(e){var t=_e(e.toString().match(Rd));return{pattern:t[2],flags:t[3]}}function Mn(e,t){return Mn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Mn(e,t)}function Qc(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Mn(e,t)}function sa(e){return sa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sa(e)}function $d(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Md(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function bi(e,t,r){return Md()?bi=Reflect.construct.bind():bi=function(i,o,a){var s=[null];s.push.apply(s,o);var u=Function.bind.apply(i,s),c=new u;return a&&Mn(c,a.prototype),c},bi.apply(null,arguments)}function Ni(e){var t=typeof Map=="function"?new Map:void 0;return Ni=function(n){if(n===null||!$d(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(n))return t.get(n);t.set(n,i)}function i(){return bi(n,arguments,sa(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Mn(i,n)},Ni(e)}var Ce={isDevMode(){return!1},deepFreezeWhenDevMode(e){return e},tunnelErrorMessage(e){return"RxDB Error-Code "+e+`.
        Error messages are not included in RxDB core to reduce build size.
        - To find out what this error means, either use the dev-mode-plugin https://rxdb.info/dev-mode.html
        - or search for the error code here: https://github.com/pubkey/rxdb/search?q=`+e+`
        `}};function Bd(e){var t="";return Object.keys(e).length===0||(t+=`Given parameters: {
`,t+=Object.keys(e).map(r=>{var n="[object Object]";try{r==="errors"?n=e[r].map(i=>JSON.stringify(i,Object.getOwnPropertyNames(i))):n=JSON.stringify(e[r],function(i,o){return o===void 0?null:o},2)}catch{}return r+":"+n}).join(`
`),t+="}"),t}function Vc(e,t,r){return"RxError ("+t+`):
`+e+`
`+Bd(r)}var Nd=function(e){Qc(t,e);function t(n,i,o={}){var a,s=Vc(i,n,o);return a=e.call(this,s)||this,a.code=n,a.message=s,a.parameters=o,a.rxdb=!0,a}var r=t.prototype;return r.toString=function(){return this.message},sn(t,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}]),t}(Ni(Error)),Fd=function(e){Qc(t,e);function t(n,i,o={}){var a,s=Vc(i,n,o);return a=e.call(this,s)||this,a.code=n,a.message=s,a.parameters=o,a.rxdb=!0,a}var r=t.prototype;return r.toString=function(){return this.message},sn(t,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}]),t}(Ni(TypeError));function W(e,t){return new Nd(e,Ce.tunnelErrorMessage(e),t)}function et(e,t){return new Fd(e,Ce.tunnelErrorMessage(e),t)}function Ld(e){return e&&e.status===409?e:!1}var jd={409:"document write conflict",422:"schema validation error",510:"attachment data missing"};function Ud(e){return W("COL20",{name:jd[e.status],document:e.documentId,writeError:e})}var Bn={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],postDestroyRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preMigrateDocument:[],postMigrateDocument:[],preDestroyRxDatabase:[],postRemoveRxDatabase:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};function at(e,t){Bn[e]&&Bn[e].forEach(r=>r(t))}function Yn(e,t){return Promise.all(Bn[e].map(r=>r(t)))}function De(e){return typeof e=="function"}function zd(e){return De(e==null?void 0:e.lift)}function Ft(e){return function(t){if(zd(t))return t.lift(function(r){try{return e(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}var ua=function(e,t){return ua=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},ua(e,t)};function Or(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ua(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function Kd(e,t,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(l){try{c(n.next(l))}catch(f){a(f)}}function u(l){try{c(n.throw(l))}catch(f){a(f)}}function c(l){l.done?o(l.value):i(l.value).then(s,u)}c((n=n.apply(e,t||[])).next())})}function Zc(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(r=0)),r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Vr(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function _r(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o}function wr(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}function zr(e){return this instanceof zr?(this.v=e,this):new zr(e)}function Wd(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(h){n[h]&&(i[h]=function(d){return new Promise(function(y,p){o.push([h,d,y,p])>1||s(h,d)})})}function s(h,d){try{u(n[h](d))}catch(y){f(o[0][3],y)}}function u(h){h.value instanceof zr?Promise.resolve(h.value.v).then(c,l):f(o[0][2],h)}function c(h){s("next",h)}function l(h){s("throw",h)}function f(h,d){h(d),o.shift(),o.length&&s(o[0][0],o[0][1])}}function qd(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Vr=="function"?Vr(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=e[o]&&function(a){return new Promise(function(s,u){a=e[o](a),i(s,u,a.done,a.value)})}}function i(o,a,s,u){Promise.resolve(u).then(function(c){o({value:c,done:s})},a)}}var Xc=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function Jc(e){return De(e==null?void 0:e.then)}function ls(e){var t=function(n){Error.call(n),n.stack=new Error().stack},r=e(t);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var Oo=ls(function(e){return function(r){e(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function ca(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var so=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,r,n,i,o;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var s=Vr(a),u=s.next();!u.done;u=s.next()){var c=u.value;c.remove(this)}}catch(p){t={error:p}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}else a.remove(this);var l=this.initialTeardown;if(De(l))try{l()}catch(p){o=p instanceof Oo?p.errors:[p]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var h=Vr(f),d=h.next();!d.done;d=h.next()){var y=d.value;try{fu(y)}catch(p){o=o??[],p instanceof Oo?o=wr(wr([],_r(o)),_r(p.errors)):o.push(p)}}}catch(p){n={error:p}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}}if(o)throw new Oo(o)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)fu(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(t)}},e.prototype._hasParent=function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)},e.prototype._addParent=function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t},e.prototype._removeParent=function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&ca(r,t)},e.prototype.remove=function(t){var r=this._finalizers;r&&ca(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),el=so.EMPTY;function tl(e){return e instanceof so||e&&"closed"in e&&De(e.remove)&&De(e.add)&&De(e.unsubscribe)}function fu(e){De(e)?e():e.unsubscribe()}var rl={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},la={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=la.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,wr([e,t],_r(r))):setTimeout.apply(void 0,wr([e,t],_r(r)))},clearTimeout:function(e){var t=la.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function nl(e){la.setTimeout(function(){throw e})}function hu(){}function _i(e){e()}var fs=function(e){Or(t,e);function t(r){var n=e.call(this)||this;return n.isStopped=!1,r?(n.destination=r,tl(r)&&r.add(n)):n.destination=Qd,n}return t.create=function(r,n,i){return new Zr(r,n,i)},t.prototype.next=function(r){this.isStopped||this._next(r)},t.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(r){this.destination.next(r)},t.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(so),Hd=Function.prototype.bind;function Co(e,t){return Hd.call(e,t)}var Yd=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var r=this.partialObserver;if(r.next)try{r.next(t)}catch(n){ui(n)}},e.prototype.error=function(t){var r=this.partialObserver;if(r.error)try{r.error(t)}catch(n){ui(n)}else ui(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(r){ui(r)}},e}(),Zr=function(e){Or(t,e);function t(r,n,i){var o=e.call(this)||this,a;if(De(r)||!r)a={next:r??void 0,error:n??void 0,complete:i??void 0};else{var s;o&&rl.useDeprecatedNextContext?(s=Object.create(r),s.unsubscribe=function(){return o.unsubscribe()},a={next:r.next&&Co(r.next,s),error:r.error&&Co(r.error,s),complete:r.complete&&Co(r.complete,s)}):a=r}return o.destination=new Yd(a),o}return t}(fs);function ui(e){nl(e)}function Gd(e){throw e}var Qd={closed:!0,next:hu,error:Gd,complete:hu},hs=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function ds(e){return e}function Vd(e){return e.length===0?ds:e.length===1?e[0]:function(r){return e.reduce(function(n,i){return i(n)},r)}}var tt=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(t,r,n){var i=this,o=Xd(t)?t:new Zr(t,r,n);return _i(function(){var a=i,s=a.operator,u=a.source;o.add(s?s.call(o,u):u?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.error(r)}},e.prototype.forEach=function(t,r){var n=this;return r=du(r),new r(function(i,o){var a=new Zr({next:function(s){try{t(s)}catch(u){o(u),a.unsubscribe()}},error:o,complete:i});n.subscribe(a)})},e.prototype._subscribe=function(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)},e.prototype[hs]=function(){return this},e.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Vd(t)(this)},e.prototype.toPromise=function(t){var r=this;return t=du(t),new t(function(n,i){var o;r.subscribe(function(a){return o=a},function(a){return i(a)},function(){return n(o)})})},e.create=function(t){return new e(t)},e}();function du(e){var t;return(t=e??rl.Promise)!==null&&t!==void 0?t:Promise}function Zd(e){return e&&De(e.next)&&De(e.error)&&De(e.complete)}function Xd(e){return e&&e instanceof fs||Zd(e)&&tl(e)}function il(e){return De(e[hs])}function ol(e){return Symbol.asyncIterator&&De(e==null?void 0:e[Symbol.asyncIterator])}function al(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Jd(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var sl=Jd();function ul(e){return De(e==null?void 0:e[sl])}function cl(e){return Wd(this,arguments,function(){var r,n,i,o;return Zc(this,function(a){switch(a.label){case 0:r=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,zr(r.read())];case 3:return n=a.sent(),i=n.value,o=n.done,o?[4,zr(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,zr(i)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function ll(e){return De(e==null?void 0:e.getReader)}function rr(e){if(e instanceof tt)return e;if(e!=null){if(il(e))return ep(e);if(Xc(e))return tp(e);if(Jc(e))return rp(e);if(ol(e))return fl(e);if(ul(e))return np(e);if(ll(e))return ip(e)}throw al(e)}function ep(e){return new tt(function(t){var r=e[hs]();if(De(r.subscribe))return r.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function tp(e){return new tt(function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()})}function rp(e){return new tt(function(t){e.then(function(r){t.closed||(t.next(r),t.complete())},function(r){return t.error(r)}).then(null,nl)})}function np(e){return new tt(function(t){var r,n;try{for(var i=Vr(e),o=i.next();!o.done;o=i.next()){var a=o.value;if(t.next(a),t.closed)return}}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}t.complete()})}function fl(e){return new tt(function(t){op(e,t).catch(function(r){return t.error(r)})})}function ip(e){return fl(cl(e))}function op(e,t){var r,n,i,o;return Kd(this,void 0,void 0,function(){var a,s;return Zc(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),r=qd(e),u.label=1;case 1:return[4,r.next()];case 2:if(n=u.sent(),!!n.done)return[3,4];if(a=n.value,t.next(a),t.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=u.sent(),i={error:s},[3,11];case 6:return u.trys.push([6,,9,10]),n&&!n.done&&(o=r.return)?[4,o.call(r)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function Xr(e,t,r,n,i){return new ap(e,t,r,n,i)}var ap=function(e){Or(t,e);function t(r,n,i,o,a,s){var u=e.call(this,r)||this;return u.onFinalize=a,u.shouldUnsubscribe=s,u._next=n?function(c){try{n(c)}catch(l){r.error(l)}}:e.prototype._next,u._error=o?function(c){try{o(c)}catch(l){r.error(l)}finally{this.unsubscribe()}}:e.prototype._error,u._complete=i?function(){try{i()}catch(c){r.error(c)}finally{this.unsubscribe()}}:e.prototype._complete,u}return t.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},t}(fs),hl={now:function(){return(hl.delegate||Date).now()},delegate:void 0};function sp(e){return e&&De(e.schedule)}function dl(e){return e[e.length-1]}function uo(e){return sp(dl(e))?e.pop():void 0}function pl(e,t){return typeof dl(e)=="number"?e.pop():t}function Vt(e,t,r,n,i){n===void 0&&(n=0),i===void 0&&(i=!1);var o=t.schedule(function(){r(),i?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(o),!i)return o}function ml(e,t){return t===void 0&&(t=0),Ft(function(r,n){r.subscribe(Xr(n,function(i){return Vt(n,e,function(){return n.next(i)},t)},function(){return Vt(n,e,function(){return n.complete()},t)},function(i){return Vt(n,e,function(){return n.error(i)},t)}))})}function yl(e,t){return t===void 0&&(t=0),Ft(function(r,n){n.add(e.schedule(function(){return r.subscribe(n)},t))})}function up(e,t){return rr(e).pipe(yl(t),ml(t))}function cp(e,t){return rr(e).pipe(yl(t),ml(t))}function lp(e,t){return new tt(function(r){var n=0;return t.schedule(function(){n===e.length?r.complete():(r.next(e[n++]),r.closed||this.schedule())})})}function fp(e,t){return new tt(function(r){var n;return Vt(r,t,function(){n=e[sl](),Vt(r,t,function(){var i,o,a;try{i=n.next(),o=i.value,a=i.done}catch(s){r.error(s);return}a?r.complete():r.next(o)},0,!0)}),function(){return De(n==null?void 0:n.return)&&n.return()}})}function vl(e,t){if(!e)throw new Error("Iterable cannot be null");return new tt(function(r){Vt(r,t,function(){var n=e[Symbol.asyncIterator]();Vt(r,t,function(){n.next().then(function(i){i.done?r.complete():r.next(i.value)})},0,!0)})})}function hp(e,t){return vl(cl(e),t)}function dp(e,t){if(e!=null){if(il(e))return up(e,t);if(Xc(e))return lp(e,t);if(Jc(e))return cp(e,t);if(ol(e))return vl(e,t);if(ul(e))return fp(e,t);if(ll(e))return hp(e,t)}throw al(e)}function ps(e,t){return t?dp(e,t):rr(e)}function Yt(e,t){return Ft(function(r,n){var i=0;r.subscribe(Xr(n,function(o){n.next(e.call(t,o,i++))}))})}function pp(e,t,r,n,i,o,a,s){var u=[],c=0,l=0,f=!1,h=function(){f&&!u.length&&!c&&t.complete()},d=function(p){return c<n?y(p):u.push(p)},y=function(p){o&&t.next(p),c++;var b=!1;rr(r(p,l++)).subscribe(Xr(t,function(m){i==null||i(m),o?d(m):t.next(m)},function(){b=!0},void 0,function(){if(b)try{c--;for(var m=function(){var g=u.shift();a?Vt(t,a,function(){return y(g)}):y(g)};u.length&&c<n;)m();h()}catch(g){t.error(g)}}))};return e.subscribe(Xr(t,d,function(){f=!0,h()})),function(){s==null||s()}}function Gn(e,t,r){return r===void 0&&(r=1/0),De(t)?Gn(function(n,i){return Yt(function(o,a){return t(n,o,i,a)})(rr(e(n,i)))},r):(typeof t=="number"&&(r=t),Ft(function(n,i){return pp(n,i,e,r)}))}var mp=Array.isArray;function yp(e){return e.length===1&&mp(e[0])?e[0]:e}function ms(e){return e===void 0&&(e=1/0),Gn(ds,e)}function vp(){return ms(1)}var gp=ls(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Zt=function(e){Or(t,e);function t(){var r=e.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return t.prototype.lift=function(r){var n=new pu(this,this);return n.operator=r,n},t.prototype._throwIfClosed=function(){if(this.closed)throw new gp},t.prototype.next=function(r){var n=this;_i(function(){var i,o;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var a=Vr(n.currentObservers),s=a.next();!s.done;s=a.next()){var u=s.value;u.next(r)}}catch(c){i={error:c}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}}})},t.prototype.error=function(r){var n=this;_i(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var i=n.observers;i.length;)i.shift().error(r)}})},t.prototype.complete=function(){var r=this;_i(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(r){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,r)},t.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},t.prototype._innerSubscribe=function(r){var n=this,i=this,o=i.hasError,a=i.isStopped,s=i.observers;return o||a?el:(this.currentObservers=null,s.push(r),new so(function(){n.currentObservers=null,ca(s,r)}))},t.prototype._checkFinalizedStatuses=function(r){var n=this,i=n.hasError,o=n.thrownError,a=n.isStopped;i?r.error(o):a&&r.complete()},t.prototype.asObservable=function(){var r=new tt;return r.source=this,r},t.create=function(r,n){return new pu(r,n)},t}(tt),pu=function(e){Or(t,e);function t(r,n){var i=e.call(this)||this;return i.destination=r,i.source=n,i}return t.prototype.next=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,r)},t.prototype.error=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,r)},t.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},t.prototype._subscribe=function(r){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&i!==void 0?i:el},t}(Zt);function mu(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return vp()(ps(e,uo(e)))}var bp=new tt(function(e){return e.complete()});function fa(e,t){return t===void 0&&(t=ds),e=e??_p,Ft(function(r,n){var i,o=!0;r.subscribe(Xr(n,function(a){var s=t(a);(o||!e(i,s))&&(o=!1,i=s,n.next(a))}))})}function _p(e,t){return e===t}function it(e,t){return Ft(function(r,n){var i=0;r.subscribe(Xr(n,function(o){return e.call(t,o,i++)&&n.next(o)}))})}var wp=ls(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});function kp(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=uo(e),n=pl(e,1/0);return e=yp(e),Ft(function(i,o){ms(n)(ps(wr([i],_r(e)),r)).subscribe(o)})}function xp(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return kp.apply(void 0,wr([],_r(e)))}var Ep=function(e){Or(t,e);function t(r){var n=e.call(this)||this;return n._value=r,n}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(r){var n=e.prototype._subscribe.call(this,r);return!n.closed&&r.next(this._value),n},t.prototype.getValue=function(){var r=this,n=r.hasError,i=r.thrownError,o=r._value;if(n)throw i;return this._throwIfClosed(),o},t.prototype.next=function(r){e.prototype.next.call(this,this._value=r)},t}(Zt),Sp=function(e){Or(t,e);function t(r,n,i){r===void 0&&(r=1/0),n===void 0&&(n=1/0),i===void 0&&(i=hl);var o=e.call(this)||this;return o._bufferSize=r,o._windowTime=n,o._timestampProvider=i,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=n===1/0,o._bufferSize=Math.max(1,r),o._windowTime=Math.max(1,n),o}return t.prototype.next=function(r){var n=this,i=n.isStopped,o=n._buffer,a=n._infiniteTimeWindow,s=n._timestampProvider,u=n._windowTime;i||(o.push(r),!a&&o.push(s.now()+u)),this._trimBuffer(),e.prototype.next.call(this,r)},t.prototype._subscribe=function(r){this._throwIfClosed(),this._trimBuffer();for(var n=this._innerSubscribe(r),i=this,o=i._infiniteTimeWindow,a=i._buffer,s=a.slice(),u=0;u<s.length&&!r.closed;u+=o?1:2)r.next(s[u]);return this._checkFinalizedStatuses(r),n},t.prototype._trimBuffer=function(){var r=this,n=r._bufferSize,i=r._timestampProvider,o=r._buffer,a=r._infiniteTimeWindow,s=(a?1:2)*n;if(n<1/0&&s<o.length&&o.splice(0,o.length-s),!a){for(var u=i.now(),c=0,l=1;l<o.length&&o[l]<=u;l+=2)c=l;c&&o.splice(0,c+1)}},t}(Zt);function Op(e){e===void 0&&(e={});var t=e.connector,r=t===void 0?function(){return new Zt}:t,n=e.resetOnError,i=n===void 0?!0:n,o=e.resetOnComplete,a=o===void 0?!0:o,s=e.resetOnRefCountZero,u=s===void 0?!0:s;return function(c){var l,f,h,d=0,y=!1,p=!1,b=function(){f==null||f.unsubscribe(),f=void 0},m=function(){b(),l=h=void 0,y=p=!1},g=function(){var w=l;m(),w==null||w.unsubscribe()};return Ft(function(w,x){d++,!p&&!y&&b();var k=h=h??r();x.add(function(){d--,d===0&&!p&&!y&&(f=Do(g,u))}),k.subscribe(x),!l&&d>0&&(l=new Zr({next:function(D){return k.next(D)},error:function(D){p=!0,b(),f=Do(m,i,D),k.error(D)},complete:function(){y=!0,b(),f=Do(m,a),k.complete()}}),rr(w).subscribe(l))})(c)}}function Do(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(t===!0){e();return}if(t!==!1){var i=new Zr({next:function(){i.unsubscribe(),e()}});return rr(t.apply(void 0,wr([],_r(r)))).subscribe(i)}}function gl(e,t,r){var n,i,o,a,s=!1;return e&&typeof e=="object"?(n=e.bufferSize,a=n===void 0?1/0:n,i=e.windowTime,t=i===void 0?1/0:i,o=e.refCount,s=o===void 0?!1:o,r=e.scheduler):a=e??1/0,Op({connector:function(){return new Sp(a,t,r)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function bl(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=uo(e);return Ft(function(n,i){(r?mu(e,n,r):mu(e,n)).subscribe(i)})}function _l(e){return e.documentData?e.documentData:e.previousDocumentData}function Cp(e){switch(e.operation){case"INSERT":return{operation:e.operation,id:e.documentId,doc:e.documentData,previous:null};case"UPDATE":return{operation:e.operation,id:e.documentId,doc:Ce.deepFreezeWhenDevMode(e.documentData),previous:e.previousDocumentData?e.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:e.operation,id:e.documentId,doc:null,previous:e.previousDocumentData}}}function Xt(e,t){var r=t;r=r.replace(Id,".properties."),r="properties."+r,r=Rn(r);var n=Ht(e,r);return n}function wl(e,t,r){if(typeof t.primaryKey=="string")return r;var n=ys(t,r),i=r[e];if(i&&i!==n)throw W("DOC19",{args:{documentData:r,existingPrimary:i,newPrimary:n},schema:t});return r[e]=n,r}function ut(e){return typeof e=="string"?e:e.key}function ys(e,t){if(typeof e.primaryKey=="string")return t[e.primaryKey];var r=e.primaryKey;return r.fields.map(n=>{var i=Ht(t,n);if(typeof i>"u")throw W("DOC18",{args:{field:n,documentData:t}});return i}).join(r.separator)}function Dp(e){var t=Bi(e,!0);return t}function kl(e){e=Re(e);var t=ut(e.primaryKey);e.properties=Re(e.properties),e.additionalProperties=!1,e.hasOwnProperty("keyCompression")||(e.keyCompression=!1),e.indexes=e.indexes?e.indexes.slice(0):[],e.required=e.required?e.required.slice(0):[],e.encrypted=e.encrypted?e.encrypted.slice(0):[],e.properties._rev={type:"string",minLength:1},e.properties._attachments={type:"object"},e.properties._deleted={type:"boolean"},e.properties._meta=Pp,e.required=e.required?e.required.slice(0):[],e.required.push("_deleted"),e.required.push("_rev"),e.required.push("_meta"),e.required.push("_attachments");var r=xl(e);return no(e.required,r),e.required=e.required.filter(n=>!n.includes(".")).filter((n,i,o)=>o.indexOf(n)===i),e.version=e.version||0,e.indexes&&(e.indexes=e.indexes.map(n=>{var i=jr(n)?n.slice(0):[n];if(!i.includes(t)){var o=i.slice(0);return o.push(t),o}return i})),e}var Pp={type:"object",properties:{lwt:{type:"number",minimum:cs,maximum:1e15,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function xl(e){var t=Object.keys(e.properties).filter(n=>e.properties[n].final),r=ut(e.primaryKey);return t.push(r),typeof e.primaryKey!="string"&&e.primaryKey.fields.forEach(n=>t.push(n)),t}function Ap(e,t){for(var r=Object.keys(e.defaultValues),n=0;n<r.length;++n){var i=r[n];(!t.hasOwnProperty(i)||typeof t[i]>"u")&&(t[i]=e.defaultValues[i])}return t}var Ip={type:"object",properties:{id:{type:"string"},lwt:{type:"number"}},required:["id","lwt"],additionalProperties:!1},Rp="_rxdb_internal";async function Tp(e,t){var r=await e.findDocumentsById([t],!1),n=r[t];return n||null}function $p(e,t,r){var n=t.documentData,i=t.previousDocumentData,o={eventId:t.eventId,documentId:t.documentId,collectionName:r?r.name:void 0,startTime:t.startTime,endTime:t.endTime,isLocal:e,operation:t.operation,documentData:Ce.deepFreezeWhenDevMode(n),previousDocumentData:Ce.deepFreezeWhenDevMode(i)};return o}function ha(e,t,r,n){if(n)throw n.status===409?W("CONFLICT",{collection:e.name,id:t,writeError:n,data:r}):n.status===422?W("VD2",{collection:e.name,id:t,writeError:n,data:r}):n}function Mp(e,t,r,n,i){for(var o=!!e.schema.attachments,a=[],s=[],u={},c=[],l=ao(10),f={id:l,events:[],checkpoint:null,context:i},h=[],d=[],y=[],p=ze(),b=typeof r.get=="function",m=b?r.size>0:Object.keys(r).length>0,g,w=n.length,x=function(){var E=n[k],A=E.document[t],P=!1;m&&(P=b?r.get(A):r[A]);var N;if(P){var C=P._rev;if(!E.previous||E.previous&&C!==E.previous._rev){var $={isError:!0,status:409,documentId:A,writeRow:E,documentInDb:P};return u[A]=$,"continue"}var _=o?yu(E):E;o&&(E.document._deleted?E.previous&&Object.keys(E.previous._attachments).forEach(j=>{d.push({documentId:A,attachmentId:j,digest:_e(E.previous)._attachments[j].digest})}):(Object.entries(E.document._attachments).find(([j,ee])=>{var B=E.previous?E.previous._attachments[j]:void 0;return!B&&!ee.data&&(N={documentId:A,documentInDb:P,isError:!0,status:510,writeRow:E,attachmentId:j}),!0}),N||Object.entries(E.document._attachments).forEach(([j,ee])=>{var B=E.previous?E.previous._attachments[j]:void 0;if(!B)h.push({documentId:A,attachmentId:j,attachmentData:ee,digest:kn(ee.data)});else{var T=_.document._attachments[j].digest;ee.data&&B.digest!==T&&y.push({documentId:A,attachmentId:j,attachmentData:ee,digest:kn(ee.data)})}}))),N?u[A]=N:(s.push(_),(!g||g.document._meta.lwt<_.document._meta.lwt)&&(g=_));var M=E.document,V=null,L=null,te=null;if(E.previous&&E.previous._deleted&&!M._deleted)te="INSERT",V=o?bn(M):M;else if(E.previous&&!E.previous._deleted&&!M._deleted)te="UPDATE",V=o?bn(M):M,L=E.previous;else if(M._deleted)te="DELETE",V=_e(E.document),L=E.previous;else throw W("SNH",{args:{writeRow:E}});c.push(A),f.events.push({eventId:vu(l,k,A,E),documentId:A,documentData:V,previousDocumentData:L,operation:te,startTime:p,endTime:ze()})}else{var Y=!!E.document._deleted;o&&Object.entries(E.document._attachments).forEach(([j,ee])=>{ee.data?h.push({documentId:A,attachmentId:j,attachmentData:ee,digest:kn(ee.data)}):(N={documentId:A,isError:!0,status:510,writeRow:E,attachmentId:j},u[A]=N)}),N||(o?a.push(yu(E)):a.push(E),(!g||g.document._meta.lwt<E.document._meta.lwt)&&(g=E)),Y||(c.push(A),f.events.push({eventId:vu(l,k,A,E),documentId:A,operation:"INSERT",documentData:o?bn(E.document):E.document,previousDocumentData:o&&E.previous?bn(E.previous):E.previous,startTime:p,endTime:ze()}))}},k=0;k<w;k++)var D=x();return{bulkInsertDocs:a,bulkUpdateDocs:s,newestRow:g,errors:u,changedDocumentIds:c,eventBulk:f,attachmentsAdd:h,attachmentsRemove:d,attachmentsUpdate:y}}function yu(e){return{previous:e.previous,document:bn(e.document)}}function Bp(e){return atob(e).length}function Np(e){var t=e.data;if(!t)return e;var r={digest:kn(t),length:Bp(t),type:e.type};return r}function bn(e){var t=Re(e);return t._attachments={},Object.entries(e._attachments).forEach(([r,n])=>{t._attachments[r]=Np(n)}),t}function El(e){var t=Re(e);return t._meta=Re(e._meta),t}function vu(e,t,r,n){return e+"|"+t+"|"+r+"|"+n.document._rev}function Sl(e,t,r){Ce.deepFreezeWhenDevMode(r);var n=ut(r.primaryKey);function i(a){var s=Re(a.document);return s._meta=Re(s._meta),Ce.isDevMode()&&(s=wl(n,r,s),a.previous,a.previous&&Object.keys(a.previous._meta).forEach(u=>{if(!a.document._meta.hasOwnProperty(u))throw W("SNH",{dataBefore:a.previous,dataAfter:a.document})})),s._meta.lwt=ze(),s._rev=ia(e.token,a.previous),{document:s,previous:a.previous}}var o={originalStorageInstance:t,schema:t.schema,internals:t.internals,collectionName:t.collectionName,databaseName:t.databaseName,options:t.options,bulkWrite(a,s){var u=a.map(c=>i(c));return e.lockedRun(()=>t.bulkWrite(u,s)).then(c=>{var l=Object.values(c.error).filter(d=>!!(d.status===409&&!d.writeRow.previous&&!d.writeRow.document._deleted&&_e(d.documentInDb)._deleted));if(l.length>0){var f={error:Re(c.error),success:Re(c.success)},h=l.map(d=>(delete f.error[d.documentId],{previous:d.documentInDb,document:Object.assign({},d.writeRow.document,{_rev:ia(e.token,d.documentInDb)})}));return e.lockedRun(()=>t.bulkWrite(h,s)).then(d=>(f.error=Object.assign(f.error,d.error),f.success=Object.assign(f.success,d.success),f))}return c})},query(a){return e.lockedRun(()=>t.query(a))},count(a){return e.lockedRun(()=>t.count(a))},findDocumentsById(a,s){return e.lockedRun(()=>t.findDocumentsById(a,s))},getAttachmentData(a,s,u){return e.lockedRun(()=>t.getAttachmentData(a,s,u))},getChangedDocumentsSince(a,s){return e.lockedRun(()=>t.getChangedDocumentsSince(_e(a),s))},cleanup(a){return e.lockedRun(()=>t.cleanup(a))},remove(){return e.storageInstances.delete(o),e.lockedRun(()=>t.remove())},close(){return e.storageInstances.delete(o),e.lockedRun(()=>t.close())},changeStream(){return t.changeStream()},conflictResultionTasks(){return t.conflictResultionTasks()},resolveConflictResultionTask(a){if(a.output.isEqual)return t.resolveConflictResultionTask(a);var s=Object.assign({},a.output.documentData,{_meta:io(),_rev:oo(),_attachments:{}}),u=Re(s);return delete u._meta,delete u._rev,delete u._attachments,t.resolveConflictResultionTask({id:a.id,output:{isEqual:!1,documentData:u}})}};return e.storageInstances.add(o),o}function Fp(e){if(e.schema.keyCompression)throw W("UT5",{args:{params:e}});if(Lp(e.schema))throw W("UT6",{args:{params:e}});if(e.schema.attachments&&e.schema.attachments.compression)throw W("UT7",{args:{params:e}})}function Lp(e){return!!(e.encrypted&&e.encrypted.length>0||e.attachments&&e.attachments.encrypted)}var jp=function(){function e(r,n,i,o){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=r,this.primaryPath=n,this.preWrite=i,this.postWrite=o}var t=e.prototype;return t.addWrite=function(n,i){var o=n[this.primaryPath],a=br(this.queueByDocId,o,()=>[]),s=new Promise((u,c)=>{var l={lastKnownDocumentState:n,modifier:i,resolve:u,reject:c};_e(a).push(l),this.triggerRun()});return s},t.triggerRun=async function(){if(!(this.isRunning===!0||this.queueByDocId.size===0)){this.isRunning=!0;var n=[],i=this.queueByDocId;this.queueByDocId=new Map,await Promise.all(Array.from(i.entries()).map(async([a,s])=>{var u=Up(s.map(f=>f.lastKnownDocumentState)),c=u;for(var l of s)try{c=await l.modifier(Ur(c))}catch(f){l.reject(f),l.reject=()=>{},l.resolve=()=>{}}try{await this.preWrite(c,u)}catch(f){s.forEach(h=>h.reject(f));return}n.push({previous:u,document:c})}));var o=n.length>0?await this.storageInstance.bulkWrite(n,"incremental-write"):{error:{},success:{}};return await Promise.all(Array.from(Object.entries(o.success)).map(([a,s])=>{this.postWrite(s);var u=$n(i,a);u.forEach(c=>c.resolve(s))})),Array.from(Object.entries(o.error)).forEach(([a,s])=>{var u=$n(i,a),c=Ld(s);if(c){var l=br(this.queueByDocId,a,()=>[]);u.reverse().forEach(h=>{h.lastKnownDocumentState=_e(c.documentInDb),_e(l).unshift(h)})}else{var f=Ud(s);u.forEach(h=>h.reject(f))}}),this.isRunning=!1,this.triggerRun()}},e}();function gu(e){var t=async r=>{var n=ad(r);n._deleted=r._deleted;var i=await e(n),o=Object.assign({},i,{_meta:r._meta,_attachments:r._attachments,_rev:r._rev,_deleted:typeof i._deleted<"u"?i._deleted:r._deleted});return typeof o._deleted>"u"&&(o._deleted=!1),o};return t}function Up(e){var t=e[0],r=na(t._rev).height;return e.forEach(n=>{var i=na(n._rev).height;i>r&&(t=n,r=i)}),t}var Qn={get primaryPath(){var e=this;if(e.isInstanceOfRxDocument)return e.collection.schema.primaryPath},get primary(){var e=this;if(e.isInstanceOfRxDocument)return e._data[e.primaryPath]},get revision(){var e=this;if(e.isInstanceOfRxDocument)return e._data._rev},get deleted$(){var e=this;if(e.isInstanceOfRxDocument)return e.$.pipe(Yt(t=>t._deleted))},get deleted(){var e=this;if(e.isInstanceOfRxDocument)return e._data._deleted},getLatest(){var e=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(e)},get $(){var e=this;return e.collection.$.pipe(it(t=>!t.isLocal),it(t=>t.documentId===this.primary),Yt(t=>_l(t)),bl(e.collection._docCache.getLatestDocumentData(this.primary)),fa((t,r)=>t._rev===r._rev),Yt(t=>this.collection._docCache.getCachedRxDocument(t)),gl(Gc))},get$(e){if(Ce.isDevMode()){if(e.includes(".item."))throw W("DOC1",{path:e});if(e===this.primaryPath)throw W("DOC2");if(this.collection.schema.finalFields.includes(e))throw W("DOC3",{path:e});var t=Xt(this.collection.schema.jsonSchema,e);if(!t)throw W("DOC4",{path:e})}return this.$.pipe(Yt(r=>Ht(r,e)),fa())},populate(e){var t=Xt(this.collection.schema.jsonSchema,e),r=this.get(e);if(!r)return wd;if(!t)throw W("DOC5",{path:e});if(!t.ref)throw W("DOC6",{path:e,schemaObj:t});var n=this.collection.database.collections[t.ref];if(!n)throw W("DOC7",{ref:t.ref,path:e,schemaObj:t});return t.type==="array"?n.findByIds(r).exec().then(i=>{var o=i.values();return Array.from(o)}):n.findOne(r).exec()},get(e){if(this._data){var t=this._propertyCache.get(e);if(t)return t;var r=Ht(this._data,e);return typeof r!="object"||Array.isArray(r)?Ce.deepFreezeWhenDevMode(r):(r=Ur(r),Cl(this.collection.schema,r,e,this),this._propertyCache.set(e,r),r)}},toJSON(e=!1){if(e)return Ce.deepFreezeWhenDevMode(this._data);var t=Re(this._data);return delete t._rev,delete t._attachments,delete t._deleted,delete t._meta,Ce.deepFreezeWhenDevMode(t)},toMutableJSON(e=!1){return Ur(this.toJSON(e))},update(e){throw ge("update")},incrementalUpdate(e){throw ge("update")},updateCRDT(e){throw ge("crdt")},putAttachment(){throw ge("attachments")},getAttachment(){throw ge("attachments")},allAttachments(){throw ge("attachments")},get allAttachments$(){throw ge("attachments")},async modify(e,t){var r=this._data,n=await gu(e)(r);return this._saveData(n,r)},incrementalModify(e,t){return this.collection.incrementalWriteQueue.addWrite(this._data,gu(e)).then(r=>this.collection._docCache.getCachedRxDocument(r))},patch(e){var t=this._data,r=Ur(t);return Object.entries(e).forEach(([n,i])=>{r[n]=i}),this._saveData(r,t)},incrementalPatch(e){return this.incrementalModify(t=>(Object.entries(e).forEach(([r,n])=>{t[r]=n}),t))},async _saveData(e,t){if(e=Re(e),this._data._deleted)throw W("DOC11",{id:this.primary,document:this});await Dl(this.collection,e,t);var r=await this.collection.storageInstance.bulkWrite([{previous:t,document:e}],"rx-document-save-data"),n=r.error[this.primary];return ha(this.collection,this.primary,e,n),await this.collection._runHooks("post","save",e,this),this.collection._docCache.getCachedRxDocument(lu(r.success,this.primary))},remove(){var e=this.collection;if(this.deleted)return Promise.reject(W("DOC13",{document:this,id:this.primary}));var t=Re(this._data),r;return e._runHooks("pre","remove",t,this).then(async()=>{t._deleted=!0;var n=await e.storageInstance.bulkWrite([{previous:this._data,document:t}],"rx-document-remove"),i=n.error[this.primary];return ha(e,this.primary,t,i),lu(n.success,this.primary)}).then(n=>(r=n,this.collection._runHooks("post","remove",t,this))).then(()=>this.collection._docCache.getCachedRxDocument(r))},incrementalRemove(){return this.incrementalModify(async e=>(await this.collection._runHooks("pre","remove",e,this),e._deleted=!0,e)).then(async e=>(await this.collection._runHooks("post","remove",e._data,e),e))},destroy(){throw W("DOC14")}};function Ol(e=Qn){var t=function(n,i){this.collection=n,this._data=i,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0};return t.prototype=e,t}function Cl(e,t,r="",n=!1){if(t!==null){var i=Xt(e.jsonSchema,r);typeof i>"u"||(i.properties&&(i=i.properties),Object.keys(i).forEach(o=>{var a=Rn(r+"."+o);t.__defineGetter__(o,function(){var s=n||this;if(!(!s.get||typeof s.get!="function")){var u=s.get(a);return u}}),Object.defineProperty(t,o+"$",{get:function(){var s=n||this;return s.get$(a)},enumerable:!1,configurable:!1}),Object.defineProperty(t,o+"_",{get:function(){var s=n||this;return s.populate(a)},enumerable:!1,configurable:!1}),t.__defineSetter__(o,function(s){var u=n||this;return u.set(a,s)})}))}}function zp(e,t,r){var n=new e(t,r);return at("createRxDocument",n),n}function Dl(e,t,r){return t._meta=Object.assign({},r._meta,t._meta),Ce.isDevMode()&&e.schema.validateChange(r,t),e._runHooks("pre","save",t,r)}var Pl=function(){function e(r,n){this.jsonSchema=r,this.hashFunction=n,this.indexes=Kp(this.jsonSchema),this.primaryPath=ut(this.jsonSchema.primaryKey),this.finalFields=xl(this.jsonSchema)}var t=e.prototype;return t.validateChange=function(n,i){this.finalFields.forEach(o=>{if(!Tn(n[o],i[o]))throw W("DOC9",{dataBefore:n,dataAfter:i,fieldName:o,schema:this.jsonSchema})})},t.getDocumentPrototype=function(){var n={};return Cl(this,n,""),gi(this,"getDocumentPrototype",()=>n),n},t.getPrimaryOfDocumentData=function(n){return ys(this.jsonSchema,n)},sn(e,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var r={};return Object.entries(this.jsonSchema.properties).filter(([,n])=>n.hasOwnProperty("default")).forEach(([n,i])=>r[n]=i.default),gi(this,"defaultValues",r)}},{key:"hash",get:function(){return gi(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}]),e}();function Kp(e){return(e.indexes||[]).map(t=>jr(t)?t:[t])}function Wp(e){var t=e.version?e.version:0,r=0;return new Array(t).fill(0).map(()=>r++)}function qp(e,t,r=!0){r&&at("preCreateRxSchema",e);var n=kl(e);n=Dp(n),Ce.deepFreezeWhenDevMode(n);var i=new Pl(n,t);return at("createRxSchema",i),i}function Hp(e,t){var r=typeof t=="object";return new Promise(function(n,i){var o=new Zr({next:function(a){n(a),o.unsubscribe()},error:i,complete:function(){r?n(t.defaultValue):i(new wp)}});e.subscribe(o)})}function Yp(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=uo(e),n=pl(e,1/0),i=e;return i.length?i.length===1?rr(i[0]):ms(n)(ps(i,r)):bp}const Vn="UNKNOWN";function vs(e){return e[e.length-1]}function Gp(e){const t=typeof e;return e!==null&&(t==="object"||t==="function")}function bu(e,t,r){if(Array.isArray(t)&&(t=t.join(".")),!Gp(e)||typeof t!="string")return r===void 0?e:r;const n=t.split(".");if(n.length===0)return r;for(let i=0;i<n.length;i++){const o=n[i];if(Qp(e,o)?e=i===n.length-1?void 0:null:e=e[o],e==null){if(i!==n.length-1)return r;break}}return e===void 0?r:e}function Qp(e,t){if(typeof t!="number"&&Array.isArray(e)){const r=Number.parseInt(t,10);return Number.isInteger(r)&&e[r]===e[t]}return!1}const Al=e=>!!e.queryParams.limit,Vp=e=>e.queryParams.limit===1,Zp=e=>!!(e.queryParams.skip&&e.queryParams.skip>0),Xp=e=>e.changeEvent.operation==="DELETE",Jp=e=>e.changeEvent.operation==="INSERT",em=e=>e.changeEvent.operation==="UPDATE",tm=e=>e.changeEvent.previous===Vn,rm=e=>Al(e)&&e.previousResults.length>=e.queryParams.limit,nm=e=>{const t=e.queryParams.sortFields,r=e.changeEvent.previous,n=e.changeEvent.doc;if(!n)return!1;if(!r||r===Vn)return!0;for(let i=0;i<t.length;i++){const o=t[i],a=bu(r,o),s=bu(n,o);if(a!==s)return!0}return!1},im=e=>{const t=e.changeEvent.id;if(e.keyDocumentMap)return e.keyDocumentMap.has(t);{const r=e.queryParams.primaryKey,n=e.previousResults;for(let i=0;i<n.length;i++)if(n[i][r]===t)return!0;return!1}},om=e=>{const t=e.previousResults[0];return!!(t&&t[e.queryParams.primaryKey]===e.changeEvent.id)},am=e=>{const t=vs(e.previousResults);return!!(t&&t[e.queryParams.primaryKey]===e.changeEvent.id)},sm=e=>{const t=e.changeEvent.previous;if(!t||t===Vn)return!1;const r=e.previousResults[0];return r?r[e.queryParams.primaryKey]===e.changeEvent.id?!0:e.queryParams.sortComparator(t,r)<0:!1},um=e=>{const t=e.changeEvent.previous;if(!t||t===Vn)return!1;const r=vs(e.previousResults);return r?r[e.queryParams.primaryKey]===e.changeEvent.id?!0:e.queryParams.sortComparator(t,r)>0:!1},cm=e=>{const t=e.changeEvent.doc;if(!t)return!1;const r=e.previousResults[0];return r?r[e.queryParams.primaryKey]===e.changeEvent.id?!0:e.queryParams.sortComparator(t,r)<0:!1},lm=e=>{const t=e.changeEvent.doc;if(!t)return!1;const r=vs(e.previousResults);return r?r[e.queryParams.primaryKey]===e.changeEvent.id?!0:e.queryParams.sortComparator(t,r)>0:!1},fm=e=>{const t=e.changeEvent.previous;return!t||t===Vn?!1:e.queryParams.queryMatcher(t)},hm=e=>{const t=e.changeEvent.doc;return t?e.queryParams.queryMatcher(t):!1},dm=e=>e.previousResults.length===0,pm={0:Jp,1:em,2:Xp,3:Al,4:Vp,5:Zp,6:dm,7:tm,8:rm,9:om,10:am,11:nm,12:im,13:sm,14:um,15:cm,16:lm,17:fm,18:hm};function mm(e,t,r,n){var i=n?e:e.slice(0),o=i.length-1,a=0,s=0;if(i.length===0)return i.push(t),[i,0];for(var u;a<=o;)s=a+(o-a>>1),u=i[s],r(u,t)<=0?a=s+1:o=s-1;return r(u,t)<=0&&s++,i.splice(s,0,t),[i,s]}const ym=e=>{},gs=e=>{e.previousResults.unshift(e.changeEvent.doc),e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,e.changeEvent.doc)},bs=e=>{e.previousResults.push(e.changeEvent.doc),e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,e.changeEvent.doc)},_s=e=>{const t=e.previousResults.shift();e.keyDocumentMap&&t&&e.keyDocumentMap.delete(t[e.queryParams.primaryKey])},ws=e=>{const t=e.previousResults.pop();e.keyDocumentMap&&t&&e.keyDocumentMap.delete(t[e.queryParams.primaryKey])},vm=e=>{_s(e),bs(e)},gm=e=>{ws(e),gs(e)},bm=e=>{_s(e),gs(e)},_m=e=>{ws(e),bs(e)},Il=e=>{e.keyDocumentMap&&e.keyDocumentMap.delete(e.changeEvent.id);const t=e.queryParams.primaryKey,r=e.previousResults;for(let n=0;n<r.length;n++)if(r[n][t]===e.changeEvent.id){r.splice(n,1);break}},wm=e=>{const t=e.changeEvent.doc,r=e.queryParams.primaryKey,n=e.previousResults;for(let i=0;i<n.length;i++)if(n[i][r]===e.changeEvent.id){n[i]=t,e.keyDocumentMap&&e.keyDocumentMap.set(e.changeEvent.id,t);break}},km=e=>{const t={_id:"wrongHuman"+new Date().getTime()};e.previousResults.length=0,e.previousResults.push(t),e.keyDocumentMap&&(e.keyDocumentMap.clear(),e.keyDocumentMap.set(t._id,t))},Rl=e=>{const t=e.changeEvent.id,r=e.changeEvent.doc;if(e.keyDocumentMap){if(e.keyDocumentMap.has(t))return;e.keyDocumentMap.set(t,r)}else if(e.previousResults.find(i=>i[e.queryParams.primaryKey]===t))return;mm(e.previousResults,r,e.queryParams.sortComparator,!0)},xm=e=>{Il(e),Rl(e)},Em=e=>{throw new Error("Action runFullQueryAgain must be implemented by yourself")},Sm=e=>{throw new Error("Action unknownAction should never be called")},Om=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],Cm={doNothing:ym,insertFirst:gs,insertLast:bs,removeFirstItem:_s,removeLastItem:ws,removeFirstInsertLast:vm,removeLastInsertFirst:gm,removeFirstInsertFirst:bm,removeLastInsertLast:_m,removeExisting:Il,replaceExisting:wm,alwaysWrong:km,insertAtSortPosition:Rl,removeExistingAndInsertAtSortPosition:xm,runFullQueryAgain:Em,unknownAction:Sm},Dm=40;function Po(e){return e.charCodeAt(0)-Dm}function Pm(e){return e?"1":"0"}function _u(e,t){const r=[];for(let n=0,i=e.length;n<i;n+=t)r.push(e.substring(n,n+t));return r}function Am(e){const t=new Map,n=2+parseInt(e.charAt(0)+e.charAt(1),10)*2,i=e.substring(2,n),o=_u(i,2);for(let p=0;p<o.length;p++){const b=o[p],m=b.charAt(0),g=Po(b.charAt(1));t.set(m,g)}const a=e.substring(n,e.length-3),s=_u(a,4);for(let p=0;p<s.length;p++){const b=s[p],m=b.charAt(0),g=b.charAt(1),w=b.charAt(2),x=Po(b.charAt(3));if(!t.has(g))throw new Error("missing node with id "+g);if(!t.has(w))throw new Error("missing node with id "+w);const k=t.get(g),D=t.get(w),E={l:x,0:k,1:D};t.set(m,E)}const u=e.slice(-3),c=u.charAt(0),l=u.charAt(1),f=Po(u.charAt(2)),h=t.get(c),d=t.get(l);return{l:f,0:h,1:d}}function Im(e,t,r){let n=e,i=e.l;for(;;){const o=t[i](r),a=Pm(o);if(n=n[a],typeof n=="number"||typeof n=="string")return n;i=n.l}}const Rm="14a2b0c/d1e,f+g5h.i4j*k-l)m(n6ohk1pdf1qef1rin-sjn-ton-ugn-vmn-whn-xkn-yln-zdf5{ef5|wx5}df7~dz7ef7bk7e{7g|7ry7dp7gk7eq7gt7ac7mv7gu7nm7iy7nw7s88k8m8v8n8n8vm8xv8mn8j8m8xm83}~3333m33m33b3m3m3x3kn3m3j6m66m6nm66,,,,,n,,mf99ym9m99z{2pq2222222n0n000n0000n000v//////y/m((y(::m:44*m*.";let Ao;function Tm(){return Ao||(Ao=Am(Rm)),Ao}const $m=e=>Im(Tm(),pm,e);function Mm(e){const t=$m(e);return Om[t]}function Bm(e,t,r,n,i){const o=Cm[e];return o({queryParams:t,changeEvent:r,previousResults:n,keyDocumentMap:i}),n}var Nr=String.fromCharCode(65535),ur=Number.MIN_VALUE;function Nm(e,t){var r=ut(e.primaryKey),n=t.selector,i=e.indexes?e.indexes.slice(0):[];t.index?i=[t.index]:i.push([r]);var o=t.sort.map(l=>Object.keys(l)[0]),a=o.join(","),s=!!t.sort.find(l=>Object.values(l)[0]==="desc"),u=-1,c;return i.forEach(l=>{var f=!0,h=!0,d=l.map(b=>{var m=n[b],g=m?Object.keys(m):[],w={};if(!m||!g.length){var x=h?ur:Nr;w={startKey:x,endKey:f?Nr:ur,inclusiveStart:!0,inclusiveEnd:!0}}else g.forEach(k=>{if(ks.has(k)){var D=m[k],E=jm(k,D);w=Object.assign(w,E)}});return typeof w.startKey>"u"&&(w.startKey=ur),typeof w.endKey>"u"&&(w.endKey=Nr),typeof w.inclusiveStart>"u"&&(w.inclusiveStart=!0),typeof w.inclusiveEnd>"u"&&(w.inclusiveEnd=!0),h&&!w.inclusiveStart&&(h=!1),f&&!w.inclusiveEnd&&(f=!1),w}),y={index:l,startKeys:d.map(b=>b.startKey),endKeys:d.map(b=>b.endKey),inclusiveEnd:f,inclusiveStart:h,sortFieldsSameAsIndexFields:!s&&a===l.join(","),selectorSatisfiedByIndex:wu(l,t.selector)},p=Um(e,t,y);(p>0&&p>u||t.index)&&(u=p,c=y)}),c||(c={index:[r],startKeys:[ur],endKeys:[Nr],inclusiveEnd:!0,inclusiveStart:!0,sortFieldsSameAsIndexFields:!s&&a===r,selectorSatisfiedByIndex:wu([r],t.selector)}),c}var ks=new Set(["$eq","$gt","$gte","$lt","$lte"]),Fm=new Set(["$eq","$gt","$gte"]),Lm=new Set(["$eq","$lt","$lte"]);function wu(e,t){var r=Object.entries(t),n=r.find(([u,c])=>{if(!e.includes(u))return!0;var l=Object.entries(c).find(([f,h])=>!ks.has(f));return l});if(n)return!1;var i,o=e.find(u=>{var c=t[u];if(!c)return!1;var l=Object.keys(c).find(f=>Fm.has(f));return i&&l?!0:(l!=="$eq"&&(i=l),!1)});if(o)return!1;var a,s=e.find(u=>{var c=t[u];if(!c)return!1;var l=Object.keys(c).find(f=>Lm.has(f));return a&&l?!0:(l!=="$eq"&&(a=l),!1)});return!s}function jm(e,t){switch(e){case"$eq":return{startKey:t,endKey:t};case"$lte":return{endKey:t};case"$gte":return{startKey:t};case"$lt":return{endKey:t,inclusiveEnd:!1};case"$gt":return{startKey:t,inclusiveStart:!1};default:throw new Error("SNH")}}function Um(e,t,r){var n=0,i=l=>{l>0&&(n=n+l)},o=10,a=ko(r.startKeys,l=>l!==ur&&l!==Nr);i(a*o);var s=ko(r.startKeys,l=>l!==Nr&&l!==ur);i(s*o);var u=ko(r.startKeys,(l,f)=>l===r.endKeys[f]);i(u*o*1.5);var c=r.sortFieldsSameAsIndexFields?5:0;return i(c),n}const zm=2147483647,Km=-2147483648,Wm=Number.MAX_SAFE_INTEGER,qm=Number.MIN_SAFE_INTEGER,Nn=Symbol("missing"),xs=e=>{const t=Kr(e);let r=0,n=t.length;for(;n;)r=(r<<5)-r^t.charCodeAt(--n);return r>>>0},Tl=new Set(["null","undefined","boolean","number","string","date","regexp"]),ku={null:0,undefined:0,number:1,string:2,object:3,array:4,boolean:5,date:6,regexp:7,function:8},Fn=(e,t)=>{e===Nn&&(e=void 0),t===Nn&&(t=void 0);const[r,n]=[e,t].map(a=>It(a).toLowerCase()),i=ku[r],o=ku[n];return i!==o?i-o:e<t?-1:e>t?1:0},Hm=Object.getPrototypeOf({}),Ym="[object Object]",Gm=/^\[object ([a-zA-Z0-9]+)\]$/;function Ve(e,t){if(!e)throw new Error(t)}function Fi(e){return e instanceof Array?e.map(Fi):e instanceof Date?new Date(e):Be(e)?Vm(e,Fi):e}function It(e){return Gm.exec(Object.prototype.toString.call(e))[1]}function Io(e){return typeof e=="boolean"}function Rt(e){return typeof e=="string"}function Kt(e){return!isNaN(e)&&typeof e=="number"}const Tt=Array.isArray;function Be(e){if(!e)return!1;const t=Object.getPrototypeOf(e);return(t===Hm||t===null)&&Ym===Object.prototype.toString.call(e)}function co(e){return e===Object(e)}function xu(e){return e instanceof Date}function wi(e){return e instanceof RegExp}function He(e){return e==null}function Ln(e,t){return e.includes(t)}function $l(e,t){return!Ln(e,t)}function Qm(e,t){return!!e||t&&e===""}function un(e){return He(e)||Rt(e)&&!e||e instanceof Array&&e.length===0||Be(e)&&Object.keys(e).length===0}function Eu(e){return e===Nn}function Zn(e){return e instanceof Array?e:[e]}function Je(e,t){return!!e&&Object.prototype.hasOwnProperty.call(e,t)}function Vm(e,t){const r={},n=Object.keys(e);for(let i=0;i<n.length;i++){const o=n[i];r[o]=t(e[o],o)}return r}function da(e,t,r){if(Eu(e))return t;if(Eu(t))return e;const n=[e,t];if(!(n.every(Be)||n.every(Tt)))throw Error("mismatched types. must both be array or object");if(r=r||{flatten:!1},Tt(e)){const i=e,o=t;if(r.flatten){let a=0,s=0;for(;a<i.length&&s<o.length;)i[a]=da(i[a++],o[s++],r);for(;s<o.length;)i.push(t[s++])}else Jr(i,o)}else Object.keys(t).forEach(i=>{Je(t,i)&&(Je(e,i)?e[i]=da(e[i],t[i],r):e[i]=t[i])});return e}function pa(e,t,r){e.key<t?e.right?pa(e.right,t,r):e.right={key:t,indexes:[r]}:e.key>t?e.left?pa(e.left,t,r):e.left={key:t,indexes:[r]}:e.indexes.push(r)}function ma(e,t){if(e.key==t)return e.indexes;if(e.key<t)return e.right?ma(e.right,t):void 0;if(e.key>t)return e.left?ma(e.left,t):void 0}function Ml(e,t=xs){if(e.some(c=>c.length==0))return[];const r=e.map((c,l)=>[l,c.length]);r.sort((c,l)=>c[1]-l[1]);const n=[],i=e[r[0][0]],o={key:ki(i[0],t),indexes:[0]};for(let c=1;c<i.length;c++){const l=i[c],f=ki(l,t);pa(o,f,c)}r[0][1];const a=[];for(let c=1;c<r.length;c++){const l=r[c][0],f=e[l];let h=0;for(let d=0;d<f.length;d++){const y=ki(f[d],t),p=ma(o,y);if(!p)continue;const b=p.map(m=>i[m]).findIndex(m=>ya(m,f[d]));b!=-1&&(n.length<c&&n.push({}),n[n.length-1][p[b]]=!0,h=Object.keys(n[n.length-1]).length,l==0&&a.indexOf(p[b])==-1&&a.push(p[b]))}if(h==0)return[]}const s={};n.forEach(c=>{Object.keys(c).forEach(l=>{const f=parseFloat(l);s[f]=s[f]||0,s[f]++})});const u=a;return u.length==0&&(u.push(...Object.keys(s).map(parseFloat)),u.sort()),u.filter(c=>s[c]==e.length-1).map(c=>i[c])}function Bl(e,t){const r=[];function n(i,o){for(let a=0,s=i.length;a<s;a++)Tt(i[a])&&(o>0||o<0)?n(i[a],Math.max(-1,o-1)):r.push(i[a])}return n(e,t),r}function ya(e,t){const r=[e],n=[t];for(;r.length>0;){if(e=r.pop(),t=n.pop(),e===t)continue;const i=It(e).toLowerCase();if(i!==It(t).toLowerCase()||i==="function")return!1;if(i==="array"){const o=e,a=t;if(o.length!==a.length)return!1;if(o.length===a.length&&o.length===0)continue;Jr(r,o),Jr(n,a)}else if(i==="object"){const o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(let s=0,u=o.length;s<u;s++){const c=o[s];if(!Je(t,c))return!1;r.push(e[c]),n.push(t[c])}}else if(Kr(e)!==Kr(t))return!1}return r.length===0}function Kr(e){const t=It(e).toLowerCase();switch(t){case"boolean":case"number":case"regexp":return e.toString();case"string":return JSON.stringify(e);case"date":return e.toISOString();case"null":case"undefined":return t;case"array":return"["+e.map(Kr).join(",")+"]"}const r=t==="object"?"":`${It(e)}`,n=Object.keys(e);return n.sort(),`${r}{`+n.map(i=>`${Kr(i)}:${Kr(e[i])}`).join(",")+"}"}function ki(e,t=xs){return He(e)?null:t(e).toString()}function Zm(e,t,r=Fn){const n=[],i=[];if(un(e))return e;for(let o=0;o<e.length;o++){const a=e[o],s=t(a,o);He(s)?i.push(a):n.push([s,a])}return n.sort((o,a)=>r(o[0],a[0])),i.push(...n.map(o=>o[1])),i}function Xm(e,t,r=xs){const n={keys:new Array,groups:new Array},i={};for(let o=0;o<e.length;o++){const a=e[o],s=t(a,o),u=ki(s,r);let c=-1;i[u]===void 0&&(c=n.keys.length,i[u]=c,n.keys.push(s),n.groups.push([])),c=i[u],n.groups[c].push(a)}return n}const Ro=5e4;function Jr(e,...t){return e instanceof Array?t.reduce((r,n)=>{let i=Math.ceil(n.length/Ro),o=0;for(;i-- >0;)Array.prototype.push.apply(r,n.slice(o,o+Ro)),o+=Ro;return r},e):t.filter(co).reduce((r,n)=>(Object.assign(r,n),r),e)}function va(e,t){return co(e)?e[t]:void 0}function Jm(e,t){if(t<1)return e;for(;t--&&e.length===1;)e=e[0];return e}function Es(e,t,r){let n=0;function i(a,s){let u=a;for(let c=0;c<s.length;c++){const l=s[c];if(/^\d+$/.exec(l)===null&&u instanceof Array){if(c===0&&n>0)break;n+=1;const h=s.slice(c);u=u.reduce((d,y)=>{const p=i(y,h);return p!==void 0&&d.push(p),d},[]);break}else u=va(u,l);if(u===void 0)break}return u}const o=Tl.has(It(e).toLowerCase())?e:i(e,t.split("."));return o instanceof Array&&(r!=null&&r.unwrapArray)?Jm(o,n):o}function xi(e,t,r){const n=t.split("."),i=n[0],o=n.slice(1).join("."),a=/^\d+$/.exec(i)!==null,s=n.length>1;let u,c;if(e instanceof Array)if(a)u=va(e,Number(i)),s&&(u=xi(u,o,r)),u=[u];else{u=[];for(const l of e)c=xi(l,t,r),r!=null&&r.preserveMissing?(c===void 0&&(c=Nn),u.push(c)):c!==void 0&&u.push(c)}else{if(c=va(e,i),s&&(c=xi(c,o,r)),c===void 0)return;u=r!=null&&r.preserveKeys?{...e}:{},u[i]=c}return u}function ga(e){if(e instanceof Array)for(let t=e.length-1;t>=0;t--)e[t]===Nn?e.splice(t,1):ga(e[t]);else if(Be(e))for(const t in e)Je(e,t)&&ga(e[t])}function Li(e,t,r,n){if(He(e))return;const i=t.split("."),o=i[0],a=i.slice(1).join(".");if(i.length===1)r(e,o);else{n!=null&&n.buildGraph&&He(e[o])&&(e[o]={});const s=e[o],u=!!(i.length>1&&i[1].match(/^\d+$/));s instanceof Array&&(n!=null&&n.descendArray)&&!u?s.forEach(c=>Li(c,a,r,n)):Li(s,a,r,n)}}function ey(e,t,r){Li(e,t,(n,i)=>{n[i]=r},{buildGraph:!0})}function Su(e,t,r){Li(e,t,(n,i)=>{if(n instanceof Array){if(/^\d+$/.test(i))n.splice(parseInt(i),1);else if(r&&r.descendArray)for(const o of n)Be(o)&&delete o[i]}else Be(n)&&delete n[i]},r)}const ty=/^\$[a-zA-Z0-9_]+$/;function cn(e){return ty.test(e)}function Nl(e){if(Tl.has(It(e).toLowerCase()))return wi(e)?{$regex:e}:{$eq:e};if(co(e)){if(!Object.keys(e).some(cn))return{$eq:e};if(Je(e,"$regex"))return{$regex:new RegExp(e.$regex,e.$options)}}return e}var Gt;(function(e){e.CLONE_ALL="CLONE_ALL",e.CLONE_INPUT="CLONE_INPUT",e.CLONE_OUTPUT="CLONE_OUTPUT",e.CLONE_OFF="CLONE_OFF"})(Gt||(Gt={}));class jn{constructor(t,r,n,i=Date.now()){be(this,"options");be(this,"_root");be(this,"_local");be(this,"timestamp");this.options=t,this._root=r,this._local=n,this.timestamp=i,this.options=t,this.update(r,n)}static init(t,r,n){return t instanceof jn?t.update(He(t.root)?r:t.root,Object.assign({},t.local,n)):new jn(t||Ss(),r,n)}update(t,r){var n;return this._root=t,this._local=r&&Object.assign({},r,{variables:Object.assign({},(n=this._local)==null?void 0:n.variables,r==null?void 0:r.variables)}),this}get root(){return this._root}get local(){return this._local}get idKey(){var t;return(t=this.options)==null?void 0:t.idKey}get collation(){var t;return(t=this.options)==null?void 0:t.collation}get processingMode(){var t;return((t=this.options)==null?void 0:t.processingMode)||Gt.CLONE_OFF}get useStrictMode(){var t;return(t=this.options)==null?void 0:t.useStrictMode}get scriptEnabled(){var t;return(t=this.options)==null?void 0:t.scriptEnabled}get hashFunction(){var t;return(t=this.options)==null?void 0:t.hashFunction}get collectionResolver(){var t;return(t=this.options)==null?void 0:t.collectionResolver}get jsonSchemaValidator(){var t;return(t=this.options)==null?void 0:t.jsonSchemaValidator}get variables(){var t;return(t=this.options)==null?void 0:t.variables}}function Ss(e){return Object.freeze({idKey:"_id",scriptEnabled:!0,useStrictMode:!0,processingMode:Gt.CLONE_OFF,...e})}var Me;(function(e){e.ACCUMULATOR="accumulator",e.EXPRESSION="expression",e.PIPELINE="pipeline",e.PROJECTION="projection",e.QUERY="query",e.WINDOW="window"})(Me||(Me={}));const Os={[Me.ACCUMULATOR]:{},[Me.EXPRESSION]:{},[Me.PIPELINE]:{},[Me.PROJECTION]:{},[Me.QUERY]:{},[Me.WINDOW]:{}};function Ou(e,t){for(const[r,n]of Object.entries(t)){Ve(n instanceof Function&&cn(r),`'${r}' is not a valid operator`);const i=en(e,r);Ve(!i||n===i,`${r} already exists for '${e}' operators. Cannot change operator function once registered.`)}Jr(Os[e],t)}function en(e,t){return Os[e][t]}const Cu={$$ROOT(e,t,r){return r.root},$$CURRENT(e,t,r){return e},$$REMOVE(e,t,r){},$$NOW(e,t,r){return new Date(r.timestamp)}},ba={$$KEEP(e,t,r){return e},$$PRUNE(e,t,r){},$$DESCEND(e,t,r){if(!Je(t,"$cond"))return e;let n;for(const[i,o]of Object.entries(e))if(co(o)){if(o instanceof Array){const a=[];for(let s of o)Be(s)&&(s=Du(s,t,r.update(s))),He(s)||a.push(s);n=a}else n=Du(o,t,r.update(o));He(n)?delete e[i]:e[i]=n}return e}};function xt(e,t,r,n){var o;const i=jn.init(n,e);if(cn(r)){const a=en(Me.EXPRESSION,r);if(a)return a(e,t,i);const s=en(Me.ACCUMULATOR,r);if(s)return e instanceof Array||(e=xt(e,t,null,i),t=null),Ve(e instanceof Array,`'${r}' target must be an array.`),s(e,t,i.update(null,i.local));throw new Error(`operator '${r}' is not registered`)}if(Rt(t)&&t.length>0&&t[0]==="$"){if(Je(ba,t))return t;let a=i.root;const s=t.split(".");if(Je(Cu,s[0]))a=Cu[s[0]](e,null,i),t=t.slice(s[0].length+1);else if(s[0].slice(0,2)==="$$"){a=Object.assign({},i.variables,{this:e},(o=i.local)==null?void 0:o.variables);const u=s[0].slice(2);Ve(Je(a,u),`Use of undefined variable: ${u}`),t=t.slice(2)}else t=t.slice(1);return t===""?a:Es(a,t)}if(t instanceof Array)return t.map(a=>xt(e,a,null,i));if(Be(t)){const a={};for(const[s,u]of Object.entries(t))if(a[s]=xt(e,u,s,i),[Me.EXPRESSION,Me.ACCUMULATOR].some(c=>Je(Os[c],s)))return Ve(Object.keys(t).length===1,"Invalid aggregation expression '"+JSON.stringify(t)+"'"),a[s];return a}return t}function Du(e,t,r){const n=xt(e,t,null,r);return Je(ba,n)?ba[n](e,t,r):n}function tn(e){return e instanceof Pu?e:new Pu(e)}function ry(...e){let t=0;return tn(()=>{for(;t<e.length;){const r=e[t].next();if(!r.done)return r;t++}return{done:!0}})}function ny(e){return!!e&&typeof e=="object"&&(e==null?void 0:e.next)instanceof Function}function iy(e,t){const r=e.slice(t+1);e.splice(t),Array.prototype.push.apply(e,r)}const _a=new Error;var dt;(function(e){e[e.MAP=0]="MAP",e[e.FILTER=1]="FILTER",e[e.TAKE=2]="TAKE",e[e.DROP=3]="DROP"})(dt||(dt={}));function oy(e,t,r){let n=!1,i=-1,o=0;return function(a){try{e:for(;!n;){let s=e();i++;let u=-1;const c=t.length;let l=!1;for(;++u<c;){const f=t[u];switch(f.action){case dt.MAP:s=f.func(s,i);break;case dt.FILTER:if(!f.func(s,i))continue e;break;case dt.TAKE:--f.count,f.count||(l=!0);break;case dt.DROP:--f.count,f.count||iy(t,u);continue e;default:break e}}if(n=l,a)r[o++]=s;else return{value:s,done:!1}}}catch(s){if(s!==_a)throw s}return n=!0,{done:n}}}class Pu{constructor(t){be(this,"iteratees",[]);be(this,"yieldedValues",[]);be(this,"getNext");be(this,"isDone",!1);let r;if(t instanceof Function&&(t={next:t}),ny(t)){const n=t;r=()=>{const i=n.next();if(i.done)throw _a;return i.value}}else if(t instanceof Array){const n=t,i=n.length;let o=0;r=()=>{if(o<i)return n[o++];throw _a}}else if(!(t instanceof Function))throw new Error(`Source is of type '${typeof t}'. Must be Array, Function, or Generator`);this.getNext=oy(r,this.iteratees,this.yieldedValues)}push(t,r){return typeof r=="function"?this.iteratees.push({action:t,func:r}):typeof r=="number"&&this.iteratees.push({action:t,count:r}),this}next(){return this.getNext()}map(t){return this.push(dt.MAP,t)}filter(t){return this.push(dt.FILTER,t)}take(t){return t>0?this.push(dt.TAKE,t):this}drop(t){return t>0?this.push(dt.DROP,t):this}transform(t){const r=this;let n;return tn(()=>(n||(n=tn(t(r.value()))),n.next()))}value(){return this.isDone||(this.isDone=this.getNext(!0).done),this.yieldedValues}each(t){for(;;){const r=this.next();if(r.done)break;if(t(r.value)===!1)return!1}return!0}reduce(t,r){let n=this.next();for(r===void 0&&!n.done&&(r=n.value,n=this.next());!n.done;)r=t(r,n.value),n=this.next();return r}size(){return this.reduce((t,r)=>++t,0)}[Symbol.iterator](){return this}}class ay{constructor(t,r){be(this,"pipeline");be(this,"options");this.pipeline=t,this.options=r,this.options=Ss(r)}stream(t){let r=tn(t);const n=this.options.processingMode;(n==Gt.CLONE_ALL||n==Gt.CLONE_INPUT)&&r.map(Fi);const i=[];if(!un(this.pipeline))for(const o of this.pipeline){const a=Object.keys(o),s=a[0],u=en(Me.PIPELINE,s);Ve(a.length===1&&!!u,`invalid aggregation operator ${s}`),i.push(s),r=u(r,o[s],this.options)}return(n==Gt.CLONE_OUTPUT||n==Gt.CLONE_ALL&&Ml([["$group","$unwind"],i]).length)&&r.map(Fi),r}run(t){return this.stream(t).value()}}class sy{constructor(t,r,n,i){be(this,"source");be(this,"predicate");be(this,"projection");be(this,"options");be(this,"operators",[]);be(this,"result",null);be(this,"buffer",[]);this.source=t,this.predicate=r,this.projection=n,this.options=i}fetch(){return this.result?this.result:(Be(this.projection)&&this.operators.push({$project:this.projection}),this.result=tn(this.source).filter(this.predicate),this.operators.length>0&&(this.result=new ay(this.operators,this.options).stream(this.result)),this.result)}fetchAll(){const t=tn([...this.buffer]);return this.buffer=[],ry(t,this.fetch())}all(){return this.fetchAll().value()}count(){return this.all().length}skip(t){return this.operators.push({$skip:t}),this}limit(t){return this.operators.push({$limit:t}),this}sort(t){return this.operators.push({$sort:t}),this}collation(t){return this.options={...this.options,collation:t},this}next(){if(this.buffer.length>0)return this.buffer.pop();const t=this.fetch().next();if(!t.done)return t.value}hasNext(){if(this.buffer.length>0)return!0;const t=this.fetch().next();return t.done?!1:(this.buffer.push(t.value),!0)}map(t){return this.all().map(t)}forEach(t){this.all().forEach(t)}[Symbol.iterator](){return this.fetchAll()}}class Xn{constructor(t,r){be(this,"criteria");be(this,"options");be(this,"compiled");this.criteria=t,this.options=r,this.options=Ss(r),this.compiled=[],this.compile()}compile(){Ve(Be(this.criteria),"query criteria must be an object");let t;for(const[r,n]of Object.entries(this.criteria)){if(r==="$where")t={field:r,expr:n};else if(Ln(["$and","$or","$nor","$expr","$jsonSchema"],r))this.processOperator(r,r,n);else{Ve(!cn(r),`unknown top level operator: ${r}`);for(const[i,o]of Object.entries(Nl(n)))this.processOperator(r,i,o)}Be(t)&&this.processOperator(t.field,t.field,t.expr)}}processOperator(t,r,n){const i=en(Me.QUERY,r);Ve(!!i,`unknown operator ${r}`);const o=i(t,n,this.options);this.compiled.push(o)}test(t){for(let r=0,n=this.compiled.length;r<n;r++)if(!this.compiled[r](t))return!1;return!0}find(t,r){return new sy(t,n=>this.test(n),r||{},this.options)}remove(t){return t.reduce((r,n)=>(this.test(n)||r.push(n),r),[])}}function uy(e,t,r){if(un(t))return e;let n=Object.keys(t),i=!1;Fl(t,r);const o=r.idKey;if(Ln(n,o)){const s=t[o];(s===0||s===!1)&&(n=n.filter($l.bind(null,[o])),i=n.length==0)}else n.push(o);const a=jn.init(r);return e.map(s=>wa(s,t,a.update(s),n,i))}function wa(e,t,r,n,i){let o={},a=!1,s=!1;const u=[];i&&u.push(r.idKey);for(const c of n){let l;const f=t[c];if(c!==r.idKey&&Ln([0,!1],f)&&(s=!0),c===r.idKey&&un(f))l=e[c];else if(Rt(f))l=xt(e,f,c,r);else if(!Ln([1,!0],f))if(f instanceof Array)l=f.map(d=>{const y=xt(e,d,null,r);return He(y)?null:y});else if(Be(f)){const d=f,y=Object.keys(f),p=y.length==1?y[0]:null,b=en(Me.PROJECTION,p);if(b)p==="$slice"?Zn(d[p]).every(Kt)?(l=b(e,d[p],c),a=!0):l=xt(e,d,c,r):l=b(e,d[p],c,r);else if(cn(p))l=xt(e,d[p],p,r);else if(Je(e,c)){Fl(d,r);let m=e[c];m instanceof Array?l=m.map(g=>wa(g,d,r,y,!1)):(m=Be(m)?m:e,l=wa(m,d,r,y,!1))}else l=xt(e,f,null,r)}else{u.push(c);continue}const h=xi(e,c,{preserveMissing:!0});h!==void 0&&da(o,h,{flatten:!0}),$l([0,1,!1,!0],f)&&(l===void 0?Su(o,c,{descendArray:!0}):ey(o,c,l))}if(ga(o),(a||s||i)&&(o=Jr({},e,o),u.length>0))for(const c of u)Su(o,c,{descendArray:!0});return o}function Fl(e,t){const r=[!1,!1];for(const[n,i]of Object.entries(e)){if(n===t.idKey)return;i===0||i===!1?r[0]=!0:(i===1||i===!0)&&(r[1]=!0),Ve(!(r[0]&&r[1]),"Projection cannot have a mix of inclusion and exclusion.")}}function cy(e,t,r){if(un(t)||!Be(t))return e;let n=Fn;const i=r.collation;return Be(i)&&Rt(i.locale)&&(n=fy(i)),e.transform(o=>{const a=Object.keys(t);for(const s of a.reverse()){const u=Xm(o,f=>Es(f,s),r==null?void 0:r.hashFunction),c={},l=Zm(u.keys,(f,h)=>(c[f]=h,f),n);t[s]===-1&&l.reverse(),o=[];for(const f of l)Jr(o,u.groups[c[f]])}return o})}const ly={1:"base",2:"accent",3:"variant"};function fy(e){const t={sensitivity:ly[e.strength||3],caseFirst:e.caseFirst==="off"?"false":e.caseFirst||"false",numeric:e.numericOrdering||!1,ignorePunctuation:e.alternate==="shifted"};(e.caseLevel||!1)===!0&&(t.sensitivity==="base"&&(t.sensitivity="case"),t.sensitivity==="accent"&&(t.sensitivity="variant"));const r=new Intl.Collator(e.locale,t);return(n,i)=>{if(!Rt(n)||!Rt(i))return Fn(n,i);const o=r.compare(n,i);return o<0?-1:o>0?1:0}}function hy(e,t,r){Ve(Tt(t),"Invalid expression: $and expects value to be an Array");const n=new Array;return t.forEach(i=>n.push(new Xn(i,r))),i=>{for(let o=0;o<n.length;o++)if(!n[o].test(i))return!1;return!0}}function dy(e,t,r){const n={};n[e]=Nl(t);const i=new Xn(n,r);return o=>!i.test(o)}function Ll(e,t,r){Ve(Tt(t),"Invalid expression. $or expects value to be an Array");const n=t.map(i=>new Xn(i,r));return i=>{for(let o=0;o<n.length;o++)if(n[o].test(i))return!0;return!1}}function py(e,t,r){Ve(Tt(t),"Invalid expression. $nor expects value to be an Array");const n=Ll("$or",t,r);return i=>!n(i)}function Ye(e){return(t,r,n)=>{const i={unwrapArray:!0},o=Math.max(1,t.split(".").length-1);return a=>{const s=Es(a,t,i);return e(s,r,{...n,depth:o})}}}function jl(e,t,r){if(ya(e,t)||He(e)&&He(t))return!0;if(e instanceof Array){const n=ya.bind(null,t);return e.some(n)||Bl(e,r==null?void 0:r.depth).some(n)}return!1}function my(e,t,r){return!jl(e,t,r)}function Ul(e,t,r){return He(e)?t.some(n=>n===null):Ml([Zn(e),t],r==null?void 0:r.hashFunction).length>0}function yy(e,t,r){return!Ul(e,t,r)}function vy(e,t,r){return lo(e,t,(n,i)=>n<i)}function gy(e,t,r){return lo(e,t,(n,i)=>n<=i)}function by(e,t,r){return lo(e,t,(n,i)=>n>i)}function _y(e,t,r){return lo(e,t,(n,i)=>n>=i)}function wy(e,t,r){return Zn(e).some(n=>t.length===2&&n%t[0]===t[1])}function ky(e,t,r){const n=Zn(e),i=o=>Rt(o)&&Qm(t.exec(o),r.useStrictMode);return n.some(i)||Bl(n,1).some(i)}function xy(e,t,r){return(t===!1||t===0)&&e===void 0||(t===!0||t===1)&&e!==void 0}function Ey(e,t,r){return Array.isArray(e)&&e.length===t}function Sy(e){return cn(e)&&["$and","$or","$nor"].indexOf(e)===-1}function Oy(e,t,r){if(Tt(e)&&!un(e)){let n=a=>a,i=t;Object.keys(t).every(Sy)&&(i={temp:t},n=a=>({temp:a}));const o=new Xn(i,r);for(let a=0,s=e.length;a<s;a++)if(o.test(n(e[a])))return!0}return!1}const Au=e=>e===null,Iu=e=>Kt(e)&&e>=Km&&e<=zm&&e.toString().indexOf(".")===-1,Ru=e=>Kt(e)&&e>=qm&&e<=Wm&&e.toString().indexOf(".")===-1,Cy={array:Tt,bool:Io,boolean:Io,date:xu,decimal:Kt,double:Kt,int:Iu,long:Ru,number:Kt,null:Au,object:Be,regex:wi,regexp:wi,string:Rt,undefined:He,function:e=>{throw new Error("unsupported type key `function`.")},1:Kt,2:Rt,3:Be,4:Tt,6:He,8:Io,9:xu,10:Au,11:wi,16:Iu,18:Ru,19:Kt};function Tu(e,t,r){const n=Cy[t];return n?n(e):!1}function Dy(e,t,r){return Array.isArray(t)?t.findIndex(n=>Tu(e,n))>=0:Tu(e,t)}function lo(e,t,r){return Zn(e).some(n=>It(n)===It(t)&&r(n,t))}const Py=Ye(jl),Ay=Ye(my),Iy=Ye(by),Ry=Ye(_y),Ty=Ye(vy),$y=Ye(gy),My=Ye(ky),By=Ye(wy),Ny=Ye(Oy),Fy=Ye(xy),Ly=Ye(yy),jy=Ye(Ul),Uy=Ye(Ey),zy=Ye(Dy);var $u=!1;function Ky(e){return $u||(Ou(Me.PIPELINE,{$sort:cy,$project:uy}),Ou(Me.QUERY,{$and:hy,$eq:Py,$elemMatch:Ny,$exists:Fy,$gt:Iy,$gte:Ry,$in:jy,$lt:Ty,$lte:$y,$ne:Ay,$nin:Ly,$mod:By,$nor:py,$not:dy,$or:Ll,$regex:My,$size:Uy,$type:zy}),$u=!0),new Xn(e)}function ka(e,t){var r=ut(e.primaryKey);t=Re(t),t.selector&&(t.selector=xa(t.selector));var n=Ur(t);if(typeof n.skip!="number"&&(n.skip=0),n.selector?(n.selector=n.selector,Object.entries(n.selector).forEach(([c,l])=>{(typeof l!="object"||l===null)&&(n.selector[c]={$eq:l})})):n.selector={},n.index){var i=us(n.index);i.includes(r)||i.push(r),n.index=i}if(n.sort){var u=n.sort.find(c=>Pd(c)===r);u||(n.sort=n.sort.slice(0),n.sort.push({[r]:"asc"}))}else if(n.index)n.sort=n.index.map(c=>({[c]:"asc"}));else{if(e.indexes){var o=new Set;Object.entries(n.selector).forEach(([c,l])=>{var f=!1;typeof l=="object"&&l!==null?f=!!Object.keys(l).find(h=>ks.has(h)):f=!0,f&&o.add(c)});var a=-1,s;e.indexes.forEach(c=>{var l=jr(c)?c:[c],f=l.findIndex(h=>!o.has(h));f>0&&f>a&&(a=f,s=l)}),s&&(n.sort=s.map(c=>({[c]:"asc"})))}n.sort||(n.sort=[{[r]:"asc"}])}return n}function xa(e){if(typeof e!="object"||e===null)return e;var t=Object.keys(e),r={};return t.forEach(n=>{var i=e[n];if(n==="$regex"&&i instanceof RegExp){var o=Td(i);r.$regex=o.pattern,r.$options=o.flags}else Array.isArray(i)?r[n]=i.map(a=>xa(a)):r[n]=xa(i)}),r}function zl(e,t){if(!t.sort)throw W("SNH",{query:t});var r=[];t.sort.forEach(i=>{var o=Object.keys(i)[0],a=Object.values(i)[0];r.push({key:o,direction:a,getValueFn:Dd(o)})});var n=(i,o)=>{for(var a=0;a<r.length;++a){var s=r[a],u=s.getValueFn(i),c=s.getValueFn(o);if(u!==c){var l=s.direction==="asc"?Fn(u,c):Fn(c,u);return l}}};return n}function Cs(e,t){if(!t.sort)throw W("SNH",{query:t});var r=Ky(t.selector),n=i=>{if(i._deleted)return!1;var o=r.find([i]),a=o.next();return!!a};return n}function Wy(e,t){return!t.sort||t.sort.length===0?[e]:t.sort.map(r=>Object.keys(r)[0])}var qy=new WeakMap;function Hy(e){return br(qy,e,()=>{var t=e.collection,r=ka(t.storageInstance.schema,Ur(e.mangoQuery)),n=t.schema.primaryPath,i=zl(t.schema.jsonSchema,r),o=(c,l)=>{var f={docA:c,docB:l,rxQuery:e};return i(f.docA,f.docB)},a=Cs(t.schema.jsonSchema,r),s=c=>{var l={doc:c,rxQuery:e};return a(l.doc)},u={primaryKey:e.collection.schema.primaryPath,skip:r.skip,limit:r.limit,sortFields:Wy(n,r),sortComparator:o,queryMatcher:s};return u})}function Yy(e,t){if(!e.collection.database.eventReduce)return{runFullQueryAgain:!0};var r=Hy(e),n=_e(e._result).docsData.slice(0),i=_e(e._result).docsDataMap,o=!1,a=t.map(u=>Cp(u)).filter(id),s=a.find(u=>{var c={queryParams:r,changeEvent:u,previousResults:n,keyDocumentMap:i},l=Mm(c);if(l==="runFullQueryAgain")return!0;if(l!=="doNothing")return o=!0,Bm(l,r,u,n,i),!1});return s?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:o,newResults:n}}var Gy=function(){function e(){this._map=new Map}var t=e.prototype;return t.getByQuery=function(n){var i=n.toString();return br(this._map,i,()=>n)},e}();function Qy(){return new Gy}function Mu(e,t){t.uncached=!0;var r=t.toString();e._map.delete(r)}function Vy(e){return e.refCount$.observers.length}var Zy=100,Xy=30*1e3,Jy=(e,t)=>(r,n)=>{if(!(n._map.size<e)){var i=ze()-t,o=[],a=Array.from(n._map.values());for(var s of a)if(!(Vy(s)>0)){if(s._lastEnsureEqual===0&&s._creationTime<i){Mu(n,s);continue}o.push(s)}var u=o.length-e;if(!(u<=0)){var c=o.sort((f,h)=>f._lastEnsureEqual-h._lastEnsureEqual),l=c.slice(0,u);l.forEach(f=>Mu(n,f))}}},Kl=Jy(Zy,Xy),To=new WeakSet;function ev(e){To.has(e)||(To.add(e),bd().then(()=>kd(200)).then(()=>{e.destroyed||e.cacheReplacementPolicy(e,e._queryCache),To.delete(e)}))}var tv=0,rv=function(){return++tv},Wl=function(){function e(r,n,i,o={}){this.id=rv(),this._execOverDatabaseCount=0,this._creationTime=ze(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new Ep(null),this._result=null,this._latestChangeEvent=-1,this._lastExecStart=0,this._lastExecEnd=0,this._ensureEqualQueue=qt,this.op=r,this.mangoQuery=n,this.collection=i,this.other=o,n||(this.mangoQuery=Ei()),this.isFindOneByIdQuery=av(this.collection.schema.primaryPath,n)}var t=e.prototype;return t._setResultData=function(n){if(typeof n=="number"){this._result={docsData:[],docsMap:new Map,docsDataMap:new Map,count:n,docs:[],time:ze()};return}else n instanceof Map&&(n=Array.from(n.values()));var i=new Map,o=new Map,a=n.map(u=>this.collection._docCache.getCachedRxDocument(u)),s=a.map(u=>(i.set(u.primary,u._data),o.set(u.primary,u),u._data));this._result={docsData:s,docsMap:o,docsDataMap:i,count:s.length,docs:a,time:ze()}},t._execOverDatabase=async function(){if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this._lastExecStart=ze(),this.op==="count"){var n=this.getPreparedQuery(),i=await this.collection.storageInstance.count(n);if(i.mode==="slow"&&!this.collection.database.allowSlowCount)throw W("QU14",{collection:this.collection,queryObj:this.mangoQuery});return i.count}if(this.op==="findByIds"){var o=_e(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,a=new Map,s=[];if(o.forEach(l=>{var f=this.collection._docCache.getLatestDocumentDataIfExists(l);if(f){if(!f._deleted){var h=this.collection._docCache.getCachedRxDocument(f);a.set(l,h)}}else s.push(l)}),s.length>0){var u=await this.collection.storageInstance.findDocumentsById(s,!1);Object.values(u).forEach(l=>{var f=this.collection._docCache.getCachedRxDocument(l);a.set(f.primary,f)})}return a}var c=ov(this);return c.then(l=>(this._lastExecEnd=ze(),l))},t.exec=function(n){if(n&&this.op!=="findOne")throw W("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return Bu(this).then(()=>Hp(this.$)).then(i=>{if(!i&&n)throw W("QU10",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return i})},t.toString=function(){var n=Bi({op:this.op,query:this.mangoQuery,other:this.other},!0),i=JSON.stringify(n,Ad);return this.toString=()=>i,i},t.getPreparedQuery=function(){var n={rxQuery:this,mangoQuery:ka(this.collection.schema.jsonSchema,this.mangoQuery)};at("prePrepareQuery",n);var i=this.collection.database.storage.statics.prepareQuery(this.collection.schema.jsonSchema,n.mangoQuery);return this.getPreparedQuery=()=>i,i},t.doesDocumentDataMatch=function(n){return n._deleted?!1:this.queryMatcher(n)},t.remove=function(){return this.exec().then(n=>Array.isArray(n)?Promise.all(n.map(i=>i.remove())):n.remove())},t.update=function(n){throw ge("update")},t.where=function(n){throw ge("query-builder")},t.sort=function(n){throw ge("query-builder")},t.skip=function(n){throw ge("query-builder")},t.limit=function(n){throw ge("query-builder")},sn(e,[{key:"$",get:function(){if(!this._$){var r=this.collection.$.pipe(it(n=>!n.isLocal),bl(null),Gn(()=>Bu(this)),Yt(()=>this._result),gl(Gc),fa((n,i)=>!!(n&&n.time===_e(i).time)),it(n=>!!n),Yt(n=>{var i=_e(n);return this.op==="count"?i.count:this.op==="findOne"?i.docs.length===0?null:i.docs[0]:this.op==="findByIds"?i.docsMap:i.docs.slice(0)}));this._$=Yp(r,this.refCount$.pipe(it(()=>!1)))}return this._$}},{key:"queryMatcher",get:function(){var r=this.collection.schema.jsonSchema,n=ka(this.collection.schema.jsonSchema,this.mangoQuery);return gi(this,"queryMatcher",Cs(r,n))}},{key:"asRxQuery",get:function(){return this}}]),e}();function Ei(){return{selector:{}}}function nv(e){return e.collection._queryCache.getByQuery(e)}function mn(e,t,r,n){at("preCreateRxQuery",{op:e,queryObj:t,collection:r,other:n});var i=new Wl(e,t,r,n);return i=nv(i),ev(r),i}function ql(e){var t=e.asRxQuery.collection._changeEventBuffer.counter;return e._latestChangeEvent>=t}function Bu(e){return e.collection.database.destroyed||ql(e)?qt:(e._ensureEqualQueue=e._ensureEqualQueue.then(()=>iv(e)),e._ensureEqualQueue)}function iv(e){if(e._lastEnsureEqual=ze(),e.collection.database.destroyed||ql(e))return qt;var t=!1,r=!1;if(e._latestChangeEvent===-1&&(r=!0),!r){var n=e.asRxQuery.collection._changeEventBuffer.getFrom(e._latestChangeEvent+1);if(n===null)r=!0;else{e._latestChangeEvent=e.asRxQuery.collection._changeEventBuffer.counter;var i=e.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(n);if(e.op==="count"){var o=_e(e._result).count,a=o;i.forEach(c=>{var l=c.previousDocumentData&&e.doesDocumentDataMatch(c.previousDocumentData),f=e.doesDocumentDataMatch(c.documentData);!l&&f&&a++,l&&!f&&a--}),a!==o&&(t=!0,e._setResultData(a))}else{var s=Yy(e,i);s.runFullQueryAgain?r=!0:s.changed&&(t=!0,e._setResultData(s.newResults))}}}if(r){var u=e.collection._changeEventBuffer.counter;return e._execOverDatabase().then(c=>(e._latestChangeEvent=u,typeof c=="number"?((!e._result||c!==e._result.count)&&(t=!0,e._setResultData(c)),t):((!e._result||!sd(e.collection.schema.primaryPath,c,e._result.docsData))&&(t=!0,e._setResultData(c)),t)))}return Promise.resolve(t)}async function ov(e){var t=[],r=e.collection;if(e.isFindOneByIdQuery)if(Array.isArray(e.isFindOneByIdQuery)){var n=e.isFindOneByIdQuery;if(n=n.filter(l=>{var f=e.collection._docCache.getLatestDocumentDataIfExists(l);return f?(f._deleted||t.push(f),!1):!0}),n.length>0){var i=await r.storageInstance.findDocumentsById(n,!1);Object.values(i).forEach(l=>{t.push(l)})}}else{var o=e.isFindOneByIdQuery,a=e.collection._docCache.getLatestDocumentDataIfExists(o);if(!a){var s=await r.storageInstance.findDocumentsById([o],!1);a=s[o]}a&&!a._deleted&&t.push(a)}else{var u=e.getPreparedQuery(),c=await r.storageInstance.query(u);t=c.documents}return t}function av(e,t){if(!t.skip&&t.selector&&Object.keys(t.selector).length===1&&t.selector[e]){var r=t.selector[e];if(typeof r=="string")return r;if(Object.keys(r).length===1&&typeof r.$eq=="string"||Object.keys(r).length===1&&Array.isArray(r.$eq)&&!r.$eq.find(n=>typeof n!="string"))return r.$eq}return!1}var xn="collection",Ds="storage-token",sv="RxInternalDocument",Ps=kl({version:0,title:sv,primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[xn,Ds,"OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}});function Ea(e,t){return ys(Ps,{key:e,context:t})}async function Hl(e,t){var r=e.prepareQuery(t.schema,{selector:{context:xn},sort:[{id:"asc"}],skip:0}),n=await t.query(r),i=n.documents;return i}var Yl="storageToken",ci=Ea(Yl,Ds);async function uv(e){var t=ao(10),r=e.password?e.hashFunction(JSON.stringify(e.password)):void 0,n={id:ci,context:Ds,key:Yl,data:{token:t,instanceToken:e.token,passwordHash:r},_deleted:!1,_meta:io(),_rev:oo(),_attachments:{}},i=await e.internalStore.bulkWrite([{document:n}],"internal-add-storage-token");if(i.success[ci])return i.success[ci];var o=_e(i.error[ci]);if(o.isError&&o.status===409){var a=o;if(r&&r!==a.documentInDb.data.passwordHash)throw W("DB1",{passwordHash:r,existingPasswordHash:a.documentInDb.data.passwordHash});var s=a.documentInDb;return _e(s)}throw o}function Nu(e,t){return e+"-"+t.version}function $o(e,t){return t=Re(t),t=Ap(e,t),t=wl(e.primaryPath,e.jsonSchema,t),t._meta=io(),t.hasOwnProperty("_deleted")||(t._deleted=!1),t.hasOwnProperty("_attachments")||(t._attachments={}),t.hasOwnProperty("_rev")||(t._rev=oo()),t}async function cv(e,t){t.multiInstance=e.multiInstance;var r=await e.storage.createStorageInstance(t);return r}async function Gl(e,t,r,n,i,o){var a=await Hl(e.statics,t),s=a.filter(f=>f.data.name===i),u=[];s.forEach(f=>{u.push({collectionName:f.data.name,schema:f.data.schema,isCollection:!0}),f.data.connectedStorages.forEach(h=>u.push({collectionName:h.collectionName,isCollection:!1,schema:h.schema}))});var c=new Set;if(u=u.filter(f=>{var h=f.collectionName+"||"+f.schema.version;return c.has(h)?!1:(c.add(h),!0)}),await Promise.all(u.map(async f=>{var h=await e.createStorageInstance({collectionName:f.collectionName,databaseInstanceToken:r,databaseName:n,multiInstance:!1,options:{},schema:f.schema,devMode:Ce.isDevMode()});await h.remove(),f.isCollection&&await Yn("postRemoveRxCollection",{storage:e,databaseName:n,collectionName:i})})),o){var l=s.map(f=>{var h=El(f);return h._deleted=!0,h._meta.lwt=ze(),h._rev=ia(r,f),{previous:f,document:h}});await t.bulkWrite(l,"rx-database-remove-collection-all")}}var lv=function(){function e(r,n,i){this.cacheItemByDocId=new Map,this.registry=typeof FinalizationRegistry=="function"?new FinalizationRegistry(o=>{var a=o.docId,s=this.cacheItemByDocId.get(a);s&&(s.documentByRevisionHeight.delete(o.revisionHeight),s.documentByRevisionHeight.size===0&&this.cacheItemByDocId.delete(a))}):void 0,this.primaryPath=r,this.changes$=n,this.documentCreator=i,n.subscribe(o=>{var a=o.documentId,s=this.cacheItemByDocId.get(a);if(s){var u=_l(o);s.latestDoc=u}})}var t=e.prototype;return t.getCachedRxDocument=function(n){var i=n[this.primaryPath],o=od(n._rev),a=br(this.cacheItemByDocId,i,()=>fv(n)),s=a.documentByRevisionHeight.get(o),u=s?s.deref():void 0;return u||(n=Ce.deepFreezeWhenDevMode(n),u=this.documentCreator(n),a.documentByRevisionHeight.set(o,dv(u)),this.registry&&this.registry.register(u,{docId:i,revisionHeight:o})),u},t.getLatestDocumentData=function(n){var i=$n(this.cacheItemByDocId,n);return i.latestDoc},t.getLatestDocumentDataIfExists=function(n){var i=this.cacheItemByDocId.get(n);if(i)return i.latestDoc},e}();function fv(e){return{documentByRevisionHeight:new Map,latestDoc:e}}var hv=typeof WeakRef=="function";function dv(e){return hv?new WeakRef(e):{deref(){return e}}}var pv=function(){function e(r){this.subs=[],this.limit=100,this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.collection=r,this.subs.push(this.collection.$.pipe(it(n=>!n.isLocal)).subscribe(n=>this._handleChangeEvent(n)))}var t=e.prototype;return t._handleChangeEvent=function(n){for(this.counter++,this.buffer.push(n),this.eventCounterMap.set(n,this.counter);this.buffer.length>this.limit;)this.buffer.shift()},t.getArrayIndexByPointer=function(n){var i=this.buffer[0],o=this.eventCounterMap.get(i);if(n<o)return null;var a=n-o;return a},t.getFrom=function(n){var i=[],o=this.getArrayIndexByPointer(n);if(o===null)return null;for(;;){var a=this.buffer[o];if(o++,a)i.push(a);else return i}},t.runFrom=function(n,i){var o=this.getFrom(n);if(o===null)throw new Error("out of bounds");o.forEach(a=>i(a))},t.reduceByLastOfDoc=function(n){return n.slice(0)},t.destroy=function(){this.subs.forEach(n=>n.unsubscribe())},e}();function mv(e){return new pv(e)}var yv=new WeakMap;function vv(e){var t=e.schema.getDocumentPrototype(),r=_v(e),n=Qn,i={};return[t,r,n].forEach(o=>{var a=Object.getOwnPropertyNames(o);a.forEach(s=>{var u=Object.getOwnPropertyDescriptor(o,s),c=!0;(s.startsWith("_")||s.endsWith("_")||s.startsWith("$")||s.endsWith("$"))&&(c=!1),typeof u.value=="function"?Object.defineProperty(i,s,{get(){return u.value.bind(this)},enumerable:c,configurable:!1}):(u.enumerable=c,u.configurable=!1,u.writable&&(u.writable=!1),Object.defineProperty(i,s,u))})}),i}function gv(e){return br(yv,e,()=>Ol(vv(e)))}function bv(e,t){var r=zp(gv(e),e,Ce.deepFreezeWhenDevMode(t));return e._runHooksSync("post","create",t,r),at("postCreateRxDocument",r),r}function _v(e){var t={};return Object.entries(e.methods).forEach(([r,n])=>{t[r]=n}),t}var Ql=function(e,t){return Tn(e.newDocumentState,e.realMasterState)?Promise.resolve({isEqual:!0}):Promise.resolve({isEqual:!1,documentData:e.realMasterState})},Vl=["pre","post"],Zl=["insert","save","remove","create"],Fu=!1,As=function(){function e(r,n,i,o,a={},s={},u={},c={},l={},f=Kl,h={},d=Ql){this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=Qy(),this.$={},this.checkpoint$={},this._changeEventBuffer={},this.onDestroy=[],this.destroyed=!1,this.database=r,this.name=n,this.schema=i,this.internalStorageInstance=o,this.instanceCreationOptions=a,this.migrationStrategies=s,this.methods=u,this.attachments=c,this.options=l,this.cacheReplacementPolicy=f,this.statics=h,this.conflictHandler=d,wv(this.asRxCollection)}var t=e.prototype;return t.prepare=async function(){this.storageInstance=Sl(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new jp(this.storageInstance,this.schema.primaryPath,(a,s)=>Dl(this,a,s),a=>this._runHooks("post","save",a));var n=this.database.eventBulks$.pipe(it(a=>a.collectionName===this.name));this.$=n.pipe(Gn(a=>a.events)),this.checkpoint$=n.pipe(Yt(a=>a.checkpoint)),this._changeEventBuffer=mv(this.asRxCollection),this._docCache=new lv(this.schema.primaryPath,this.$.pipe(it(a=>!a.isLocal)),a=>bv(this.asRxCollection,a));var i=await this.database.storageToken,o=this.storageInstance.changeStream().subscribe(a=>{var s={id:a.id,internal:!1,collectionName:this.name,storageToken:i,events:a.events.map(u=>$p(!1,u,this)),databaseToken:this.database.token,checkpoint:a.checkpoint,context:a.context};this.database.$emit(s)});return this._subs.push(o),this._subs.push(this.storageInstance.conflictResultionTasks().subscribe(a=>{this.conflictHandler(a.input,a.context).then(s=>{this.storageInstance.resolveConflictResultionTask({id:a.id,output:s})})})),ht},t.migrationNeeded=function(){throw ge("migration")},t.getDataMigrator=function(){throw ge("migration")},t.migrate=function(n=10){return this.getDataMigrator().migrate(n)},t.migratePromise=function(n=10){return this.getDataMigrator().migratePromise(n)},t.insert=async function(n){var i=await this.bulkInsert([n]),o=i.error[0];ha(this,n[this.schema.primaryPath],n,o);var a=_e(i.success[0]);return a},t.bulkInsert=async function(n){if(n.length===0)return{success:[],error:[]};var i=this.schema.primaryPath,o=n.map(f=>{var h=$o(this.schema,f);return h}),a=this.hasHooks("pre","insert")?await Promise.all(o.map(f=>this._runHooks("pre","insert",f).then(()=>f))):o,s=new Map,u=a.map(f=>{s.set(f[i],f);var h={document:f};return h}),c=await this.storageInstance.bulkWrite(u,"rx-collection-bulk-insert"),l=Object.values(c.success).map(f=>this._docCache.getCachedRxDocument(f));return this.hasHooks("post","insert")&&await Promise.all(l.map(f=>this._runHooks("post","insert",s.get(f.primary),f))),{success:l,error:Object.values(c.error)}},t.bulkRemove=async function(n){if(n.length===0)return{success:[],error:[]};var i=await this.findByIds(n).exec(),o=[],a=new Map;Array.from(i.values()).forEach(f=>{var h=f.toMutableJSON(!0);o.push(h),a.set(f.primary,h)}),await Promise.all(o.map(f=>{var h=f[this.schema.primaryPath];return this._runHooks("pre","remove",f,i.get(h))}));var s=o.map(f=>{var h=Re(f);return h._deleted=!0,{previous:f,document:h}}),u=await this.storageInstance.bulkWrite(s,"rx-collection-bulk-remove"),c=Object.keys(u.success);await Promise.all(c.map(f=>this._runHooks("post","remove",a.get(f),i.get(f))));var l=c.map(f=>$n(i,f));return{success:l,error:Object.values(u.error)}},t.bulkUpsert=async function(n){var i=[],o=new Map;n.forEach(c=>{var l=$o(this.schema,c),f=l[this.schema.primaryPath];if(!f)throw W("COL3",{primaryPath:this.schema.primaryPath,data:l,schema:this.schema.jsonSchema});o.set(f,l),i.push(l)});var a=await this.bulkInsert(i),s=a.success.slice(0),u=await Promise.all(a.error.map(async c=>{if(c.status!==409)throw W("VD2",{collection:this.name,writeError:c});var l=c.documentId,f=$n(o,l),h=_e(c.documentInDb),d=this._docCache.getCachedRxDocument(h),y=await d.incrementalModify(()=>f);return y}));return no(s,u),s},t.upsert=function(n){return this.bulkUpsert([n]).then(i=>i[0])},t.incrementalUpsert=function(n){var i=$o(this.schema,n),o=i[this.schema.primaryPath];if(!o)throw W("COL4",{data:n});var a=this._incrementalUpsertQueues.get(o);return a||(a=ht),a=a.then(()=>xv(this,o,i)).then(s=>s.inserted?s.doc:kv(s.doc,i)),this._incrementalUpsertQueues.set(o,a),a},t.find=function(n){if(typeof n=="string")throw W("COL5",{queryObj:n});n||(n=Ei());var i=mn("find",n,this);return i},t.findOne=function(n){var i;if(typeof n=="string")i=mn("findOne",{selector:{[this.schema.primaryPath]:n},limit:1},this);else{if(n||(n=Ei()),n.limit)throw W("QU6");n.limit=1,i=mn("findOne",n,this)}if(typeof n=="number"||Array.isArray(n))throw et("COL6",{queryObj:n});return i},t.count=function(n){n||(n=Ei());var i=mn("count",n,this);return i},t.findByIds=function(n){var i={selector:{[this.schema.primaryPath]:{$in:n.slice(0)}}},o=mn("findByIds",i,this);return o},t.exportJSON=function(){throw ge("json-dump")},t.importJSON=function(n){throw ge("json-dump")},t.insertCRDT=function(n){throw ge("crdt")},t.addHook=function(n,i,o,a=!1){if(typeof o!="function")throw et("COL7",{key:i,when:n});if(!Vl.includes(n))throw et("COL8",{key:i,when:n});if(!Zl.includes(i))throw W("COL9",{key:i});if(n==="post"&&i==="create"&&a===!0)throw W("COL10",{when:n,key:i,parallel:a});var s=o.bind(this),u=a?"parallel":"series";this.hooks[i]=this.hooks[i]||{},this.hooks[i][n]=this.hooks[i][n]||{series:[],parallel:[]},this.hooks[i][n][u].push(s)},t.getHooks=function(n,i){return!this.hooks[i]||!this.hooks[i][n]?{series:[],parallel:[]}:this.hooks[i][n]},t.hasHooks=function(n,i){var o=this.getHooks(n,i);return o?o.series.length>0||o.parallel.length>0:!1},t._runHooks=function(n,i,o,a){var s=this.getHooks(n,i);if(!s)return ht;var u=s.series.map(c=>()=>c(o,a));return xd(u).then(()=>Promise.all(s.parallel.map(c=>c(o,a))))},t._runHooksSync=function(n,i,o,a){var s=this.getHooks(n,i);s&&s.series.forEach(u=>u(o,a))},t.promiseWait=function(n){var i=new Promise(o=>{var a=setTimeout(()=>{this.timeouts.delete(a),o()},n);this.timeouts.add(a)});return i},t.destroy=function(){return this.destroyed?qt:(this.destroyed=!0,Array.from(this.timeouts).forEach(n=>clearTimeout(n)),this._changeEventBuffer&&this._changeEventBuffer.destroy(),this.database.requestIdlePromise().then(()=>Promise.all(this.onDestroy.map(n=>n()))).then(()=>this.storageInstance.close()).then(()=>(this._subs.forEach(n=>n.unsubscribe()),delete this.database.collections[this.name],Yn("postDestroyRxCollection",this).then(()=>!0))))},t.remove=async function(){await this.destroy(),await Gl(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.hashFunction)},sn(e,[{key:"insert$",get:function(){return this.$.pipe(it(r=>r.operation==="INSERT"))}},{key:"update$",get:function(){return this.$.pipe(it(r=>r.operation==="UPDATE"))}},{key:"remove$",get:function(){return this.$.pipe(it(r=>r.operation==="DELETE"))}},{key:"asRxCollection",get:function(){return this}}]),e}();function wv(e){if(!Fu){Fu=!0;var t=Object.getPrototypeOf(e);Zl.forEach(r=>{Vl.map(n=>{var i=n+qc(r);t[i]=function(o,a){return this.addHook(n,r,o,a)}})})}}function kv(e,t){return e.incrementalModify(r=>t)}function xv(e,t,r){var n=e._docCache.getLatestDocumentDataIfExists(t);return n?Promise.resolve({doc:e._docCache.getCachedRxDocument(n),inserted:!1}):e.findOne(t).exec().then(i=>i?{doc:i,inserted:!1}:e.insert(r).then(o=>({doc:o,inserted:!0})))}function Ev({database:e,name:t,schema:r,instanceCreationOptions:n={},migrationStrategies:i={},autoMigrate:o=!0,statics:a={},methods:s={},attachments:u={},options:c={},localDocuments:l=!1,cacheReplacementPolicy:f=Kl,conflictHandler:h=Ql}){var d={databaseInstanceToken:e.token,databaseName:e.name,collectionName:t,schema:r.jsonSchema,options:n,multiInstance:e.multiInstance,password:e.password,devMode:Ce.isDevMode()};return at("preCreateRxStorageInstance",d),cv(e,d).then(y=>{var p=new As(e,t,r,y,n,i,s,u,c,f,a,h);return p.prepare().then(()=>{Object.entries(a).forEach(([m,g])=>{Object.defineProperty(p,m,{get:()=>g.bind(p)})});var b=ht;return o&&p.schema.version!==0&&(b=p.migratePromise()),b}).then(()=>(at("createRxCollection",{collection:p,creator:{name:t,schema:r,storageInstance:y,instanceCreationOptions:n,migrationStrategies:i,methods:s,attachments:u,options:c,cacheReplacementPolicy:f,localDocuments:l,statics:a}}),p)).catch(b=>y.close().then(()=>Promise.reject(b)))})}var Xl=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this._parallels=t||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map};Xl.prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,Sa(this)},wrapCall:function(t){var r=this;this.lock();var n;try{n=t()}catch(i){throw this.unlock(),i}return!n.then||typeof n.then!="function"?(this.unlock(),n):n.then(function(i){return r.unlock(),i}).catch(function(i){throw r.unlock(),i})},requestIdlePromise:function(t){var r=this;t=t||{};var n,i=new Promise(function(s){return n=s}),o=function(){Mo(r,i),n()};if(i._manRes=o,t.timeout){var a=setTimeout(function(){i._manRes()},t.timeout);i._timeoutObj=a}return this._iC.add(i),Sa(this),i},cancelIdlePromise:function(t){Mo(this,t)},requestIdleCallback:function(t,r){var n=this._lHN++,i=this.requestIdlePromise(r);return this._hPM.set(n,i),this._pHM.set(i,n),i.then(function(){return t()}),n},cancelIdleCallback:function(t){var r=this._hPM.get(t);this.cancelIdlePromise(r)},clear:function(){var t=this;this._iC.forEach(function(r){return Mo(t,r)}),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}};function Sv(e){if(e._iC.size!==0){var t=e._iC.values(),r=t.next().value;r._manRes(),setTimeout(function(){return Sa(e)},0)}}function Mo(e,t){if(t){if(t._timeoutObj&&clearTimeout(t._timeoutObj),e._pHM.has(t)){var r=e._pHM.get(t);e._hPM.delete(r),e._pHM.delete(t)}e._iC.delete(t)}}function Sa(e){e._tryIR||e._iC.size===0||(e._tryIR=!0,setTimeout(function(){if(!e.isIdle()){e._tryIR=!1;return}setTimeout(function(){if(!e.isIdle()){e._tryIR=!1;return}Sv(e),e._tryIR=!1},0)},0))}var Is=function(){function e(t){this.ttl=t,this.map=new Map,this._to=!1}return e.prototype.has=function(t){return this.map.has(t)},e.prototype.add=function(t){var r=this;this.map.set(t,Jl()),this._to||(this._to=!0,setTimeout(function(){r._to=!1,Ov(r)},0))},e.prototype.clear=function(){this.map.clear()},e}();function Ov(e){for(var t=Jl()-e.ttl,r=e.map[Symbol.iterator]();;){var n=r.next().value;if(!n)return;var i=n[0],o=n[1];if(o<t)e.map.delete(i);else return}}function Jl(){return new Date().getTime()}var ji=new Set,Rs=function(){function e(r,n,i,o,a,s,u=!1,c={},l,f,h,d){this.idleQueue=new Xl,this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onDestroy=[],this.destroyed=!1,this.collections={},this.eventBulks$=new Zt,this.observable$=this.eventBulks$.pipe(Gn(y=>y.events)),this.storageToken=qt,this.storageTokenDocument=qt,this.emittedEventBulkIds=new Is(60*1e3),this.name=r,this.token=n,this.storage=i,this.instanceCreationOptions=o,this.password=a,this.multiInstance=s,this.eventReduce=u,this.options=c,this.internalStore=l,this.hashFunction=f,this.cleanupPolicy=h,this.allowSlowCount=d,this.name!=="pseudoInstance"&&(this.internalStore=Sl(this.asRxDatabase,l,Ps),this.storageTokenDocument=uv(this.asRxDatabase).catch(y=>this.startupErrors.push(y)),this.storageToken=this.storageTokenDocument.then(y=>y.data.token).catch(y=>this.startupErrors.push(y)))}var t=e.prototype;return t.$emit=function(n){this.emittedEventBulkIds.has(n.id)||(this.emittedEventBulkIds.add(n.id),this.eventBulks$.next(n))},t.removeCollectionDoc=async function(n,i){var o=await Tp(this.internalStore,Ea(Nu(n,i),xn));if(!o)throw W("SNH",{name:n,schema:i});var a=El(o);a._deleted=!0,await this.internalStore.bulkWrite([{document:a,previous:o}],"rx-database-remove-collection")},t.addCollections=async function(n){var i={},o={},a=[],s={};Object.entries(n).forEach(([l,f])=>{var h=l,d=f.schema;i[h]=d;var y=qp(d,this.hashFunction);if(o[h]=y,this.collections[l])throw W("DB3",{name:l});var p=Nu(l,d),b={id:Ea(p,xn),key:p,context:xn,data:{name:h,schemaHash:y.hash,schema:y.jsonSchema,version:y.version,connectedStorages:[]},_deleted:!1,_meta:io(),_rev:oo(),_attachments:{}};a.push({document:b});var m=Object.assign({},f,{name:h,schema:y,database:this}),g=Re(f);g.database=this,g.name=l,at("preCreateRxCollection",g),m.conflictHandler=g.conflictHandler,s[h]=m});var u=await this.internalStore.bulkWrite(a,"rx-database-add-collection");await Av(this),Object.entries(u.error).forEach(([l,f])=>{if(f.status!==409)throw W("DB12",{database:this.name,writeError:f});var h=_e(f.documentInDb),d=h.data.name,y=o[d];if(h.data.schemaHash!==y.hash)throw W("DB6",{database:this.name,collection:d,previousSchemaHash:h.data.schemaHash,schemaHash:y.hash,previousSchema:h.data.schema,schema:_e(i[d])})});var c={};return await Promise.all(Object.keys(n).map(async l=>{var f=s[l],h=await Ev(f);c[l]=h,this.collections[l]=h,this[l]||Object.defineProperty(this,l,{get:()=>this.collections[l]})})),c},t.lockedRun=function(n){return this.idleQueue.wrapCall(n)},t.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},t.exportJSON=function(n){throw ge("json-dump")},t.importJSON=function(n){throw ge("json-dump")},t.backup=function(n){throw ge("backup")},t.leaderElector=function(){throw ge("leader-election")},t.isLeader=function(){throw ge("leader-election")},t.waitForLeadership=function(){throw ge("leader-election")},t.migrationStates=function(){throw ge("migration")},t.destroy=async function(){return this.destroyed||(this.destroyed=!0,await Yn("preDestroyRxDatabase",this),this.eventBulks$.complete(),this._subs.map(n=>n.unsubscribe()),this.name==="pseudoInstance")?qt:this.requestIdlePromise().then(()=>Promise.all(this.onDestroy.map(n=>n()))).then(()=>Promise.all(Object.keys(this.collections).map(n=>this.collections[n]).map(n=>n.destroy()))).then(()=>this.internalStore.close()).then(()=>ji.delete(this.name)).then(()=>!0)},t.remove=function(){return this.destroy().then(()=>Pv(this.name,this.storage))},sn(e,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}]),e}();function Cv(e){if(ji.has(e))throw W("DB8",{name:e,link:"https://pubkey.github.io/rxdb/rx-database.html#ignoreduplicate"})}async function ef(e,t,r,n,i,o){var a=await t.createStorageInstance({databaseInstanceToken:e,databaseName:r,collectionName:Rp,schema:Ps,options:n,multiInstance:i,password:o,devMode:Ce.isDevMode()});return a}function Dv({storage:e,instanceCreationOptions:t,name:r,password:n,multiInstance:i=!0,eventReduce:o=!1,ignoreDuplicate:a=!1,options:s={},cleanupPolicy:u,allowSlowCount:c=!1,localDocuments:l=!1,hashFunction:f=kn}){at("preCreateRxDatabase",{storage:e,instanceCreationOptions:t,name:r,password:n,multiInstance:i,eventReduce:o,ignoreDuplicate:a,options:s,localDocuments:l}),a||Cv(r),ji.add(r);var h=ao(10);return ef(h,e,r,t,i,n).catch(d=>{throw ji.delete(r),d}).then(d=>{var y=new Rs(r,h,e,t,n,i,o,s,d,f,u,c);return Yn("createRxDatabase",{database:y,creator:{storage:e,instanceCreationOptions:t,name:r,password:n,multiInstance:i,eventReduce:o,ignoreDuplicate:a,options:s,localDocuments:l}}).then(()=>y)})}async function Pv(e,t){var r=ao(10),n=await ef(r,t,e,{},!1),i=await Hl(t.statics,n),o=new Set;i.forEach(s=>o.add(s.data.name));var a=Array.from(o);return await Promise.all(a.map(s=>Gl(t,n,r,e,s))),await Yn("postRemoveRxDatabase",{databaseName:e,storage:t}),await n.remove(),a}async function Av(e){if(await e.storageToken,e.startupErrors[0])throw e.startupErrors[0]}var Iv={RxSchema:Pl.prototype,RxDocument:Qn,RxQuery:Wl.prototype,RxCollection:As.prototype,RxDatabase:Rs.prototype},Bo=new Set,Lu=new Set;function tf(e){if(at("preAddRxPlugin",{plugin:e,plugins:Bo}),!Bo.has(e)){{if(Lu.has(e.name))throw W("PL3",{name:e.name,plugin:e});Bo.add(e),Lu.add(e.name)}if(!e.rxdb)throw et("PL1",{plugin:e});e.init&&e.init(),e.prototypes&&Object.entries(e.prototypes).forEach(([t,r])=>r(Iv[t])),e.overwritable&&Object.assign(Ce,e.overwritable),e.hooks&&Object.entries(e.hooks).forEach(([t,r])=>{r.after&&Bn[t].push(r.after),r.before&&Bn[t].unshift(r.before)})}}var Rv={prepareQuery(e,t){if(!t.sort)throw W("SNH",{query:t});var r=Nm(e,t);return{query:t,queryPlan:r}},checkpointSchema:Ip};function Tv(e){return e&&typeof e.then=="function"}Promise.resolve(!1);Promise.resolve(!0);var fr=Promise.resolve();function rf(e,t){return e||(e=0),new Promise(function(r){return setTimeout(function(){return r(t)},e)})}function $v(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function Ts(){return Math.random().toString(36).substring(2)}var ju=0,No=0;function fo(){var e=new Date().getTime();return e===ju?(No++,e*1e3+No):(ju=e,No=0,e*1e3)}var Mv=fo,Bv="native";function Nv(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(r){t.messagesCallback&&t.messagesCallback(r.data)},t}function Fv(e){e.bc.close(),e.subFns=[]}function Lv(e,t){try{return e.bc.postMessage(t,!1),fr}catch(r){return Promise.reject(r)}}function jv(e,t){e.messagesCallback=t}function Uv(){if((typeof window<"u"||typeof self<"u")&&typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function zv(){return 150}var Kv={create:Nv,close:Fv,onMessage:jv,postMessage:Lv,canBeUsed:Uv,type:Bv,averageResponseTime:zv,microSeconds:Mv};function $s(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return typeof t.webWorkerSupport>"u"&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=1e3*45),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&typeof e.idb.onclose=="function"&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=1e3*60),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=1e3*60*2),t.node.maxParallelWrites||(t.node.maxParallelWrites=2048),typeof t.node.useFastPath>"u"&&(t.node.useFastPath=!0),t}var Wv=fo,qv="pubkey.broadcast-channel-0-",$t="messages",ho={durability:"relaxed"},Hv="idb";function nf(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function Ms(e){e.commit&&e.commit()}function Yv(e){var t=nf(),r=qv+e,n=t.open(r);return n.onupgradeneeded=function(i){var o=i.target.result;o.createObjectStore($t,{keyPath:"id",autoIncrement:!0})},new Promise(function(i,o){n.onerror=function(a){return o(a)},n.onsuccess=function(){i(n.result)}})}function Gv(e,t,r){var n=new Date().getTime(),i={uuid:t,time:n,data:r},o=e.transaction([$t],"readwrite",ho);return new Promise(function(a,s){o.oncomplete=function(){return a()},o.onerror=function(c){return s(c)};var u=o.objectStore($t);u.add(i),Ms(o)})}function Qv(e,t){var r=e.transaction($t,"readonly",ho),n=r.objectStore($t),i=[],o=IDBKeyRange.bound(t+1,1/0);if(n.getAll){var a=n.getAll(o);return new Promise(function(u,c){a.onerror=function(l){return c(l)},a.onsuccess=function(l){u(l.target.result)}})}function s(){try{return o=IDBKeyRange.bound(t+1,1/0),n.openCursor(o)}catch{return n.openCursor()}}return new Promise(function(u,c){var l=s();l.onerror=function(f){return c(f)},l.onsuccess=function(f){var h=f.target.result;h?h.value.id<t+1?h.continue(t+1):(i.push(h.value),h.continue()):(Ms(r),u(i))}})}function Vv(e,t){if(e.closed)return Promise.resolve([]);var r=e.db.transaction($t,"readwrite",ho),n=r.objectStore($t);return Promise.all(t.map(function(i){var o=n.delete(i);return new Promise(function(a){o.onsuccess=function(){return a()}})}))}function Zv(e,t){var r=new Date().getTime()-t,n=e.transaction($t,"readonly",ho),i=n.objectStore($t),o=[];return new Promise(function(a){i.openCursor().onsuccess=function(s){var u=s.target.result;if(u){var c=u.value;c.time<r?(o.push(c),u.continue()):(Ms(n),a(o))}else a(o)}})}function Xv(e){return Zv(e.db,e.options.idb.ttl).then(function(t){return Vv(e,t.map(function(r){return r.id}))})}function Jv(e,t){return t=$s(t),Yv(e).then(function(r){var n={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:Ts(),eMIs:new Is(t.idb.ttl*2),writeBlockPromise:fr,messagesCallback:null,readQueuePromises:[],db:r};return r.onclose=function(){n.closed=!0,t.idb.onclose&&t.idb.onclose()},of(n),n})}function of(e){e.closed||af(e).then(function(){return rf(e.options.idb.fallbackInterval)}).then(function(){return of(e)})}function eg(e,t){return!(e.uuid===t.uuid||t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime)}function af(e){return e.closed||!e.messagesCallback?fr:Qv(e.db,e.lastCursorId).then(function(t){var r=t.filter(function(n){return!!n}).map(function(n){return n.id>e.lastCursorId&&(e.lastCursorId=n.id),n}).filter(function(n){return eg(n,e)}).sort(function(n,i){return n.time-i.time});return r.forEach(function(n){e.messagesCallback&&(e.eMIs.add(n.id),e.messagesCallback(n.data))}),fr})}function tg(e){e.closed=!0,e.db.close()}function rg(e,t){return e.writeBlockPromise=e.writeBlockPromise.then(function(){return Gv(e.db,e.uuid,t)}).then(function(){$v(0,10)===0&&Xv(e)}),e.writeBlockPromise}function ng(e,t,r){e.messagesCallbackTime=r,e.messagesCallback=t,af(e)}function ig(){return!!nf()}function og(e){return e.idb.fallbackInterval*2}var ag={create:Jv,close:tg,onMessage:ng,postMessage:rg,canBeUsed:ig,type:Hv,averageResponseTime:og,microSeconds:Wv},sg=fo,ug="pubkey.broadcastChannel-",cg="localstorage";function sf(){var e;if(typeof window>"u")return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return e}function uf(e){return ug+e}function lg(e,t){return new Promise(function(r){rf().then(function(){var n=uf(e.channelName),i={token:Ts(),time:new Date().getTime(),data:t,uuid:e.uuid},o=JSON.stringify(i);sf().setItem(n,o);var a=document.createEvent("Event");a.initEvent("storage",!0,!0),a.key=n,a.newValue=o,window.dispatchEvent(a),r()})})}function fg(e,t){var r=uf(e),n=function(o){o.key===r&&t(JSON.parse(o.newValue))};return window.addEventListener("storage",n),n}function hg(e){window.removeEventListener("storage",e)}function dg(e,t){if(t=$s(t),!cf())throw new Error("BroadcastChannel: localstorage cannot be used");var r=Ts(),n=new Is(t.localstorage.removeTimeout),i={channelName:e,uuid:r,eMIs:n};return i.listener=fg(e,function(o){i.messagesCallback&&o.uuid!==r&&(!o.token||n.has(o.token)||o.data.time&&o.data.time<i.messagesCallbackTime||(n.add(o.token),i.messagesCallback(o.data)))}),i}function pg(e){hg(e.listener)}function mg(e,t,r){e.messagesCallbackTime=r,e.messagesCallback=t}function cf(){var e=sf();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch{return!1}return!0}function yg(){var e=120,t=navigator.userAgent.toLowerCase();return t.includes("safari")&&!t.includes("chrome")?e*2:e}var vg={create:dg,close:pg,onMessage:mg,postMessage:lg,canBeUsed:cf,type:cg,averageResponseTime:yg,microSeconds:sg},gg=fo,bg="simulate",Bs=new Set;function _g(e){var t={name:e,messagesCallback:null};return Bs.add(t),t}function wg(e){Bs.delete(e)}function kg(e,t){return new Promise(function(r){return setTimeout(function(){var n=Array.from(Bs);n.filter(function(i){return i.name===e.name}).filter(function(i){return i!==e}).filter(function(i){return!!i.messagesCallback}).forEach(function(i){return i.messagesCallback(t)}),r()},5)})}function xg(e,t){e.messagesCallback=t}function Eg(){return!0}function Sg(){return 5}var Og={create:_g,close:wg,onMessage:xg,postMessage:kg,canBeUsed:Eg,type:bg,averageResponseTime:Sg,microSeconds:gg},Uu=[Kv,ag,vg];function Cg(e){var t=[].concat(e.methods,Uu).filter(Boolean);if(e.type){if(e.type==="simulate")return Og;var r=t.find(function(i){return i.type===e.type});if(r)return r;throw new Error("method-type "+e.type+" not found")}e.webWorkerSupport||(t=t.filter(function(i){return i.type!=="idb"}));var n=t.find(function(i){return i.canBeUsed()});if(n)return n;throw new Error("No usable method found in "+JSON.stringify(Uu.map(function(i){return i.type})))}var lf=new Set,Dg=0,Ns=function(t,r){this.id=Dg++,lf.add(this),this.name=t,zu&&(r=zu),this.options=$s(r),this.method=Cg(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,Pg(this)};Ns._pubkey=!0;var zu;Ns.prototype={postMessage:function(t){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(t));return Ku(this,"message",t)},postInternal:function(t){return Ku(this,"internal",t)},set onmessage(e){var t=this.method.microSeconds(),r={time:t,fn:e};qu(this,"message",this._onML),e&&typeof e=="function"?(this._onML=r,Wu(this,"message",r)):this._onML=null},addEventListener:function(t,r){var n=this.method.microSeconds(),i={time:n,fn:r};Wu(this,t,i)},removeEventListener:function(t,r){var n=this._addEL[t].find(function(i){return i.fn===r});qu(this,t,n)},close:function(){var t=this;if(!this.closed){lf.delete(this),this.closed=!0;var r=this._prepP?this._prepP:fr;return this._onML=null,this._addEL.message=[],r.then(function(){return Promise.all(Array.from(t._uMP))}).then(function(){return Promise.all(t._befC.map(function(n){return n()}))}).then(function(){return t.method.close(t._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function Ku(e,t,r){var n=e.method.microSeconds(),i={time:n,type:t,data:r},o=e._prepP?e._prepP:fr;return o.then(function(){var a=e.method.postMessage(e._state,i);return e._uMP.add(a),a.catch().then(function(){return e._uMP.delete(a)}),a})}function Pg(e){var t=e.method.create(e.name,e.options);Tv(t)?(e._prepP=t,t.then(function(r){e._state=r})):e._state=t}function ff(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function Wu(e,t,r){e._addEL[t].push(r),Ag(e)}function qu(e,t,r){e._addEL[t]=e._addEL[t].filter(function(n){return n!==r}),Ig(e)}function Ag(e){if(!e._iL&&ff(e)){var t=function(i){e._addEL[i.type].forEach(function(o){var a=1e5,s=o.time-a;i.time>=s&&o.fn(i.data)})},r=e.method.microSeconds();e._prepP?e._prepP.then(function(){e._iL=!0,e.method.onMessage(e._state,t,r)}):(e._iL=!0,e.method.onMessage(e._state,t,r))}}function Ig(e){if(e._iL&&!ff(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}var Ui=new Map;function Rg(e,t,r){var n=Ui.get(e);return n||(n={bc:new Ns("RxDB:"+t),refs:new Set},Ui.set(e,n)),n.refs.add(r),n.bc}function Hu(e,t){var r=Ui.get(e);if(r&&(r.refs.delete(t),r.refs.size===0))return Ui.delete(e),r.bc.close()}function Tg(e,t,r,n){if(t.multiInstance){var i=n||Rg(t.databaseInstanceToken,r.databaseName,r),o=new Zt,a=h=>{h.storageName===e&&h.databaseName===t.databaseName&&h.collectionName===t.collectionName&&h.version===t.schema.version&&o.next(h.eventBulk)};i.addEventListener("message",a);var s=r.changeStream(),u=!1,c=s.subscribe(h=>{u||i.postMessage({storageName:e,databaseName:t.databaseName,collectionName:t.collectionName,version:t.schema.version,eventBulk:h})});r.changeStream=function(){return o.asObservable().pipe(xp(s))};var l=r.close.bind(r);r.close=async function(){return u=!0,c.unsubscribe(),i.removeEventListener("message",a),n||await Hu(t.databaseInstanceToken,r),l()};var f=r.remove.bind(r);r.remove=async function(){return u=!0,c.unsubscribe(),i.removeEventListener("message",a),n||await Hu(t.databaseInstanceToken,r),f()}}}const ye=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Oe=Object.keys,je=Array.isArray;function We(e,t){return typeof t!="object"||Oe(t).forEach(function(r){e[r]=t[r]}),e}typeof Promise>"u"||ye.Promise||(ye.Promise=Promise);const rn=Object.getPrototypeOf,$g={}.hasOwnProperty;function rt(e,t){return $g.call(e,t)}function nn(e,t){typeof t=="function"&&(t=t(rn(e))),(typeof Reflect>"u"?Oe:Reflect.ownKeys)(t).forEach(r=>{Pt(e,r,t[r])})}const hf=Object.defineProperty;function Pt(e,t,r,n){hf(e,t,We(r&&rt(r,"get")&&typeof r.get=="function"?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},n))}function Wr(e){return{from:function(t){return e.prototype=Object.create(t.prototype),Pt(e.prototype,"constructor",e),{extend:nn.bind(null,e.prototype)}}}}const Mg=Object.getOwnPropertyDescriptor;function Fs(e,t){let r;return Mg(e,t)||(r=rn(e))&&Fs(r,t)}const Bg=[].slice;function zi(e,t,r){return Bg.call(e,t,r)}function df(e,t){return t(e)}function _n(e){if(!e)throw new Error("Assertion Failed")}function pf(e){ye.setImmediate?setImmediate(e):setTimeout(e,0)}function mf(e,t){return e.reduce((r,n,i)=>{var o=t(n,i);return o&&(r[o[0]]=o[1]),r},{})}function At(e,t){if(rt(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var r=[],n=0,i=t.length;n<i;++n){var o=At(e,t[n]);r.push(o)}return r}var a=t.indexOf(".");if(a!==-1){var s=e[t.substr(0,a)];return s===void 0?void 0:At(s,t.substr(a+1))}}function ot(e,t,r){if(e&&t!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){_n(typeof r!="string"&&"length"in r);for(var n=0,i=t.length;n<i;++n)ot(e,t[n],r[n])}else{var o=t.indexOf(".");if(o!==-1){var a=t.substr(0,o),s=t.substr(o+1);if(s==="")r===void 0?je(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=r;else{var u=e[a];u&&rt(e,a)||(u=e[a]={}),ot(u,s,r)}}else r===void 0?je(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=r}}function yf(e){var t={};for(var r in e)rt(e,r)&&(t[r]=e[r]);return t}const Ng=[].concat;function vf(e){return Ng.apply([],e)}const gf="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(vf([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(e=>ye[e]),Fg=gf.map(e=>ye[e]);mf(gf,e=>[e,!0]);let Ut=null;function Jn(e){Ut=typeof WeakMap<"u"&&new WeakMap;const t=Oa(e);return Ut=null,t}function Oa(e){if(!e||typeof e!="object")return e;let t=Ut&&Ut.get(e);if(t)return t;if(je(e)){t=[],Ut&&Ut.set(e,t);for(var r=0,n=e.length;r<n;++r)t.push(Oa(e[r]))}else if(Fg.indexOf(e.constructor)>=0)t=e;else{const o=rn(e);for(var i in t=o===Object.prototype?{}:Object.create(o),Ut&&Ut.set(e,t),e)rt(e,i)&&(t[i]=Oa(e[i]))}return t}const{toString:Lg}={};function Ca(e){return Lg.call(e).slice(8,-1)}const Da=typeof Symbol<"u"?Symbol.iterator:"@@iterator",jg=typeof Da=="symbol"?function(e){var t;return e!=null&&(t=e[Da])&&t.apply(e)}:function(){return null},Mr={};function Et(e){var t,r,n,i;if(arguments.length===1){if(je(e))return e.slice();if(this===Mr&&typeof e=="string")return[e];if(i=jg(e)){for(r=[];!(n=i.next()).done;)r.push(n.value);return r}if(e==null)return[e];if(typeof(t=e.length)=="number"){for(r=new Array(t);t--;)r[t]=e[t];return r}return[e]}for(t=arguments.length,r=new Array(t);t--;)r[t]=arguments[t];return r}const Ls=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1;var yt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function bf(e,t){yt=e,_f=t}var _f=()=>!0;const Ug=!new Error("").stack;function Cr(){if(Ug)try{throw Cr.arguments,new Error}catch(e){return e}return new Error}function Pa(e,t){var r=e.stack;return r?(t=t||0,r.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),r.split(`
`).slice(t).filter(_f).map(n=>`
`+n).join("")):""}var wf=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],js=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(wf),zg={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function qr(e,t){this._e=Cr(),this.name=e,this.message=t}function kf(e,t){return e+". Errors: "+Object.keys(t).map(r=>t[r].toString()).filter((r,n,i)=>i.indexOf(r)===n).join(`
`)}function Ki(e,t,r,n){this._e=Cr(),this.failures=t,this.failedKeys=n,this.successCount=r,this.message=kf(e,t)}function En(e,t){this._e=Cr(),this.name="BulkError",this.failures=Object.keys(t).map(r=>t[r]),this.failuresByPos=t,this.message=kf(e,t)}Wr(qr).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Pa(this._e,2))}},toString:function(){return this.name+": "+this.message}}),Wr(Ki).from(qr),Wr(En).from(qr);var Us=js.reduce((e,t)=>(e[t]=t+"Error",e),{});const Kg=qr;var oe=js.reduce((e,t)=>{var r=t+"Error";function n(i,o){this._e=Cr(),this.name=r,i?typeof i=="string"?(this.message=`${i}${o?`
 `+o:""}`,this.inner=o||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=zg[t]||r,this.inner=null)}return Wr(n).from(Kg),e[t]=n,e},{});oe.Syntax=SyntaxError,oe.Type=TypeError,oe.Range=RangeError;var Yu=wf.reduce((e,t)=>(e[t+"Error"]=oe[t],e),{}),Si=js.reduce((e,t)=>(["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=oe[t]),e),{});function pe(){}function Un(e){return e}function Wg(e,t){return e==null||e===Un?t:function(r){return t(e(r))}}function kr(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function qg(e,t){return e===pe?t:function(){var r=e.apply(this,arguments);r!==void 0&&(arguments[0]=r);var n=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?kr(n,this.onsuccess):n),i&&(this.onerror=this.onerror?kr(i,this.onerror):i),o!==void 0?o:r}}function Hg(e,t){return e===pe?t:function(){e.apply(this,arguments);var r=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?kr(r,this.onsuccess):r),n&&(this.onerror=this.onerror?kr(n,this.onerror):n)}}function Yg(e,t){return e===pe?t:function(r){var n=e.apply(this,arguments);We(r,n);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?kr(i,this.onsuccess):i),o&&(this.onerror=this.onerror?kr(o,this.onerror):o),n===void 0?a===void 0?void 0:a:We(n,a)}}function Gg(e,t){return e===pe?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function zs(e,t){return e===pe?t:function(){var r=e.apply(this,arguments);if(r&&typeof r.then=="function"){for(var n=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return r.then(function(){return t.apply(n,o)})}return t.apply(this,arguments)}}Si.ModifyError=Ki,Si.DexieError=qr,Si.BulkError=En;var zn={};const[Aa,Wi,Ia]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,rn(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,rn(t),e]})(),xf=Wi&&Wi.then,Oi=Aa&&Aa.constructor,Ks=!!Ia;var Ra=!1,Qg=Ia?()=>{Ia.then(li)}:ye.setImmediate?setImmediate.bind(null,li):ye.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{li(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(li,0)},Sn=function(e,t){wn.push([e,t]),qi&&(Qg(),qi=!1)},Ta=!0,qi=!0,hr=[],Ci=[],$a=null,Ma=Un,Hr={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Qu,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{Qu(e[0],e[1])}catch{}})}},re=Hr,wn=[],dr=0,Di=[];function J(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=pe,this._lib=!1;var t=this._PSD=re;if(yt&&(this._stackHolder=Cr(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==zn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Na(this,this._value))}this._state=null,this._value=null,++t.ref,Sf(this,e)}const Ba={get:function(){var e=re,t=Hi;function r(n,i){var o=!e.global&&(e!==re||t!==Hi);const a=o&&!Mt();var s=new J((u,c)=>{Ws(this,new Ef(Yi(n,e,o,a),Yi(i,e,o,a),u,c,e))});return yt&&Df(s,this),s}return r.prototype=zn,r},set:function(e){Pt(this,"then",e&&e.prototype===zn?Ba:{get:function(){return e},set:Ba.set})}};function Ef(e,t,r,n,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=r,this.reject=n,this.psd=i}function Sf(e,t){try{t(r=>{if(e._state===null){if(r===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&ei();r&&typeof r.then=="function"?Sf(e,(i,o)=>{r instanceof J?r._then(i,o):r.then(i,o)}):(e._state=!0,e._value=r,Of(e)),n&&ti()}},Na.bind(null,e))}catch(r){Na(e,r)}}function Na(e,t){if(Ci.push(t),e._state===null){var r=e._lib&&ei();t=Ma(t),e._state=!1,e._value=t,yt&&t!==null&&typeof t=="object"&&!t._promise&&function(n,i,o){try{n.apply(null,o)}catch(a){i&&i(a)}}(()=>{var n=Fs(t,"stack");t._promise=e,Pt(t,"stack",{get:()=>Ra?n&&(n.get?n.get.apply(t):n.value):e.stack})}),function(n){hr.some(i=>i._value===n._value)||hr.push(n)}(e),Of(e),r&&ti()}}function Of(e){var t=e._listeners;e._listeners=[];for(var r=0,n=t.length;r<n;++r)Ws(e,t[r]);var i=e._PSD;--i.ref||i.finalize(),dr===0&&(++dr,Sn(()=>{--dr==0&&qs()},[]))}function Ws(e,t){if(e._state!==null){var r=e._state?t.onFulfilled:t.onRejected;if(r===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++dr,Sn(Vg,[r,e,t])}else e._listeners.push(t)}function Vg(e,t,r){try{$a=t;var n,i=t._value;t._state?n=e(i):(Ci.length&&(Ci=[]),n=e(i),Ci.indexOf(i)===-1&&function(o){for(var a=hr.length;a;)if(hr[--a]._value===o._value)return void hr.splice(a,1)}(t)),r.resolve(n)}catch(o){r.reject(o)}finally{$a=null,--dr==0&&qs(),--r.psd.ref||r.psd.finalize()}}function Cf(e,t,r){if(t.length===r)return t;var n="";if(e._state===!1){var i,o,a=e._value;a!=null?(i=a.name||"Error",o=a.message||a,n=Pa(a,0)):(i=a,o=""),t.push(i+(o?": "+o:"")+n)}return yt&&((n=Pa(e._stackHolder,2))&&t.indexOf(n)===-1&&t.push(n),e._prev&&Cf(e._prev,t,r)),t}function Df(e,t){var r=t?t._numPrev+1:0;r<100&&(e._prev=t,e._numPrev=r)}function li(){ei()&&ti()}function ei(){var e=Ta;return Ta=!1,qi=!1,e}function ti(){var e,t,r;do for(;wn.length>0;)for(e=wn,wn=[],r=e.length,t=0;t<r;++t){var n=e[t];n[0].apply(null,n[1])}while(wn.length>0);Ta=!0,qi=!0}function qs(){var e=hr;hr=[],e.forEach(n=>{n._PSD.onunhandled.call(null,n._value,n)});for(var t=Di.slice(0),r=t.length;r;)t[--r]()}function fi(e){return new J(zn,!1,e)}function ve(e,t){var r=re;return function(){var n=ei(),i=re;try{return er(r,!0),e.apply(this,arguments)}catch(o){t&&t(o)}finally{er(i,!1),n&&ti()}}}nn(J.prototype,{then:Ba,_then:function(e,t){Ws(this,new Ef(null,null,e,t,re))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],r=arguments[1];return typeof t=="function"?this.then(null,n=>n instanceof t?r(n):fi(n)):this.then(null,n=>n&&n.name===t?r(n):fi(n))},finally:function(e){return this.then(t=>(e(),t),t=>(e(),fi(t)))},stack:{get:function(){if(this._stack)return this._stack;try{Ra=!0;var e=Cf(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{Ra=!1}}},timeout:function(e,t){return e<1/0?new J((r,n)=>{var i=setTimeout(()=>n(new oe.Timeout(t)),e);this.then(r,n).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Pt(J.prototype,Symbol.toStringTag,"Dexie.Promise"),Hr.env=Pf(),nn(J,{all:function(){var e=Et.apply(null,arguments).map(hi);return new J(function(t,r){e.length===0&&t([]);var n=e.length;e.forEach((i,o)=>J.resolve(i).then(a=>{e[o]=a,--n||t(e)},r))})},resolve:e=>{if(e instanceof J)return e;if(e&&typeof e.then=="function")return new J((r,n)=>{e.then(r,n)});var t=new J(zn,!0,e);return Df(t,$a),t},reject:fi,race:function(){var e=Et.apply(null,arguments).map(hi);return new J((t,r)=>{e.map(n=>J.resolve(n).then(t,r))})},PSD:{get:()=>re,set:e=>re=e},totalEchoes:{get:()=>Hi},newPSD:Jt,usePSD:fn,scheduler:{get:()=>Sn,set:e=>{Sn=e}},rejectionMapper:{get:()=>Ma,set:e=>{Ma=e}},follow:(e,t)=>new J((r,n)=>Jt((i,o)=>{var a=re;a.unhandleds=[],a.onunhandled=o,a.finalize=kr(function(){(function(s){function u(){s(),Di.splice(Di.indexOf(u),1)}Di.push(u),++dr,Sn(()=>{--dr==0&&qs()},[])})(()=>{this.unhandleds.length===0?i():o(this.unhandleds[0])})},a.finalize),e()},t,r,n))}),Oi&&(Oi.allSettled&&Pt(J,"allSettled",function(){const e=Et.apply(null,arguments).map(hi);return new J(t=>{e.length===0&&t([]);let r=e.length;const n=new Array(r);e.forEach((i,o)=>J.resolve(i).then(a=>n[o]={status:"fulfilled",value:a},a=>n[o]={status:"rejected",reason:a}).then(()=>--r||t(n)))})}),Oi.any&&typeof AggregateError<"u"&&Pt(J,"any",function(){const e=Et.apply(null,arguments).map(hi);return new J((t,r)=>{e.length===0&&r(new AggregateError([]));let n=e.length;const i=new Array(n);e.forEach((o,a)=>J.resolve(o).then(s=>t(s),s=>{i[a]=s,--n||r(new AggregateError(i))}))})}));const Le={awaits:0,echoes:0,id:0};var Zg=0,Pi=[],Fo=0,Hi=0,Xg=0;function Jt(e,t,r,n){var i=re,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++Xg;var a=Hr.env;o.env=Ks?{Promise:J,PromiseProp:{value:J,configurable:!0,writable:!0},all:J.all,race:J.race,allSettled:J.allSettled,any:J.any,resolve:J.resolve,reject:J.reject,nthen:Gu(a.nthen,o),gthen:Gu(a.gthen,o)}:{},t&&We(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=fn(o,e,r,n);return o.ref===0&&o.finalize(),s}function ln(){return Le.id||(Le.id=++Zg),++Le.awaits,Le.echoes+=100,Le.id}function Mt(){return!!Le.awaits&&(--Le.awaits==0&&(Le.id=0),Le.echoes=100*Le.awaits,!0)}function hi(e){return Le.echoes&&e&&e.constructor===Oi?(ln(),e.then(t=>(Mt(),t),t=>(Mt(),Pe(t)))):e}function Jg(e){++Hi,Le.echoes&&--Le.echoes!=0||(Le.echoes=Le.id=0),Pi.push(re),er(e,!0)}function eb(){var e=Pi[Pi.length-1];Pi.pop(),er(e,!1)}function er(e,t){var r=re;if((t?!Le.echoes||Fo++&&e===re:!Fo||--Fo&&e===re)||Af(t?Jg.bind(null,e):eb),e!==re&&(re=e,r===Hr&&(Hr.env=Pf()),Ks)){var n=Hr.env.Promise,i=e.env;Wi.then=i.nthen,n.prototype.then=i.gthen,(r.global||e.global)&&(Object.defineProperty(ye,"Promise",i.PromiseProp),n.all=i.all,n.race=i.race,n.resolve=i.resolve,n.reject=i.reject,i.allSettled&&(n.allSettled=i.allSettled),i.any&&(n.any=i.any))}}function Pf(){var e=ye.Promise;return Ks?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(ye,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Wi.then,gthen:e.prototype.then}:{}}function fn(e,t,r,n,i){var o=re;try{return er(e,!0),t(r,n,i)}finally{er(o,!1)}}function Af(e){xf.call(Aa,e)}function Yi(e,t,r,n){return typeof e!="function"?e:function(){var i=re;r&&ln(),er(t,!0);try{return e.apply(this,arguments)}finally{er(i,!1),n&&Af(Mt)}}}function Gu(e,t){return function(r,n){return e.call(this,Yi(r,t),Yi(n,t))}}(""+xf).indexOf("[native code]")===-1&&(ln=Mt=pe);function Qu(e,t){var r;try{r=t.onuncatched(e)}catch{}if(r!==!1)try{var n,i={promise:t,reason:e};if(ye.document&&document.createEvent?((n=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),We(n,i)):ye.CustomEvent&&We(n=new CustomEvent("unhandledrejection",{detail:i}),i),n&&ye.dispatchEvent&&(dispatchEvent(n),!ye.PromiseRejectionEvent&&ye.onunhandledrejection))try{ye.onunhandledrejection(n)}catch{}yt&&n&&!n.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var Pe=J.reject;function Fa(e,t,r,n){if(e.idbdb&&(e._state.openComplete||re.letThrough||e._vip)){var i=e._createTransaction(t,r,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===Us.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>Fa(e,t,r,n))):Pe(o)}return i._promise(t,(o,a)=>Jt(()=>(re.trans=i,n(o,a,i)))).then(o=>i._completion.then(()=>o))}if(e._state.openComplete)return Pe(new oe.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return Pe(new oe.DatabaseClosed);e.open().catch(pe)}return e._state.dbReadyPromise.then(()=>Fa(e,t,r,n))}const cr=String.fromCharCode(65535),bt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",On=[],po=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),tb=po,rb=po,If=e=>!/(dexie\.js|dexie\.min\.js)/.test(e);function xr(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const Rf={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function di(e){return typeof e!="string"||/\./.test(e)?t=>t:t=>(t[e]===void 0&&e in t&&delete(t=Jn(t))[e],t)}function nb(){throw oe.Type()}class ib{_trans(t,r,n){const i=this._tx||re.trans,o=this.name;function a(u,c,l){if(!l.schema[o])throw new oe.NotFound("Table "+o+" not part of transaction");return r(l.idbtrans,l)}const s=ei();try{return i&&i.db===this.db?i===re.trans?i._promise(t,a,n):Jt(()=>i._promise(t,a,n),{trans:i,transless:re.transless||re}):Fa(this.db,t,[this.name],a)}finally{s&&ti()}}get(t,r){return t&&t.constructor===Object?this.where(t).first(r):this._trans("readonly",n=>this.core.get({trans:n,key:t}).then(i=>this.hook.reading.fire(i))).then(r)}where(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(je(t))return new this.db.WhereClause(this,`[${t.join("+")}]`);const r=Oe(t);if(r.length===1)return this.where(r[0]).equals(t[r[0]]);const n=this.schema.indexes.concat(this.schema.primKey).filter(c=>c.compound&&r.every(l=>c.keyPath.indexOf(l)>=0)&&c.keyPath.every(l=>r.indexOf(l)>=0))[0];if(n&&this.db._maxKey!==cr)return this.where(n.name).equals(n.keyPath.map(c=>t[c]));!n&&yt&&console.warn(`The query ${JSON.stringify(t)} on ${this.name} would benefit of a compound index [${r.join("+")}]`);const{idxByName:i}=this.schema,o=this.db._deps.indexedDB;function a(c,l){try{return o.cmp(c,l)===0}catch{return!1}}const[s,u]=r.reduce(([c,l],f)=>{const h=i[f],d=t[f];return[c||h,c||!h?xr(l,h&&h.multi?y=>{const p=At(y,f);return je(p)&&p.some(b=>a(d,b))}:y=>a(d,At(y,f))):l]},[null,null]);return s?this.where(s.name).equals(t[s.keyPath]).filter(u):n?this.filter(u):this.where(r).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,je(t)?`[${t.join("+")}]`:t))}reverse(){return this.toCollection().reverse()}mapToClass(t){const{db:r,name:n}=this;this.schema.mappedClass=t,t.prototype instanceof nb&&(t=class extends t{get db(){return r}table(){return n}});const i=new Set;for(let a=t.prototype;a;a=rn(a))Object.getOwnPropertyNames(a).forEach(s=>i.add(s));const o=a=>{if(!a)return a;const s=Object.create(t.prototype);for(let u in a)if(!i.has(u))try{s[u]=a[u]}catch{}return s};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=o,this.hook("reading",o),t}defineClass(){return this.mapToClass(function(t){We(this,t)})}add(t,r){const{auto:n,keyPath:i}=this.schema.primKey;let o=t;return i&&n&&(o=di(i)(t)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"add",keys:r!=null?[r]:null,values:[o]})).then(a=>a.numFailures?J.reject(a.failures[0]):a.lastResult).then(a=>{if(i)try{ot(t,i,a)}catch{}return a})}update(t,r){if(typeof t!="object"||je(t))return this.where(":id").equals(t).modify(r);{const n=At(t,this.schema.primKey.keyPath);if(n===void 0)return Pe(new oe.InvalidArgument("Given object does not contain its primary key"));try{typeof r!="function"?Oe(r).forEach(i=>{ot(t,i,r[i])}):r(t,{value:t,primKey:n})}catch{}return this.where(":id").equals(n).modify(r)}}put(t,r){const{auto:n,keyPath:i}=this.schema.primKey;let o=t;return i&&n&&(o=di(i)(t)),this._trans("readwrite",a=>this.core.mutate({trans:a,type:"put",values:[o],keys:r!=null?[r]:null})).then(a=>a.numFailures?J.reject(a.failures[0]):a.lastResult).then(a=>{if(i)try{ot(t,i,a)}catch{}return a})}delete(t){return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:[t]})).then(r=>r.numFailures?J.reject(r.failures[0]):void 0)}clear(){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"deleteRange",range:Rf})).then(t=>t.numFailures?J.reject(t.failures[0]):void 0)}bulkGet(t){return this._trans("readonly",r=>this.core.getMany({keys:t,trans:r}).then(n=>n.map(i=>this.hook.reading.fire(i))))}bulkAdd(t,r,n){const i=Array.isArray(r)?r:void 0,o=(n=n||(i?void 0:r))?n.allKeys:void 0;return this._trans("readwrite",a=>{const{auto:s,keyPath:u}=this.schema.primKey;if(u&&i)throw new oe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new oe.InvalidArgument("Arguments objects and keys must have the same length");const c=t.length;let l=u&&s?t.map(di(u)):t;return this.core.mutate({trans:a,type:"add",keys:i,values:l,wantResults:o}).then(({numFailures:f,results:h,lastResult:d,failures:y})=>{if(f===0)return o?h:d;throw new En(`${this.name}.bulkAdd(): ${f} of ${c} operations failed`,y)})})}bulkPut(t,r,n){const i=Array.isArray(r)?r:void 0,o=(n=n||(i?void 0:r))?n.allKeys:void 0;return this._trans("readwrite",a=>{const{auto:s,keyPath:u}=this.schema.primKey;if(u&&i)throw new oe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new oe.InvalidArgument("Arguments objects and keys must have the same length");const c=t.length;let l=u&&s?t.map(di(u)):t;return this.core.mutate({trans:a,type:"put",keys:i,values:l,wantResults:o}).then(({numFailures:f,results:h,lastResult:d,failures:y})=>{if(f===0)return o?h:d;throw new En(`${this.name}.bulkPut(): ${f} of ${c} operations failed`,y)})})}bulkDelete(t){const r=t.length;return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:t})).then(({numFailures:n,lastResult:i,failures:o})=>{if(n===0)return i;throw new En(`${this.name}.bulkDelete(): ${n} of ${r} operations failed`,o)})}}function Cn(e){var t={},r=function(s,u){if(u){for(var c=arguments.length,l=new Array(c-1);--c;)l[c-1]=arguments[c];return t[s].subscribe.apply(null,l),e}if(typeof s=="string")return t[s]};r.addEventType=o;for(var n=1,i=arguments.length;n<i;++n)o(arguments[n]);return r;function o(s,u,c){if(typeof s=="object")return a(s);u||(u=Gg),c||(c=pe);var l={subscribers:[],fire:c,subscribe:function(f){l.subscribers.indexOf(f)===-1&&(l.subscribers.push(f),l.fire=u(l.fire,f))},unsubscribe:function(f){l.subscribers=l.subscribers.filter(function(h){return h!==f}),l.fire=l.subscribers.reduce(u,c)}};return t[s]=r[s]=l,l}function a(s){Oe(s).forEach(function(u){var c=s[u];if(je(c))o(u,s[u][0],s[u][1]);else{if(c!=="asap")throw new oe.InvalidArgument("Invalid event config");var l=o(u,Un,function(){for(var f=arguments.length,h=new Array(f);f--;)h[f]=arguments[f];l.subscribers.forEach(function(d){pf(function(){d.apply(null,h)})})})}})}}function yn(e,t){return Wr(t).from({prototype:e}),t}function Ar(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Lo(e,t){e.filter=xr(e.filter,t)}function jo(e,t,r){var n=e.replayFilter;e.replayFilter=n?()=>xr(n(),t()):t,e.justLimit=r&&!n}function Ai(e,t){if(e.isPrimKey)return t.primaryKey;const r=t.getIndexByKeyPath(e.index);if(!r)throw new oe.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return r}function Vu(e,t,r){const n=Ai(e,t.schema);return t.openCursor({trans:r,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:n,range:e.range}})}function pi(e,t,r,n){const i=e.replayFilter?xr(e.filter,e.replayFilter()):e.filter;if(e.or){const o={},a=(s,u,c)=>{if(!i||i(u,c,h=>u.stop(h),h=>u.fail(h))){var l=u.primaryKey,f=""+l;f==="[object ArrayBuffer]"&&(f=""+new Uint8Array(l)),rt(o,f)||(o[f]=!0,t(s,u,c))}};return Promise.all([e.or._iterate(a,r),Zu(Vu(e,n,r),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return Zu(Vu(e,n,r),xr(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Zu(e,t,r,n){var i=ve(n?(o,a,s)=>r(n(o),a,s):r);return e.then(o=>{if(o)return o.start(()=>{var a=()=>o.continue();t&&!t(o,s=>a=s,s=>{o.stop(s),a=pe},s=>{o.fail(s),a=pe})||i(o.value,o,s=>a=s),a()})})}function Ke(e,t){try{const r=Xu(e),n=Xu(t);if(r!==n)return r==="Array"?1:n==="Array"?-1:r==="binary"?1:n==="binary"?-1:r==="string"?1:n==="string"?-1:r==="Date"?1:n!=="Date"?NaN:-1;switch(r){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(i,o){const a=i.length,s=o.length,u=a<s?a:s;for(let c=0;c<u;++c)if(i[c]!==o[c])return i[c]<o[c]?-1:1;return a===s?0:a<s?-1:1}(Ju(e),Ju(t));case"Array":return function(i,o){const a=i.length,s=o.length,u=a<s?a:s;for(let c=0;c<u;++c){const l=Ke(i[c],o[c]);if(l!==0)return l}return a===s?0:a<s?-1:1}(e,t)}}catch{}return NaN}function Xu(e){const t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";const r=Ca(e);return r==="ArrayBuffer"?"binary":r}function Ju(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class ob{_read(t,r){var n=this._ctx;return n.error?n.table._trans(null,Pe.bind(null,n.error)):n.table._trans("readonly",t).then(r)}_write(t){var r=this._ctx;return r.error?r.table._trans(null,Pe.bind(null,r.error)):r.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var r=this._ctx;r.algorithm=xr(r.algorithm,t)}_iterate(t,r){return pi(this._ctx,t,r,this._ctx.table.core)}clone(t){var r=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return t&&We(n,t),r._ctx=n,r}raw(){return this._ctx.valueMapper=null,this}each(t){var r=this._ctx;return this._read(n=>pi(r,t,n,r.table.core))}count(t){return this._read(r=>{const n=this._ctx,i=n.table.core;if(Ar(n,!0))return i.count({trans:r,query:{index:Ai(n,i.schema),range:n.range}}).then(a=>Math.min(a,n.limit));var o=0;return pi(n,()=>(++o,!1),r,i).then(()=>o)}).then(t)}sortBy(t,r){const n=t.split(".").reverse(),i=n[0],o=n.length-1;function a(c,l){return l?a(c[n[l]],l-1):c[i]}var s=this._ctx.dir==="next"?1:-1;function u(c,l){var f=a(c,o),h=a(l,o);return f<h?-s:f>h?s:0}return this.toArray(function(c){return c.sort(u)}).then(r)}toArray(t){return this._read(r=>{var n=this._ctx;if(n.dir==="next"&&Ar(n,!0)&&n.limit>0){const{valueMapper:i}=n,o=Ai(n,n.table.core.schema);return n.table.core.query({trans:r,limit:n.limit,values:!0,query:{index:o,range:n.range}}).then(({result:a})=>i?a.map(i):a)}{const i=[];return pi(n,o=>i.push(o),r,n.table.core).then(()=>i)}},t)}offset(t){var r=this._ctx;return t<=0||(r.offset+=t,Ar(r)?jo(r,()=>{var n=t;return(i,o)=>n===0||(n===1?(--n,!1):(o(()=>{i.advance(n),n=0}),!1))}):jo(r,()=>{var n=t;return()=>--n<0})),this}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),jo(this._ctx,()=>{var r=t;return function(n,i,o){return--r<=0&&i(o),r>=0}},!0),this}until(t,r){return Lo(this._ctx,function(n,i,o){return!t(n.value)||(i(o),r)}),this}first(t){return this.limit(1).toArray(function(r){return r[0]}).then(t)}last(t){return this.reverse().first(t)}filter(t){var r,n;return Lo(this._ctx,function(i){return t(i.value)}),r=this._ctx,n=t,r.isMatch=xr(r.isMatch,n),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(n,i){t(i.key,i)})}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(n,i){t(i.primaryKey,i)})}keys(t){var r=this._ctx;r.keysOnly=!r.isMatch;var n=[];return this.each(function(i,o){n.push(o.key)}).then(function(){return n}).then(t)}primaryKeys(t){var r=this._ctx;if(r.dir==="next"&&Ar(r,!0)&&r.limit>0)return this._read(i=>{var o=Ai(r,r.table.core.schema);return r.table.core.query({trans:i,values:!1,limit:r.limit,query:{index:o,range:r.range}})}).then(({result:i})=>i).then(t);r.keysOnly=!r.isMatch;var n=[];return this.each(function(i,o){n.push(o.primaryKey)}).then(function(){return n}).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys(function(r){return r[0]}).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,r=t.index&&t.table.schema.idxByName[t.index];if(!r||!r.multi)return this;var n={};return Lo(this._ctx,function(i){var o=i.primaryKey.toString(),a=rt(n,o);return n[o]=!0,!a}),this}modify(t){var r=this._ctx;return this._write(n=>{var i;if(typeof t=="function")i=t;else{var o=Oe(t),a=o.length;i=function(p){for(var b=!1,m=0;m<a;++m){var g=o[m],w=t[g];At(p,g)!==w&&(ot(p,g,w),b=!0)}return b}}const s=r.table.core,{outbound:u,extractKey:c}=s.schema.primaryKey,l=this.db._options.modifyChunkSize||200,f=[];let h=0;const d=[],y=(p,b)=>{const{failures:m,numFailures:g}=b;h+=p-g;for(let w of Oe(m))f.push(m[w])};return this.clone().primaryKeys().then(p=>{const b=m=>{const g=Math.min(l,p.length-m);return s.getMany({trans:n,keys:p.slice(m,m+g),cache:"immutable"}).then(w=>{const x=[],k=[],D=u?[]:null,E=[];for(let P=0;P<g;++P){const N=w[P],Y={value:Jn(N),primKey:p[m+P]};i.call(Y,Y.value,Y)!==!1&&(Y.value==null?E.push(p[m+P]):u||Ke(c(N),c(Y.value))===0?(k.push(Y.value),u&&D.push(p[m+P])):(E.push(p[m+P]),x.push(Y.value)))}const A=Ar(r)&&r.limit===1/0&&(typeof t!="function"||t===Uo)&&{index:r.index,range:r.range};return Promise.resolve(x.length>0&&s.mutate({trans:n,type:"add",values:x}).then(P=>{for(let N in P.failures)E.splice(parseInt(N),1);y(x.length,P)})).then(()=>(k.length>0||A&&typeof t=="object")&&s.mutate({trans:n,type:"put",keys:D,values:k,criteria:A,changeSpec:typeof t!="function"&&t}).then(P=>y(k.length,P))).then(()=>(E.length>0||A&&t===Uo)&&s.mutate({trans:n,type:"delete",keys:E,criteria:A}).then(P=>y(E.length,P))).then(()=>p.length>m+g&&b(m+l))})};return b(0).then(()=>{if(f.length>0)throw new Ki("Error modifying one or more objects",f,h,d);return p.length})})})}delete(){var t=this._ctx,r=t.range;return Ar(t)&&(t.isPrimKey&&!rb||r.type===3)?this._write(n=>{const{primaryKey:i}=t.table.core.schema,o=r;return t.table.core.count({trans:n,query:{index:i,range:o}}).then(a=>t.table.core.mutate({trans:n,type:"deleteRange",range:o}).then(({failures:s,lastResult:u,results:c,numFailures:l})=>{if(l)throw new Ki("Could not delete some values",Object.keys(s).map(f=>s[f]),a-l);return a-l}))}):this.modify(Uo)}}const Uo=(e,t)=>t.value=null;function ab(e,t){return e<t?-1:e===t?0:1}function sb(e,t){return e>t?-1:e===t?0:1}function Ge(e,t,r){var n=e instanceof $f?new e.Collection(e):e;return n._ctx.error=r?new r(t):new TypeError(t),n}function Ir(e){return new e.Collection(e,()=>Tf("")).limit(0)}function ub(e,t,r,n,i,o){for(var a=Math.min(e.length,n.length),s=-1,u=0;u<a;++u){var c=t[u];if(c!==n[u])return i(e[u],r[u])<0?e.substr(0,u)+r[u]+r.substr(u+1):i(e[u],n[u])<0?e.substr(0,u)+n[u]+r.substr(u+1):s>=0?e.substr(0,s)+t[s]+r.substr(s+1):null;i(e[u],c)<0&&(s=u)}return a<n.length&&o==="next"?e+r.substr(e.length):a<e.length&&o==="prev"?e.substr(0,r.length):s<0?null:e.substr(0,s)+n[s]+r.substr(s+1)}function mi(e,t,r,n){var i,o,a,s,u,c,l,f=r.length;if(!r.every(p=>typeof p=="string"))return Ge(e,"String expected.");function h(p){i=function(m){return m==="next"?g=>g.toUpperCase():g=>g.toLowerCase()}(p),o=function(m){return m==="next"?g=>g.toLowerCase():g=>g.toUpperCase()}(p),a=p==="next"?ab:sb;var b=r.map(function(m){return{lower:o(m),upper:i(m)}}).sort(function(m,g){return a(m.lower,g.lower)});s=b.map(function(m){return m.upper}),u=b.map(function(m){return m.lower}),c=p,l=p==="next"?"":n}h("next");var d=new e.Collection(e,()=>jt(s[0],u[f-1]+n));d._ondirectionchange=function(p){h(p)};var y=0;return d._addAlgorithm(function(p,b,m){var g=p.key;if(typeof g!="string")return!1;var w=o(g);if(t(w,u,y))return!0;for(var x=null,k=y;k<f;++k){var D=ub(g,w,s[k],u[k],a,c);D===null&&x===null?y=k+1:(x===null||a(x,D)>0)&&(x=D)}return b(x!==null?function(){p.continue(x+l)}:m),!1}),d}function jt(e,t,r,n){return{type:2,lower:e,upper:t,lowerOpen:r,upperOpen:n}}function Tf(e){return{type:1,lower:e,upper:e}}class $f{get Collection(){return this._ctx.table.db.Collection}between(t,r,n,i){n=n!==!1,i=i===!0;try{return this._cmp(t,r)>0||this._cmp(t,r)===0&&(n||i)&&(!n||!i)?Ir(this):new this.Collection(this,()=>jt(t,r,!n,!i))}catch{return Ge(this,bt)}}equals(t){return t==null?Ge(this,bt):new this.Collection(this,()=>Tf(t))}above(t){return t==null?Ge(this,bt):new this.Collection(this,()=>jt(t,void 0,!0))}aboveOrEqual(t){return t==null?Ge(this,bt):new this.Collection(this,()=>jt(t,void 0,!1))}below(t){return t==null?Ge(this,bt):new this.Collection(this,()=>jt(void 0,t,!1,!0))}belowOrEqual(t){return t==null?Ge(this,bt):new this.Collection(this,()=>jt(void 0,t))}startsWith(t){return typeof t!="string"?Ge(this,"String expected."):this.between(t,t+cr,!0,!0)}startsWithIgnoreCase(t){return t===""?this.startsWith(t):mi(this,(r,n)=>r.indexOf(n[0])===0,[t],cr)}equalsIgnoreCase(t){return mi(this,(r,n)=>r===n[0],[t],"")}anyOfIgnoreCase(){var t=Et.apply(Mr,arguments);return t.length===0?Ir(this):mi(this,(r,n)=>n.indexOf(r)!==-1,t,"")}startsWithAnyOfIgnoreCase(){var t=Et.apply(Mr,arguments);return t.length===0?Ir(this):mi(this,(r,n)=>n.some(i=>r.indexOf(i)===0),t,cr)}anyOf(){const t=Et.apply(Mr,arguments);let r=this._cmp;try{t.sort(r)}catch{return Ge(this,bt)}if(t.length===0)return Ir(this);const n=new this.Collection(this,()=>jt(t[0],t[t.length-1]));n._ondirectionchange=o=>{r=o==="next"?this._ascending:this._descending,t.sort(r)};let i=0;return n._addAlgorithm((o,a,s)=>{const u=o.key;for(;r(u,t[i])>0;)if(++i,i===t.length)return a(s),!1;return r(u,t[i])===0||(a(()=>{o.continue(t[i])}),!1)}),n}notEqual(t){return this.inAnyRange([[-(1/0),t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const t=Et.apply(Mr,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return Ge(this,bt)}const r=t.reduce((n,i)=>n?n.concat([[n[n.length-1][1],i]]):[[-(1/0),i]],null);return r.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(r,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,r){const n=this._cmp,i=this._ascending,o=this._descending,a=this._min,s=this._max;if(t.length===0)return Ir(this);if(!t.every(g=>g[0]!==void 0&&g[1]!==void 0&&i(g[0],g[1])<=0))return Ge(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",oe.InvalidArgument);const u=!r||r.includeLowers!==!1,c=r&&r.includeUppers===!0;let l,f=i;function h(g,w){return f(g[0],w[0])}try{l=t.reduce(function(g,w){let x=0,k=g.length;for(;x<k;++x){const D=g[x];if(n(w[0],D[1])<0&&n(w[1],D[0])>0){D[0]=a(D[0],w[0]),D[1]=s(D[1],w[1]);break}}return x===k&&g.push(w),g},[]),l.sort(h)}catch{return Ge(this,bt)}let d=0;const y=c?g=>i(g,l[d][1])>0:g=>i(g,l[d][1])>=0,p=u?g=>o(g,l[d][0])>0:g=>o(g,l[d][0])>=0;let b=y;const m=new this.Collection(this,()=>jt(l[0][0],l[l.length-1][1],!u,!c));return m._ondirectionchange=g=>{g==="next"?(b=y,f=i):(b=p,f=o),l.sort(h)},m._addAlgorithm((g,w,x)=>{for(var k=g.key;b(k);)if(++d,d===l.length)return w(x),!1;return!!function(D){return!y(D)&&!p(D)}(k)||(this._cmp(k,l[d][1])===0||this._cmp(k,l[d][0])===0||w(()=>{f===i?g.continue(l[d][0]):g.continue(l[d][1])}),!1)}),m}startsWithAnyOf(){const t=Et.apply(Mr,arguments);return t.every(r=>typeof r=="string")?t.length===0?Ir(this):this.inAnyRange(t.map(r=>[r,r+cr])):Ge(this,"startsWithAnyOf() only works with strings")}}function ft(e){return ve(function(t){return Kn(t),e(t.target.error),!1})}function Kn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const tr=Cn(null,"storagemutated");class cb{_lock(){return _n(!re.global),++this._reculock,this._reculock!==1||re.global||(re.lockOwnerFor=this),this}_unlock(){if(_n(!re.global),--this._reculock==0)for(re.global||(re.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{fn(t[1],t[0])}catch{}}return this}_locked(){return this._reculock&&re.lockOwnerFor!==this}create(t){if(!this.mode)return this;const r=this.db.idbdb,n=this.db._state.dbOpenError;if(_n(!this.idbtrans),!t&&!r)switch(n&&n.name){case"DatabaseClosedError":throw new oe.DatabaseClosed(n);case"MissingAPIError":throw new oe.MissingAPI(n.message,n);default:throw new oe.OpenFailed(n)}if(!this.active)throw new oe.TransactionInactive;return _n(this._completion._state===null),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=ve(i=>{Kn(i),this._reject(t.error)}),t.onabort=ve(i=>{Kn(i),this.active&&this._reject(new oe.Abort(t.error)),this.active=!1,this.on("abort").fire(i)}),t.oncomplete=ve(()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&tr.storagemutated.fire(t.mutatedParts)}),this}_promise(t,r,n){if(t==="readwrite"&&this.mode!=="readwrite")return Pe(new oe.ReadOnly("Transaction is readonly"));if(!this.active)return Pe(new oe.TransactionInactive);if(this._locked())return new J((o,a)=>{this._blockedFuncs.push([()=>{this._promise(t,r,n).then(o,a)},re])});if(n)return Jt(()=>{var o=new J((a,s)=>{this._lock();const u=r(a,s,this);u&&u.then&&u.then(a,s)});return o.finally(()=>this._unlock()),o._lib=!0,o});var i=new J((o,a)=>{var s=r(o,a,this);s&&s.then&&s.then(o,a)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(t){var r=this._root();const n=J.resolve(t);if(r._waitingFor)r._waitingFor=r._waitingFor.then(()=>n);else{r._waitingFor=n,r._waitingQueue=[];var i=r.idbtrans.objectStore(r.storeNames[0]);(function a(){for(++r._spinCount;r._waitingQueue.length;)r._waitingQueue.shift()();r._waitingFor&&(i.get(-1/0).onsuccess=a)})()}var o=r._waitingFor;return new J((a,s)=>{n.then(u=>r._waitingQueue.push(ve(a.bind(null,u))),u=>r._waitingQueue.push(ve(s.bind(null,u)))).finally(()=>{r._waitingFor===o&&(r._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new oe.Abort))}table(t){const r=this._memoizedTables||(this._memoizedTables={});if(rt(r,t))return r[t];const n=this.schema[t];if(!n)throw new oe.NotFound("Table "+t+" not part of transaction");const i=new this.db.Table(t,n,this);return i.core=this.db.core.table(t),r[t]=i,i}}function La(e,t,r,n,i,o,a){return{name:e,keyPath:t,unique:r,multi:n,auto:i,compound:o,src:(r&&!a?"&":"")+(n?"*":"")+(i?"++":"")+Mf(t)}}function Mf(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Bf(e,t,r){return{name:e,primKey:t,indexes:r,mappedClass:null,idxByName:mf(r,n=>[n.name,n])}}let Wn=e=>{try{return e.only([[]]),Wn=()=>[[]],[[]]}catch{return Wn=()=>cr,cr}};function ja(e){return e==null?()=>{}:typeof e=="string"?function(t){return t.split(".").length===1?r=>r[t]:r=>At(r,t)}(e):t=>At(t,e)}function ec(e){return[].slice.call(e)}let lb=0;function Dn(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function fb(e,t,r){function n(u){if(u.type===3)return null;if(u.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:c,upper:l,lowerOpen:f,upperOpen:h}=u;return c===void 0?l===void 0?null:t.upperBound(l,!!h):l===void 0?t.lowerBound(c,!!f):t.bound(c,l,!!f,!!h)}const{schema:i,hasGetAll:o}=function(u,c){const l=ec(u.objectStoreNames);return{schema:{name:u.name,tables:l.map(f=>c.objectStore(f)).map(f=>{const{keyPath:h,autoIncrement:d}=f,y=je(h),p=h==null,b={},m={name:f.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:p,compound:y,keyPath:h,autoIncrement:d,unique:!0,extractKey:ja(h)},indexes:ec(f.indexNames).map(g=>f.index(g)).map(g=>{const{name:w,unique:x,multiEntry:k,keyPath:D}=g,E={name:w,compound:je(D),keyPath:D,unique:x,multiEntry:k,extractKey:ja(D)};return b[Dn(D)]=E,E}),getIndexByKeyPath:g=>b[Dn(g)]};return b[":id"]=m.primaryKey,h!=null&&(b[Dn(h)]=m.primaryKey),m})},hasGetAll:l.length>0&&"getAll"in c.objectStore(l[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,r),a=i.tables.map(u=>function(c){const l=c.name;return{name:l,schema:c,mutate:function({trans:f,type:h,keys:d,values:y,range:p}){return new Promise((b,m)=>{b=ve(b);const g=f.objectStore(l),w=g.keyPath==null,x=h==="put"||h==="add";if(!x&&h!=="delete"&&h!=="deleteRange")throw new Error("Invalid operation type: "+h);const{length:k}=d||y||{length:1};if(d&&y&&d.length!==y.length)throw new Error("Given keys array must have same length as given values array.");if(k===0)return b({numFailures:0,failures:{},results:[],lastResult:void 0});let D;const E=[],A=[];let P=0;const N=C=>{++P,Kn(C)};if(h==="deleteRange"){if(p.type===4)return b({numFailures:P,failures:A,results:[],lastResult:void 0});p.type===3?E.push(D=g.clear()):E.push(D=g.delete(n(p)))}else{const[C,$]=x?w?[y,d]:[y,null]:[d,null];if(x)for(let _=0;_<k;++_)E.push(D=$&&$[_]!==void 0?g[h](C[_],$[_]):g[h](C[_])),D.onerror=N;else for(let _=0;_<k;++_)E.push(D=g[h](C[_])),D.onerror=N}const Y=C=>{const $=C.target.result;E.forEach((_,M)=>_.error!=null&&(A[M]=_.error)),b({numFailures:P,failures:A,results:h==="delete"?d:E.map(_=>_.result),lastResult:$})};D.onerror=C=>{N(C),Y(C)},D.onsuccess=Y})},getMany:({trans:f,keys:h})=>new Promise((d,y)=>{d=ve(d);const p=f.objectStore(l),b=h.length,m=new Array(b);let g,w=0,x=0;const k=E=>{const A=E.target;m[A._pos]=A.result,++x===w&&d(m)},D=ft(y);for(let E=0;E<b;++E)h[E]!=null&&(g=p.get(h[E]),g._pos=E,g.onsuccess=k,g.onerror=D,++w);w===0&&d(m)}),get:({trans:f,key:h})=>new Promise((d,y)=>{d=ve(d);const p=f.objectStore(l).get(h);p.onsuccess=b=>d(b.target.result),p.onerror=ft(y)}),query:function(f){return h=>new Promise((d,y)=>{d=ve(d);const{trans:p,values:b,limit:m,query:g}=h,w=m===1/0?void 0:m,{index:x,range:k}=g,D=p.objectStore(l),E=x.isPrimaryKey?D:D.index(x.name),A=n(k);if(m===0)return d({result:[]});if(f){const P=b?E.getAll(A,w):E.getAllKeys(A,w);P.onsuccess=N=>d({result:N.target.result}),P.onerror=ft(y)}else{let P=0;const N=b||!("openKeyCursor"in E)?E.openCursor(A):E.openKeyCursor(A),Y=[];N.onsuccess=C=>{const $=N.result;return $?(Y.push(b?$.value:$.primaryKey),++P===m?d({result:Y}):void $.continue()):d({result:Y})},N.onerror=ft(y)}})}(o),openCursor:function({trans:f,values:h,query:d,reverse:y,unique:p}){return new Promise((b,m)=>{b=ve(b);const{index:g,range:w}=d,x=f.objectStore(l),k=g.isPrimaryKey?x:x.index(g.name),D=y?p?"prevunique":"prev":p?"nextunique":"next",E=h||!("openKeyCursor"in k)?k.openCursor(n(w),D):k.openKeyCursor(n(w),D);E.onerror=ft(m),E.onsuccess=ve(A=>{const P=E.result;if(!P)return void b(null);P.___id=++lb,P.done=!1;const N=P.continue.bind(P);let Y=P.continuePrimaryKey;Y&&(Y=Y.bind(P));const C=P.advance.bind(P),$=()=>{throw new Error("Cursor not stopped")};P.trans=f,P.stop=P.continue=P.continuePrimaryKey=P.advance=()=>{throw new Error("Cursor not started")},P.fail=ve(m),P.next=function(){let _=1;return this.start(()=>_--?this.continue():this.stop()).then(()=>this)},P.start=_=>{const M=new Promise((L,te)=>{L=ve(L),E.onerror=ft(te),P.fail=te,P.stop=j=>{P.stop=P.continue=P.continuePrimaryKey=P.advance=$,L(j)}}),V=()=>{if(E.result)try{_()}catch(L){P.fail(L)}else P.done=!0,P.start=()=>{throw new Error("Cursor behind last entry")},P.stop()};return E.onsuccess=ve(L=>{E.onsuccess=V,V()}),P.continue=N,P.continuePrimaryKey=Y,P.advance=C,V(),M},b(P)},m)})},count({query:f,trans:h}){const{index:d,range:y}=f;return new Promise((p,b)=>{const m=h.objectStore(l),g=d.isPrimaryKey?m:m.index(d.name),w=n(y),x=w?g.count(w):g.count();x.onsuccess=ve(k=>p(k.target.result)),x.onerror=ft(b)})}}}(u)),s={};return a.forEach(u=>s[u.name]=u),{stack:"dbcore",transaction:e.transaction.bind(e),table(u){if(!s[u])throw new Error(`Table '${u}' not found`);return s[u]},MIN_KEY:-1/0,MAX_KEY:Wn(t),schema:i}}function Ua({_novip:e},t){const r=t.db,n=function(i,o,{IDBKeyRange:a,indexedDB:s},u){return{dbcore:function(l,f){return f.reduce((h,{create:d})=>({...h,...d(h)}),l)}(fb(o,a,u),i.dbcore)}}(e._middlewares,r,e._deps,t);e.core=n.dbcore,e.tables.forEach(i=>{const o=i.name;e.core.schema.tables.some(a=>a.name===o)&&(i.core=e.core.table(o),e[o]instanceof e.Table&&(e[o].core=i.core))})}function Gi({_novip:e},t,r,n){r.forEach(i=>{const o=n[i];t.forEach(a=>{const s=Fs(a,i);(!s||"value"in s&&s.value===void 0)&&(a===e.Transaction.prototype||a instanceof e.Transaction?Pt(a,i,{get(){return this.table(i)},set(u){hf(this,i,{value:u,writable:!0,configurable:!0,enumerable:!0})}}):a[i]=new e.Table(i,o))})})}function za({_novip:e},t){t.forEach(r=>{for(let n in r)r[n]instanceof e.Table&&delete r[n]})}function hb(e,t){return e._cfg.version-t._cfg.version}function db(e,t,r,n){const i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i);o.create(r),o._completion.catch(n);const a=o._reject.bind(o),s=re.transless||re;Jt(()=>{re.trans=o,re.transless=s,t===0?(Oe(i).forEach(u=>{zo(r,u,i[u].primKey,i[u].indexes)}),Ua(e,r),J.follow(()=>e.on.populate.fire(o)).catch(a)):function({_novip:u},c,l,f){const h=[],d=u._versions;let y=u._dbSchema=Wa(u,u.idbdb,f),p=!1;function b(){return h.length?J.resolve(h.shift()(l.idbtrans)).then(b):J.resolve()}return d.filter(m=>m._cfg.version>=c).forEach(m=>{h.push(()=>{const g=y,w=m._cfg.dbschema;qa(u,g,f),qa(u,w,f),y=u._dbSchema=w;const x=Nf(g,w);x.add.forEach(D=>{zo(f,D[0],D[1].primKey,D[1].indexes)}),x.change.forEach(D=>{if(D.recreate)throw new oe.Upgrade("Not yet support for changing primary key");{const E=f.objectStore(D.name);D.add.forEach(A=>Ka(E,A)),D.change.forEach(A=>{E.deleteIndex(A.name),Ka(E,A)}),D.del.forEach(A=>E.deleteIndex(A))}});const k=m._cfg.contentUpgrade;if(k&&m._cfg.version>c){Ua(u,f),l._memoizedTables={},p=!0;let D=yf(w);x.del.forEach(N=>{D[N]=g[N]}),za(u,[u.Transaction.prototype]),Gi(u,[u.Transaction.prototype],Oe(D),D),l.schema=D;const E=Ls(k);let A;E&&ln();const P=J.follow(()=>{if(A=k(l),A&&E){var N=Mt.bind(null,null);A.then(N,N)}});return A&&typeof A.then=="function"?J.resolve(A):P.then(()=>A)}}),h.push(g=>{(!p||!tb)&&function(w,x){[].slice.call(x.db.objectStoreNames).forEach(k=>w[k]==null&&x.db.deleteObjectStore(k))}(m._cfg.dbschema,g),za(u,[u.Transaction.prototype]),Gi(u,[u.Transaction.prototype],u._storeNames,u._dbSchema),l.schema=u._dbSchema})}),b().then(()=>{var m,g;g=f,Oe(m=y).forEach(w=>{g.db.objectStoreNames.contains(w)||zo(g,w,m[w].primKey,m[w].indexes)})})}(e,t,o,r).catch(a)})}function Nf(e,t){const r={del:[],add:[],change:[]};let n;for(n in e)t[n]||r.del.push(n);for(n in t){const i=e[n],o=t[n];if(i){const a={name:n,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!po)a.recreate=!0,r.change.push(a);else{const s=i.idxByName,u=o.idxByName;let c;for(c in s)u[c]||a.del.push(c);for(c in u){const l=s[c],f=u[c];l?l.src!==f.src&&a.change.push(f):a.add.push(f)}(a.del.length>0||a.add.length>0||a.change.length>0)&&r.change.push(a)}}else r.add.push([n,o])}return r}function zo(e,t,r,n){const i=e.db.createObjectStore(t,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return n.forEach(o=>Ka(i,o)),i}function Ka(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Wa(e,t,r){const n={};return zi(t.objectStoreNames,0).forEach(i=>{const o=r.objectStore(i);let a=o.keyPath;const s=La(Mf(a),a||"",!1,!1,!!o.autoIncrement,a&&typeof a!="string",!0),u=[];for(let l=0;l<o.indexNames.length;++l){const f=o.index(o.indexNames[l]);a=f.keyPath;var c=La(f.name,a,!!f.unique,!!f.multiEntry,!1,a&&typeof a!="string",!1);u.push(c)}n[i]=Bf(i,s,u)}),n}function qa({_novip:e},t,r){const n=r.db.objectStoreNames;for(let i=0;i<n.length;++i){const o=n[i],a=r.objectStore(o);e._hasGetAll="getAll"in a;for(let s=0;s<a.indexNames.length;++s){const u=a.indexNames[s],c=a.index(u).keyPath,l=typeof c=="string"?c:"["+zi(c).join("+")+"]";if(t[o]){const f=t[o].idxByName[l];f&&(f.name=u,delete t[o].idxByName[l],t[o].idxByName[u]=f)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&ye.WorkerGlobalScope&&ye instanceof ye.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class pb{_parseStoresSpec(t,r){Oe(t).forEach(n=>{if(t[n]!==null){var i=t[n].split(",").map((a,s)=>{const u=(a=a.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(u)?u.match(/^\[(.*)\]$/)[1].split("+"):u;return La(u,c||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),je(c),s===0)}),o=i.shift();if(o.multi)throw new oe.Schema("Primary key cannot be multi-valued");i.forEach(a=>{if(a.auto)throw new oe.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new oe.Schema("Index must have a name and cannot be an empty string")}),r[n]=Bf(n,o,i)}})}stores(t){const r=this.db;this._cfg.storesSource=this._cfg.storesSource?We(this._cfg.storesSource,t):t;const n=r._versions,i={};let o={};return n.forEach(a=>{We(i,a._cfg.storesSource),o=a._cfg.dbschema={},a._parseStoresSpec(i,o)}),r._dbSchema=o,za(r,[r._allTables,r,r.Transaction.prototype]),Gi(r,[r._allTables,r,r.Transaction.prototype,this._cfg.tables],Oe(o),o),r._storeNames=Oe(o),this}upgrade(t){return this._cfg.contentUpgrade=zs(this._cfg.contentUpgrade||pe,t),this}}function Hs(e,t){let r=e._dbNamesDB;return r||(r=e._dbNamesDB=new pr("__dbnames",{addons:[],indexedDB:e,IDBKeyRange:t}),r.version(1).stores({dbnames:"name"})),r.table("dbnames")}function Ys(e){return e&&typeof e.databases=="function"}function Ha(e){return Jt(function(){return re.letThrough=!0,e()})}function mb(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var r=function(){return indexedDB.databases().finally(t)};e=setInterval(r,100),r()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function yb(e){const t=e._state,{indexedDB:r}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?Pe(t.dbOpenError):e);yt&&(t.openCanceller._stackHolder=Cr()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const n=t.openCanceller;function i(){if(t.openCanceller!==n)throw new oe.DatabaseClosed("db.open() was cancelled")}let o=t.dbReadyResolve,a=null,s=!1;return J.race([n,(typeof navigator>"u"?J.resolve():mb()).then(()=>new J((u,c)=>{if(i(),!r)throw new oe.MissingAPI;const l=e.name,f=t.autoSchema?r.open(l):r.open(l,Math.round(10*e.verno));if(!f)throw new oe.MissingAPI;f.onerror=ft(c),f.onblocked=ve(e._fireOnBlocked),f.onupgradeneeded=ve(h=>{if(a=f.transaction,t.autoSchema&&!e._options.allowEmptyDB){f.onerror=Kn,a.abort(),f.result.close();const y=r.deleteDatabase(l);y.onsuccess=y.onerror=ve(()=>{c(new oe.NoSuchDatabase(`Database ${l} doesnt exist`))})}else{a.onerror=ft(c);var d=h.oldVersion>Math.pow(2,62)?0:h.oldVersion;s=d<1,e._novip.idbdb=f.result,db(e,d/10,a,c)}},c),f.onsuccess=ve(()=>{a=null;const h=e._novip.idbdb=f.result,d=zi(h.objectStoreNames);if(d.length>0)try{const p=h.transaction((y=d).length===1?y[0]:y,"readonly");t.autoSchema?function({_novip:b},m,g){b.verno=m.version/10;const w=b._dbSchema=Wa(0,m,g);b._storeNames=zi(m.objectStoreNames,0),Gi(b,[b._allTables],Oe(w),w)}(e,h,p):(qa(e,e._dbSchema,p),function(b,m){const g=Nf(Wa(0,b.idbdb,m),b._dbSchema);return!(g.add.length||g.change.some(w=>w.add.length||w.change.length))}(e,p)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Ua(e,p)}catch{}var y;On.push(e),h.onversionchange=ve(p=>{t.vcFired=!0,e.on("versionchange").fire(p)}),h.onclose=ve(p=>{e.on("close").fire(p)}),s&&function({indexedDB:p,IDBKeyRange:b},m){!Ys(p)&&m!=="__dbnames"&&Hs(p,b).put({name:m}).catch(pe)}(e._deps,l),u()},c)}))]).then(()=>(i(),t.onReadyBeingFired=[],J.resolve(Ha(()=>e.on.ready.fire(e.vip))).then(function u(){if(t.onReadyBeingFired.length>0){let c=t.onReadyBeingFired.reduce(zs,pe);return t.onReadyBeingFired=[],J.resolve(Ha(()=>c(e.vip))).then(u)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>e).catch(u=>{t.dbOpenError=u;try{a&&a.abort()}catch{}return n===t.openCanceller&&e._close(),Pe(u)}).finally(()=>{t.openComplete=!0,o()})}function Ya(e){var t=o=>e.next(o),r=i(t),n=i(o=>e.throw(o));function i(o){return a=>{var s=o(a),u=s.value;return s.done?u:u&&typeof u.then=="function"?u.then(r,n):je(u)?Promise.all(u).then(r,n):r(u)}}return i(t)()}function vb(e,t,r){var n=arguments.length;if(n<2)throw new oe.InvalidArgument("Too few arguments");for(var i=new Array(n-1);--n;)i[n-1]=arguments[n];r=i.pop();var o=vf(i);return[e,o,r]}function Ff(e,t,r,n,i){return J.resolve().then(()=>{const o=re.transless||re,a=e._createTransaction(t,r,e._dbSchema,n),s={trans:a,transless:o};if(n)a.idbtrans=n.idbtrans;else try{a.create(),e._state.PR1398_maxLoop=3}catch(f){return f.name===Us.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>Ff(e,t,r,null,i))):Pe(f)}const u=Ls(i);let c;u&&ln();const l=J.follow(()=>{if(c=i.call(a,a),c)if(u){var f=Mt.bind(null,null);c.then(f,f)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=Ya(c))},s);return(c&&typeof c.then=="function"?J.resolve(c).then(f=>a.active?f:Pe(new oe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):l.then(()=>c)).then(f=>(n&&a._resolve(),a._completion.then(()=>f))).catch(f=>(a._reject(f),Pe(f)))})}function yi(e,t,r){const n=je(e)?e.slice():[e];for(let i=0;i<r;++i)n.push(t);return n}const gb={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const r=e.table(t),{schema:n}=r,i={},o=[];function a(l,f,h){const d=Dn(l),y=i[d]=i[d]||[],p=l==null?0:typeof l=="string"?1:l.length,b=f>0,m={...h,isVirtual:b,keyTail:f,keyLength:p,extractKey:ja(l),unique:!b&&h.unique};return y.push(m),m.isPrimaryKey||o.push(m),p>1&&a(p===2?l[0]:l.slice(0,p-1),f+1,h),y.sort((g,w)=>g.keyTail-w.keyTail),m}const s=a(n.primaryKey.keyPath,0,n.primaryKey);i[":id"]=[s];for(const l of n.indexes)a(l.keyPath,0,l);function u(l){const f=l.query.index;return f.isVirtual?{...l,query:{index:f,range:(h=l.query.range,d=f.keyTail,{type:h.type===1?2:h.type,lower:yi(h.lower,h.lowerOpen?e.MAX_KEY:e.MIN_KEY,d),lowerOpen:!0,upper:yi(h.upper,h.upperOpen?e.MIN_KEY:e.MAX_KEY,d),upperOpen:!0})}}:l;var h,d}return{...r,schema:{...n,primaryKey:s,indexes:o,getIndexByKeyPath:function(l){const f=i[Dn(l)];return f&&f[0]}},count:l=>r.count(u(l)),query:l=>r.query(u(l)),openCursor(l){const{keyTail:f,isVirtual:h,keyLength:d}=l.query.index;return h?r.openCursor(u(l)).then(y=>y&&function(p){return Object.create(p,{continue:{value:function(m){m!=null?p.continue(yi(m,l.reverse?e.MAX_KEY:e.MIN_KEY,f)):l.unique?p.continue(p.key.slice(0,d).concat(l.reverse?e.MIN_KEY:e.MAX_KEY,f)):p.continue()}},continuePrimaryKey:{value(m,g){p.continuePrimaryKey(yi(m,e.MAX_KEY,f),g)}},primaryKey:{get:()=>p.primaryKey},key:{get(){const m=p.key;return d===1?m[0]:m.slice(0,d)}},value:{get:()=>p.value}})}(y)):r.openCursor(l)}}}}}};function Gs(e,t,r,n){return r=r||{},n=n||"",Oe(e).forEach(i=>{if(rt(t,i)){var o=e[i],a=t[i];if(typeof o=="object"&&typeof a=="object"&&o&&a){const s=Ca(o);s!==Ca(a)?r[n+i]=t[i]:s==="Object"?Gs(o,a,r,n+i+"."):o!==a&&(r[n+i]=t[i])}else o!==a&&(r[n+i]=t[i])}else r[n+i]=void 0}),Oe(t).forEach(i=>{rt(e,i)||(r[n+i]=t[i])}),r}const bb={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const r=e.table(t),{primaryKey:n}=r.schema;return{...r,mutate(o){const a=re.trans,{deleting:s,creating:u,updating:c}=a.table(t).hook;switch(o.type){case"add":if(u.fire===pe)break;return a._promise("readwrite",()=>l(o),!0);case"put":if(u.fire===pe&&c.fire===pe)break;return a._promise("readwrite",()=>l(o),!0);case"delete":if(s.fire===pe)break;return a._promise("readwrite",()=>l(o),!0);case"deleteRange":if(s.fire===pe)break;return a._promise("readwrite",()=>function(h){return f(h.trans,h.range,1e4)}(o),!0)}return r.mutate(o);function l(h){const d=re.trans,y=h.keys||function(p,b){return b.type==="delete"?b.keys:b.keys||b.values.map(p.extractKey)}(n,h);if(!y)throw new Error("Keys missing");return(h=h.type==="add"||h.type==="put"?{...h,keys:y}:{...h}).type!=="delete"&&(h.values=[...h.values]),h.keys&&(h.keys=[...h.keys]),function(p,b,m){return b.type==="add"?Promise.resolve([]):p.getMany({trans:b.trans,keys:m,cache:"immutable"})}(r,h,y).then(p=>{const b=y.map((m,g)=>{const w=p[g],x={onerror:null,onsuccess:null};if(h.type==="delete")s.fire.call(x,m,w,d);else if(h.type==="add"||w===void 0){const k=u.fire.call(x,m,h.values[g],d);m==null&&k!=null&&(m=k,h.keys[g]=m,n.outbound||ot(h.values[g],n.keyPath,m))}else{const k=Gs(w,h.values[g]),D=c.fire.call(x,k,m,w,d);if(D){const E=h.values[g];Object.keys(D).forEach(A=>{rt(E,A)?E[A]=D[A]:ot(E,A,D[A])})}}return x});return r.mutate(h).then(({failures:m,results:g,numFailures:w,lastResult:x})=>{for(let k=0;k<y.length;++k){const D=g?g[k]:y[k],E=b[k];D==null?E.onerror&&E.onerror(m[k]):E.onsuccess&&E.onsuccess(h.type==="put"&&p[k]?h.values[k]:D)}return{failures:m,results:g,numFailures:w,lastResult:x}}).catch(m=>(b.forEach(g=>g.onerror&&g.onerror(m)),Promise.reject(m)))})}function f(h,d,y){return r.query({trans:h,values:!1,query:{index:n,range:d},limit:y}).then(({result:p})=>l({type:"delete",keys:p,trans:h}).then(b=>b.numFailures>0?Promise.reject(b.failures[0]):p.length<y?{failures:[],numFailures:0,lastResult:void 0}:f(h,{...d,lower:p[p.length-1],lowerOpen:!0},y)))}}}}})};function Lf(e,t,r){try{if(!t||t.keys.length<e.length)return null;const n=[];for(let i=0,o=0;i<t.keys.length&&o<e.length;++i)Ke(t.keys[i],e[o])===0&&(n.push(r?Jn(t.values[i]):t.values[i]),++o);return n.length===e.length?n:null}catch{return null}}const _b={stack:"dbcore",level:-1,create:e=>({table:t=>{const r=e.table(t);return{...r,getMany:n=>{if(!n.cache)return r.getMany(n);const i=Lf(n.keys,n.trans._cache,n.cache==="clone");return i?J.resolve(i):r.getMany(n).then(o=>(n.trans._cache={keys:n.keys,values:n.cache==="clone"?Jn(o):o},o))},mutate:n=>(n.type!=="add"&&(n.trans._cache=null),r.mutate(n))}}})};function Qs(e){return!("from"in e)}const wt=function(e,t){if(!this){const r=new wt;return e&&"d"in e&&We(r,e),r}We(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function qn(e,t,r){const n=Ke(t,r);if(isNaN(n))return;if(n>0)throw RangeError();if(Qs(e))return We(e,{from:t,to:r,d:1});const i=e.l,o=e.r;if(Ke(r,e.from)<0)return i?qn(i,t,r):e.l={from:t,to:r,d:1,l:null,r:null},tc(e);if(Ke(t,e.to)>0)return o?qn(o,t,r):e.r={from:t,to:r,d:1,l:null,r:null},tc(e);Ke(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),Ke(r,e.to)>0&&(e.to=r,e.r=null,e.d=e.l?e.l.d+1:1);const a=!e.r;i&&!e.l&&Qi(e,i),o&&a&&Qi(e,o)}function Qi(e,t){Qs(t)||function r(n,{from:i,to:o,l:a,r:s}){qn(n,i,o),a&&r(n,a),s&&r(n,s)}(e,t)}function wb(e,t){const r=Ga(t);let n=r.next();if(n.done)return!1;let i=n.value;const o=Ga(e);let a=o.next(i.from),s=a.value;for(;!n.done&&!a.done;){if(Ke(s.from,i.to)<=0&&Ke(s.to,i.from)>=0)return!0;Ke(i.from,s.from)<0?i=(n=r.next(s.from)).value:s=(a=o.next(i.from)).value}return!1}function Ga(e){let t=Qs(e)?null:{s:0,n:e};return{next(r){const n=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&Ke(r,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||Ke(r,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function tc(e){var t,r;const n=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((r=e.l)===null||r===void 0?void 0:r.d)||0),i=n>1?"r":n<-1?"l":"";if(i){const o=i==="r"?"l":"r",a={...e},s=e[i];e.from=s.from,e.to=s.to,e[i]=s[i],a[i]=s[o],e[o]=a,a.d=rc(a)}e.d=rc(e)}function rc({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}nn(wt.prototype,{add(e){return Qi(this,e),this},addKey(e){return qn(this,e,e),this},addKeys(e){return e.forEach(t=>qn(this,t,t)),this},[Da](){return Ga(this)}});const kb={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,r=new wt(e.MIN_KEY,e.MAX_KEY);return{...e,table:n=>{const i=e.table(n),{schema:o}=i,{primaryKey:a}=o,{extractKey:s,outbound:u}=a,c={...i,mutate:h=>{const d=h.trans,y=d.mutatedParts||(d.mutatedParts={}),p=D=>{const E=`idb://${t}/${n}/${D}`;return y[E]||(y[E]=new wt)},b=p(""),m=p(":dels"),{type:g}=h;let[w,x]=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[];const k=h.trans._cache;return i.mutate(h).then(D=>{if(je(w)){g!=="delete"&&(w=D.results),b.addKeys(w);const E=Lf(w,k);E||g==="add"||m.addKeys(w),(E||x)&&function(A,P,N,Y){function C($){const _=A($.name||"");function M(L){return L!=null?$.extractKey(L):null}const V=L=>$.multiEntry&&je(L)?L.forEach(te=>_.addKey(te)):_.addKey(L);(N||Y).forEach((L,te)=>{const j=N&&M(N[te]),ee=Y&&M(Y[te]);Ke(j,ee)!==0&&(j!=null&&V(j),ee!=null&&V(ee))})}P.indexes.forEach(C)}(p,o,E,x)}else if(w){const E={from:w.lower,to:w.upper};m.add(E),b.add(E)}else b.add(r),m.add(r),o.indexes.forEach(E=>p(E.name).add(r));return D})}},l=({query:{index:h,range:d}})=>{var y,p;return[h,new wt((y=d.lower)!==null&&y!==void 0?y:e.MIN_KEY,(p=d.upper)!==null&&p!==void 0?p:e.MAX_KEY)]},f={get:h=>[a,new wt(h.key)],getMany:h=>[a,new wt().addKeys(h.keys)],count:l,query:l,openCursor:l};return Oe(f).forEach(h=>{c[h]=function(d){const{subscr:y}=re;if(y){const p=x=>{const k=`idb://${t}/${n}/${x}`;return y[k]||(y[k]=new wt)},b=p(""),m=p(":dels"),[g,w]=f[h](d);if(p(g.name||"").add(w),!g.isPrimaryKey){if(h!=="count"){const x=h==="query"&&u&&d.values&&i.query({...d,values:!1});return i[h].apply(this,arguments).then(k=>{if(h==="query"){if(u&&d.values)return x.then(({result:E})=>(b.addKeys(E),k));const D=d.values?k.result.map(s):k.result;d.values?b.addKeys(D):m.addKeys(D)}else if(h==="openCursor"){const D=k,E=d.values;return D&&Object.create(D,{key:{get:()=>(m.addKey(D.primaryKey),D.key)},primaryKey:{get(){const A=D.primaryKey;return m.addKey(A),A}},value:{get:()=>(E&&b.addKey(D.primaryKey),D.value)}})}return k})}m.add(r)}}return i[h].apply(this,arguments)}}),c}}}};class pr{constructor(t,r){this._middlewares={},this.verno=0;const n=pr.dependencies;this._options=r={addons:pr.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...r},this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange};const{addons:i}=r;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:pe,dbReadyPromise:null,cancelOpen:pe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var a;o.dbReadyPromise=new J(s=>{o.dbReadyResolve=s}),o.openCanceller=new J((s,u)=>{o.cancelOpen=u}),this._state=o,this.name=t,this.on=Cn(this,"populate","blocked","versionchange","close",{ready:[zs,pe]}),this.on.ready.subscribe=df(this.on.ready.subscribe,s=>(u,c)=>{pr.vip(()=>{const l=this._state;if(l.openComplete)l.dbOpenError||J.resolve().then(u),c&&s(u);else if(l.onReadyBeingFired)l.onReadyBeingFired.push(u),c&&s(u);else{s(u);const f=this;c||s(function h(){f.on.ready.unsubscribe(u),f.on.ready.unsubscribe(h)})}})}),this.Collection=(a=this,yn(ob.prototype,function(s,u){this.db=a;let c=Rf,l=null;if(u)try{c=u()}catch(y){l=y}const f=s._ctx,h=f.table,d=h.hook.reading.fire;this._ctx={table:h,index:f.index,isPrimKey:!f.index||h.schema.primKey.keyPath&&f.index===h.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:l,or:f.or,valueMapper:d!==Un?d:null}})),this.Table=function(s){return yn(ib.prototype,function(u,c,l){this.db=s,this._tx=l,this.name=u,this.schema=c,this.hook=s._allTables[u]?s._allTables[u].hook:Cn(null,{creating:[qg,pe],reading:[Wg,Un],updating:[Yg,pe],deleting:[Hg,pe]})})}(this),this.Transaction=function(s){return yn(cb.prototype,function(u,c,l,f,h){this.db=s,this.mode=u,this.storeNames=c,this.schema=l,this.chromeTransactionDurability=f,this.idbtrans=null,this.on=Cn(this,"complete","error","abort"),this.parent=h||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new J((d,y)=>{this._resolve=d,this._reject=y}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},d=>{var y=this.active;return this.active=!1,this.on.error.fire(d),this.parent?this.parent._reject(d):y&&this.idbtrans&&this.idbtrans.abort(),Pe(d)})})}(this),this.Version=function(s){return yn(pb.prototype,function(u){this.db=s,this._cfg={version:u,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(s){return yn($f.prototype,function(u,c,l){this.db=s,this._ctx={table:u,index:c===":id"?null:c,or:l};const f=s._deps.indexedDB;if(!f)throw new oe.MissingAPI;this._cmp=this._ascending=f.cmp.bind(f),this._descending=(h,d)=>f.cmp(d,h),this._max=(h,d)=>f.cmp(h,d)>0?h:d,this._min=(h,d)=>f.cmp(h,d)<0?h:d,this._IDBKeyRange=s._deps.IDBKeyRange})}(this),this.on("versionchange",s=>{s.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",s=>{!s.newVersion||s.newVersion<s.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${s.oldVersion/10}`)}),this._maxKey=Wn(r.IDBKeyRange),this._createTransaction=(s,u,c,l)=>new this.Transaction(s,u,c,this._options.chromeTransactionDurability,l),this._fireOnBlocked=s=>{this.on("blocked").fire(s),On.filter(u=>u.name===this.name&&u!==this&&!u._state.vcFired).map(u=>u.on("versionchange").fire(s))},this.use(gb),this.use(bb),this.use(kb),this.use(_b),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(s=>s(this))}version(t){if(isNaN(t)||t<.1)throw new oe.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new oe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);const r=this._versions;var n=r.filter(i=>i._cfg.version===t)[0];return n||(n=new this.Version(t),r.push(n),r.sort(hb),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(t){return this.idbdb&&(this._state.openComplete||re.letThrough||this._vip)?t():new J((r,n)=>{if(this._state.openComplete)return n(new oe.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void n(new oe.DatabaseClosed);this.open().catch(pe)}this._state.dbReadyPromise.then(r,n)}).then(t)}use({stack:t,create:r,level:n,name:i}){i&&this.unuse({stack:t,name:i});const o=this._middlewares[t]||(this._middlewares[t]=[]);return o.push({stack:t,create:r,level:n??10,name:i}),o.sort((a,s)=>a.level-s.level),this}unuse({stack:t,name:r,create:n}){return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(i=>n?i.create!==n:!!r&&i.name!==r)),this}open(){return yb(this)}_close(){const t=this._state,r=On.indexOf(this);if(r>=0&&On.splice(r,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new J(n=>{t.dbReadyResolve=n}),t.openCanceller=new J((n,i)=>{t.cancelOpen=i})}close(){this._close();const t=this._state;this._options.autoOpen=!1,t.dbOpenError=new oe.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){const t=arguments.length>0,r=this._state;return new J((n,i)=>{const o=()=>{this.close();var a=this._deps.indexedDB.deleteDatabase(this.name);a.onsuccess=ve(()=>{(function({indexedDB:s,IDBKeyRange:u},c){!Ys(s)&&c!=="__dbnames"&&Hs(s,u).delete(c).catch(pe)})(this._deps,this.name),n()}),a.onerror=ft(i),a.onblocked=this._fireOnBlocked};if(t)throw new oe.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(o):o()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Oe(this._allTables).map(t=>this._allTables[t])}transaction(){const t=vb.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,r,n){let i=re.trans;i&&i.db===this&&t.indexOf("!")===-1||(i=null);const o=t.indexOf("?")!==-1;let a,s;t=t.replace("!","").replace("?","");try{if(s=r.map(c=>{var l=c instanceof this.Table?c.name:c;if(typeof l!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return l}),t=="r"||t==="readonly")a="readonly";else{if(t!="rw"&&t!="readwrite")throw new oe.InvalidArgument("Invalid transaction mode: "+t);a="readwrite"}if(i){if(i.mode==="readonly"&&a==="readwrite"){if(!o)throw new oe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&s.forEach(c=>{if(i&&i.storeNames.indexOf(c)===-1){if(!o)throw new oe.SubTransaction("Table "+c+" not included in parent transaction.");i=null}}),o&&i&&!i.active&&(i=null)}}catch(c){return i?i._promise(null,(l,f)=>{f(c)}):Pe(c)}const u=Ff.bind(null,this,a,s,i,n);return i?i._promise(a,u,"lock"):re.trans?fn(re.transless,()=>this._whenReady(u)):this._whenReady(u)}table(t){if(!rt(this._allTables,t))throw new oe.InvalidTable(`Table ${t} does not exist`);return this._allTables[t]}}const xb=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class Eb{constructor(t){this._subscribe=t}subscribe(t,r,n){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:r,complete:n})}[xb](){return this}}function jf(e,t){return Oe(t).forEach(r=>{Qi(e[r]||(e[r]=new wt),t[r])}),e}function Sb(e){return new Eb(t=>{const r=Ls(e);let n=!1,i={},o={};const a={get closed(){return n},unsubscribe:()=>{n=!0,tr.storagemutated.unsubscribe(l)}};t.start&&t.start(a);let s=!1,u=!1;function c(){return Oe(o).some(h=>i[h]&&wb(i[h],o[h]))}const l=h=>{jf(i,h),c()&&f()},f=()=>{if(s||n)return;i={};const h={},d=function(y){r&&ln();const p=()=>Jt(e,{subscr:y,trans:null}),b=re.trans?fn(re.transless,p):p();return r&&b.then(Mt,Mt),b}(h);u||(tr("storagemutated",l),u=!0),s=!0,Promise.resolve(d).then(y=>{s=!1,n||(c()?f():(i={},o=h,t.next&&t.next(y)))},y=>{["DatabaseClosedError","AbortError"].includes(y==null?void 0:y.name)||(s=!1,t.error&&t.error(y),a.unsubscribe())})};return f(),a})}let Qa;try{Qa={indexedDB:ye.indexedDB||ye.mozIndexedDB||ye.webkitIndexedDB||ye.msIndexedDB,IDBKeyRange:ye.IDBKeyRange||ye.webkitIDBKeyRange}}catch{Qa={indexedDB:null,IDBKeyRange:null}}const ir=pr;function Ii(e){let t=Dt;try{Dt=!0,tr.storagemutated.fire(e)}finally{Dt=t}}nn(ir,{...Si,delete:e=>new ir(e,{addons:[]}).delete(),exists:e=>new ir(e,{addons:[]}).open().then(t=>(t.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function({indexedDB:t,IDBKeyRange:r}){return Ys(t)?Promise.resolve(t.databases()).then(n=>n.map(i=>i.name).filter(i=>i!=="__dbnames")):Hs(t,r).toCollection().primaryKeys()}(ir.dependencies).then(e)}catch{return Pe(new oe.MissingAPI)}},defineClass:()=>function(e){We(this,e)},ignoreTransaction:e=>re.trans?fn(re.transless,e):e(),vip:Ha,async:function(e){return function(){try{var t=Ya(e.apply(this,arguments));return t&&typeof t.then=="function"?t:J.resolve(t)}catch(r){return Pe(r)}}},spawn:function(e,t,r){try{var n=Ya(e.apply(r,t||[]));return n&&typeof n.then=="function"?n:J.resolve(n)}catch(i){return Pe(i)}},currentTransaction:{get:()=>re.trans||null},waitFor:function(e,t){const r=J.resolve(typeof e=="function"?ir.ignoreTransaction(e):e).timeout(t||6e4);return re.trans?re.trans.waitFor(r):r},Promise:J,debug:{get:()=>yt,set:e=>{bf(e,e==="dexie"?()=>!0:If)}},derive:Wr,extend:We,props:nn,override:df,Events:Cn,on:tr,liveQuery:Sb,extendObservabilitySet:jf,getByKeyPath:At,setByKeyPath:ot,delByKeyPath:function(e,t){typeof t=="string"?ot(e,t,void 0):"length"in t&&[].map.call(t,function(r){ot(e,r,void 0)})},shallowClone:yf,deepClone:Jn,getObjectDiff:Gs,cmp:Ke,asap:pf,minKey:-(1/0),addons:[],connections:On,errnames:Us,dependencies:Qa,semVer:"4.0.0-alpha.4",version:"4.0.0-alpha.4".split(".").map(e=>parseInt(e)).reduce((e,t,r)=>e+t/Math.pow(10,2*r))}),ir.maxKey=Wn(ir.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(tr("storagemutated",e=>{if(!Dt){let t;po?(t=document.createEvent("CustomEvent"),t.initCustomEvent("x-storagemutated-1",!0,!0,e)):t=new CustomEvent("x-storagemutated-1",{detail:e}),Dt=!0,dispatchEvent(t),Dt=!1}}),addEventListener("x-storagemutated-1",({detail:e})=>{Dt||Ii(e)}));let Dt=!1;if(typeof BroadcastChannel<"u"){const e=new BroadcastChannel("x-storagemutated-1");typeof e.unref=="function"&&e.unref(),tr("storagemutated",t=>{Dt||e.postMessage(t)}),e.onmessage=t=>{t.data&&Ii(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){tr("storagemutated",t=>{try{Dt||(typeof localStorage<"u"&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(r=>r.postMessage({type:"x-storagemutated-1",changedParts:t})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",t=>{if(t.key==="x-storagemutated-1"){const r=JSON.parse(t.newValue);r&&Ii(r.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function({data:t}){t&&t.type==="x-storagemutated-1"&&Ii(t.changedParts)})}J.rejectionMapper=function(e,t){if(!e||e instanceof qr||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Yu[e.name])return e;var r=new Yu[e.name](t||e.message,e);return"stack"in e&&Pt(r,"stack",{get:function(){return this.inner.stack}}),r},bf(yt,If);var Vi="docs",nc="deleted-docs",Ob="changes",Uf="dexie",zf=Rv,ic=new Map,Ri=new Map;function Cb(e,t,r,n){var i=ut(n.primaryKey),o="rxdb-dexie-"+e+"--"+n.version+"--"+t,a=br(ic,o,()=>{var s=(async()=>{var u=Re(r);u.autoOpen=!1;var c=new pr(o,u),l={[Vi]:Ab(n),[Ob]:"++sequence, id",[nc]:i+",_meta.lwt,[_meta.lwt+"+i+"]"};return c.version(1).stores(l),await c.open(),{dexieDb:c,dexieTable:c[Vi],dexieDeletedTable:c[nc]}})();return ic.set(o,a),Ri.set(a,0),s});return a}async function Db(e){var t=await e,r=Ri.get(e),n=r-1;n===0?(t.dexieDb.close(),Ri.delete(e)):Ri.set(e,n)}function Pb(e){if(e.indexes){var t=new Set;e.indexes.forEach(r=>{var n=us(r);n.forEach(i=>{if(!t.has(i)){t.add(i);var o=Xt(e,i);if(o.type==="boolean")throw W("DXE1",{schema:e,index:r,field:i})}})})}}var Va="__";function Er(e){var t=e.split(".");if(t.length>1)return t.map(n=>Er(n)).join(".");if(e.startsWith("|")){var r=e.substring(1);return Va+r}else return e}function Kf(e){var t=e.split(".");if(t.length>1)return t.map(n=>Kf(n)).join(".");if(e.startsWith(Va)){var r=e.substring(Va.length);return"|"+r}else return e}function Zi(e){if(!e||typeof e=="string"||typeof e=="number"||typeof e=="boolean")return e;if(Array.isArray(e))return e.map(r=>Zi(r));if(typeof e=="object"){var t={};return Object.entries(e).forEach(([r,n])=>{typeof n=="object"&&(n=Zi(n)),t[Er(r)]=n}),t}}function Yr(e){if(!e||typeof e=="string"||typeof e=="number"||typeof e=="boolean")return e;if(Array.isArray(e))return e.map(r=>Yr(r));if(typeof e=="object"){var t={};return Object.entries(e).forEach(([r,n])=>{(typeof n=="object"||Array.isArray(e))&&(n=Yr(n)),t[Kf(r)]=n}),t}}function Ab(e){var t=[],r=ut(e.primaryKey);return t.push([r]),e.indexes&&e.indexes.forEach(n=>{var i=us(n);t.push(i)}),t.push(["_meta.lwt",r]),t=t.map(n=>n.map(i=>Er(i))),t.map(n=>n.length===1?n[0]:"["+n.join("+")+"]").join(", ")}async function oc(e,t){var r=await e,[n,i]=await Promise.all([r.dexieTable.bulkGet(t),r.dexieDeletedTable.bulkGet(t)]),o=i.slice(0);return n.forEach((a,s)=>{a&&(o[s]=a)}),o}function ac(e){return e===ur?-1/0:e}function Wf(e,t){if(!t){if(typeof window>"u")throw new Error("IDBKeyRange missing");t=window.IDBKeyRange}var r=e.startKeys.map(ac),n=e.endKeys.map(ac),i;if(e.index.length===1){var o=r[0]===n[0];i=t.bound(r[0],n[0],o?!1:e.inclusiveStart,o?!1:e.inclusiveEnd)}else i=t.bound(r,n,e.inclusiveStart,e.inclusiveEnd);return i}async function Ib(e,t){var r=await e.internals,n=t.query,i=n.skip?n.skip:0,o=n.limit?n.limit:1/0,a=i+o,s=t.queryPlan,u=!1;s.selectorSatisfiedByIndex||(u=Cs(e.schema,t.query));var c=Wf(s,r.dexieDb._options.IDBKeyRange),l=s.index,f=[];if(await r.dexieDb.transaction("r",r.dexieTable,async d=>{var y=d.idbtrans,p=y.objectStore(Vi),b;if(l.length===1&&l[0]===e.primaryPath)b=p;else{var m;l.length===1?m=Er(l[0]):m="["+l.map(w=>Er(w)).join("+")+"]",b=p.index(m)}var g=b.openCursor(c);await new Promise(w=>{g.onsuccess=function(x){var k=x.target.result;if(k){var D=Yr(k.value);!D._deleted&&(!u||u(D))&&f.push(D),s.sortFieldsSameAsIndexFields&&f.length===a?w():k.continue()}else w()}})}),!s.sortFieldsSameAsIndexFields){var h=zl(e.schema,t.query);f=f.sort(h)}return f=f.slice(i,a),{documents:f}}async function Rb(e,t){var r=await e.internals,n=t.queryPlan,i=n.index,o=Wf(n,r.dexieDb._options.IDBKeyRange),a=-1;return await r.dexieDb.transaction("r",r.dexieTable,async s=>{var u=s.idbtrans,c=u.objectStore(Vi),l;if(i.length===1&&i[0]===e.primaryPath)l=c;else{var f;i.length===1?f=Er(i[0]):f="["+i.map(d=>Er(d)).join("+")+"]",l=c.index(f)}var h=l.count(o);a=await new Promise((d,y)=>{h.onsuccess=function(){d(h.result)},h.onerror=p=>y(p)})}),a}var Tb=ze(),$b=function(){function e(r,n,i,o,a,s,u){this.changes$=new Zt,this.instanceId=Tb++,this.closed=!1,this.storage=r,this.databaseName=n,this.collectionName=i,this.schema=o,this.internals=a,this.options=s,this.settings=u,this.primaryPath=ut(this.schema.primaryKey)}var t=e.prototype;return t.bulkWrite=async function(n,i){_t(this),n.forEach(f=>{if(!f.document._rev||f.previous&&!f.previous._rev)throw W("SNH",{args:{row:f}})});var o=await this.internals,a={success:{},error:{}},s=n.map(f=>f.document[this.primaryPath]),u;if(await o.dexieDb.transaction("rw",o.dexieTable,o.dexieDeletedTable,async()=>{var f=new Map,h=await oc(this.internals,s);h.forEach(m=>{var g=m&&Yr(m);return g&&f.set(g[this.primaryPath],g),g}),u=Mp(this,this.primaryPath,f,n,i),a.error=u.errors;var d=[],y=[],p=[],b=[];u.bulkInsertDocs.forEach(m=>{var g=m.document[this.primaryPath];a.success[g]=m.document,d.push(m.document)}),u.bulkUpdateDocs.forEach(m=>{var g=m.document[this.primaryPath];if(a.success[g]=m.document,m.document._deleted&&m.previous&&!m.previous._deleted)y.push(g),p.push(m.document);else if(m.document._deleted&&m.previous&&m.previous._deleted)p.push(m.document);else if(!m.document._deleted)d.push(m.document);else throw W("SNH",{args:{row:m}})}),await Promise.all([d.length>0?o.dexieTable.bulkPut(d.map(m=>Zi(m))):ht,y.length>0?o.dexieTable.bulkDelete(y):ht,p.length>0?o.dexieDeletedTable.bulkPut(p.map(m=>Zi(m))):ht,b.length>0?o.dexieDeletedTable.bulkDelete(b):ht])}),u=_e(u),u.eventBulk.events.length>0){var c=_e(u.newestRow).document;u.eventBulk.checkpoint={id:c[this.primaryPath],lwt:c._meta.lwt};var l=ze();u.eventBulk.events.forEach(f=>f.endTime=l),this.changes$.next(u.eventBulk)}return a},t.findDocumentsById=async function(n,i){_t(this);var o=await this.internals,a={};return await o.dexieDb.transaction("r",o.dexieTable,o.dexieDeletedTable,async()=>{var s;i?s=await oc(this.internals,n):s=await o.dexieTable.bulkGet(n),n.forEach((u,c)=>{var l=s[c];l&&(!l._deleted||i)&&(a[u]=Yr(l))})}),a},t.query=function(n){return _t(this),Ib(this,n)},t.count=async function(n){var i=await Rb(this,n);return{count:i,mode:"fast"}},t.getChangedDocumentsSince=async function(n,i){_t(this);var o=i?i.lwt:cs,a=i?i.id:"",s=await this.internals,[u,c]=await Promise.all([s.dexieTable,s.dexieDeletedTable].map(async h=>{var d=h.where("[_meta.lwt+"+this.primaryPath+"]").above([o,a]).limit(n),y=await d.toArray();return y.map(p=>Yr(p))})),l=u.slice(0);no(l,c),l=cd(this.primaryPath,l),l=l.slice(0,n);var f=nd(l);return{documents:l,checkpoint:f?{id:f[this.primaryPath],lwt:f._meta.lwt}:i||{id:"",lwt:0}}},t.remove=async function(){_t(this);var n=await this.internals;return await Promise.all([n.dexieDeletedTable.clear(),n.dexieTable.clear()]),this.close()},t.changeStream=function(){return _t(this),this.changes$.asObservable()},t.cleanup=async function(n){_t(this);var i=await this.internals;return await i.dexieDb.transaction("rw",i.dexieDeletedTable,async()=>{var o=ze()-n,a=await i.dexieDeletedTable.where("_meta.lwt").below(o).toArray(),s=a.map(u=>u[this.primaryPath]);await i.dexieDeletedTable.bulkDelete(s)}),!0},t.getAttachmentData=function(n,i,o){throw _t(this),new Error("Attachments are not implemented in the dexie RxStorage. Make a pull request.")},t.close=function(){return _t(this),this.closed=!0,this.changes$.complete(),Db(this.internals),ht},t.conflictResultionTasks=function(){return new Zt},t.resolveConflictResultionTask=async function(n){},e}();function Mb(e,t,r){var n=Cb(t.databaseName,t.collectionName,r,t.schema),i=new $b(e,t.databaseName,t.collectionName,t.schema,n,t.options,r);return Tg(Uf,t,i),Promise.resolve(i)}function _t(e){if(e.closed)throw new Error("RxStorageInstanceDexie is closed "+e.databaseName+"-"+e.collectionName)}var Bb=function(){function e(r){this.name=Uf,this.statics=zf,this.settings=r}var t=e.prototype;return t.createStorageInstance=function(n){return Fp(n),Pb(n.schema),Mb(this,n,this.settings)},e}();function Nb(e={}){var t=new Bb(e);return t}var sc={UT1:"given name is no string or empty",UT2:`collection- and database-names must match the regex to be compatible with couchdb databases.
    See https://neighbourhood.ie/blog/2020/10/13/everything-you-need-to-know-about-couchdb-database-names/
    info: if your database-name specifies a folder, the name must contain the slash-char '/' or '\\'`,UT3:"replication-direction must either be push or pull or both. But not none",UT4:"given leveldown is no valid adapter",UT5:"keyCompression is set to true in the schema but no key-compression handler is used in the storage",UT6:"schema contains encrypted fields but no encryption handler is used in the storage",UT7:"attachments.compression is enabled but no attachment-compression plugin is used",PL1:"Given plugin is not RxDB plugin.",PL3:"A plugin with the same name was already added but it was not the exact same JavaScript object",P2:"bulkWrite() cannot be called with an empty array",QU1:"RxQuery._execOverDatabase(): op not known",QU4:"RxQuery.regex(): You cannot use .regex() on the primary field",QU5:"RxQuery.sort(): does not work because key is not defined in the schema",QU6:"RxQuery.limit(): cannot be called on .findOne()",QU9:"throwIfMissing can only be used in findOne queries",QU10:"result empty and throwIfMissing: true",QU11:"RxQuery: no valid query params given",QU12:"Given index is not in schema",QU13:"A top level field of the query is not included in the schema",QU14:"Running a count() query in slow mode is now allowed. Either run a count() query with a selector that fully matches an index or set allowSlowCount=true when calling the createRxDatabase",QU15:"For count queries it is not allowed to use skip or limit",MQ1:"path must be a string or object",MQ2:"Invalid argument",MQ3:"Invalid sort() argument. Must be a string, object, or array",MQ4:"Invalid argument. Expected instanceof mquery or plain object",MQ5:"method must be used after where() when called with these arguments",MQ6:"Can't mix sort syntaxes. Use either array or object | .sort([['field', 1], ['test', -1]]) | .sort({ field: 1, test: -1 })",MQ7:"Invalid sort value",MQ8:"Can't mix sort syntaxes. Use either array or object",DB1:"RxDocument.prepare(): another instance on this adapter has a different password",DB2:"RxDatabase.addCollections(): collection-names cannot start with underscore _",DB3:"RxDatabase.addCollections(): collection already exists. use myDatabase.[collectionName] to get it",DB4:"RxDatabase.addCollections(): schema is missing",DB5:"RxDatabase.addCollections(): collection-name not allowed",DB6:"RxDatabase.addCollections(): another instance created this collection with a different schema. Read this https://pubkey.github.io/rxdb/questions-answers.html#cant-change-the-schema",DB8:`RxDatabase.create(): A RxDatabase with the same name and adapter already exists.
Make sure to use this combination only once or set ignoreDuplicate to true if you do this intentional`,DB11:"createRxDatabase(): Invalid db-name, folder-paths must not have an ending slash",DB12:"RxDatabase.addCollections(): could not write to internal store",COL1:"RxDocument.insert() You cannot insert an existing document",COL2:"RxCollection.insert() fieldName ._id can only be used as primaryKey",COL3:"RxCollection.upsert() does not work without primary",COL4:"RxCollection.incrementalUpsert() does not work without primary",COL5:"RxCollection.find() if you want to search by _id, use .findOne(_id)",COL6:"RxCollection.findOne() needs a queryObject or string",COL7:"hook must be a function",COL8:"hooks-when not known",COL9:"RxCollection.addHook() hook-name not known",COL10:"RxCollection .postCreate-hooks cannot be async",COL11:"migrationStrategies must be an object",COL12:"A migrationStrategy is missing or too much",COL13:"migrationStrategy must be a function",COL14:"given static method-name is not a string",COL15:"static method-names cannot start with underscore _",COL16:"given static method is not a function",COL17:"RxCollection.ORM: statics-name not allowed",COL18:"collection-method not allowed because fieldname is in the schema",COL20:"Storage write error",CONFLICT:"Document update conflict. When changing a document you must work on the previous revision",DOC1:"RxDocument.get$ cannot get observable of in-array fields because order cannot be guessed",DOC2:"cannot observe primary path",DOC3:"final fields cannot be observed",DOC4:"RxDocument.get$ cannot observe a non-existed field",DOC5:"RxDocument.populate() cannot populate a non-existed field",DOC6:"RxDocument.populate() cannot populate because path has no ref",DOC7:"RxDocument.populate() ref-collection not in database",DOC8:"RxDocument.set(): primary-key cannot be modified",DOC9:"final fields cannot be modified",DOC10:"RxDocument.set(): cannot set childpath when rootPath not selected",DOC11:"RxDocument.save(): can't save deleted document",DOC13:"RxDocument.remove(): Document is already deleted",DOC14:"RxDocument.destroy() does not exist",DOC15:"query cannot be an array",DOC16:"Since version 8.0.0 RxDocument.set() can only be called on temporary RxDocuments",DOC17:"Since version 8.0.0 RxDocument.save() can only be called on non-temporary documents",DOC18:"Document property for composed primary key is missing",DOC19:"Value of primary key(s) cannot be changed",DOC20:"PrimaryKey missing",DOC21:"PrimaryKey must be equal to PrimaryKey.trim(). It cannot start or end with a whitespace",DOC22:"PrimaryKey must not contain a linebreak",DOC23:'PrimaryKey must not contain a double-quote ["]',DM1:"migrate() Migration has already run",DM2:"migration of document failed final document does not match final schema",DM3:"migration already running",AT1:"to use attachments, please define this in your schema",EN1:"password is not valid",EN2:"validatePassword: min-length of password not complied",EN3:"Schema contains encrypted properties but no password is given",EN4:"Password not valid",JD1:"You must create the collections before you can import their data",JD2:"RxCollection.importJSON(): the imported json relies on a different schema",JD3:"RxCollection.importJSON(): json.passwordHash does not match the own",LD1:"RxDocument.allAttachments$ can't use attachments on local documents",LD2:"RxDocument.get(): objPath must be a string",LD3:"RxDocument.get$ cannot get observable of in-array fields because order cannot be guessed",LD4:"cannot observe primary path",LD5:"RxDocument.set() id cannot be modified",LD6:"LocalDocument: Function is not usable on local documents",LD7:"Local document already exists",LD8:"localDocuments not activated. Set localDocuments=true on creation, when you want to store local documents on the RxDatabase or RxCollection.",RC1:"Replication: already added",RC2:"replicateCouchDB() query must be from the same RxCollection",RC4:"RxCouchDBReplicationState.awaitInitialReplication() cannot await initial replication when live: true",RC5:"RxCouchDBReplicationState.awaitInitialReplication() cannot await initial replication if multiInstance because the replication might run on another instance",RC6:"syncFirestore() serverTimestampField MUST NOT be part of the collections schema and MUST NOT be nested.",RC_PULL:"RxReplication pull handler threw an error - see .errors for more details",RC_STREAM:"RxReplication pull stream$ threw an error - see .errors for more details",RC_PUSH:"RxReplication push handler threw an error - see .errors for more details",RC_PUSH_NO_AR:"RxReplication push handler did not return an array with the conflicts",RC_P2P_PEER:"RxReplication P2P Peer has error",RC_COUCHDB_1:"replicateCouchDB() url must end with a slash like 'https://example.com/mydatabase/'",RC_COUCHDB_2:"replicateCouchDB() did not get valid result with rows.",SC1:"fieldnames do not match the regex",SC2:"SchemaCheck: name 'item' reserved for array-fields",SC3:"SchemaCheck: fieldname has a ref-array but items-type is not string",SC4:"SchemaCheck: fieldname has a ref but is not type string, [string,null] or array<string>",SC6:"SchemaCheck: primary can only be defined at top-level",SC7:"SchemaCheck: default-values can only be defined at top-level",SC8:"SchemaCheck: first level-fields cannot start with underscore _",SC10:"SchemaCheck: schema defines ._rev, this will be done automatically",SC11:"SchemaCheck: schema needs a number >=0 as version",SC13:"SchemaCheck: primary is always index, do not declare it as index",SC14:"SchemaCheck: primary is always unique, do not declare it as index",SC15:"SchemaCheck: primary cannot be encrypted",SC16:"SchemaCheck: primary must have type: string",SC17:"SchemaCheck: top-level fieldname is not allowed",SC18:"SchemaCheck: indexes must be an array",SC19:"SchemaCheck: indexes must contain strings or arrays of strings",SC20:"SchemaCheck: indexes.array must contain strings",SC21:"SchemaCheck: given index is not defined in schema",SC22:"SchemaCheck: given indexKey is not type:string",SC23:"SchemaCheck: fieldname is not allowed",SC24:"SchemaCheck: required fields must be set via array. See https://spacetelescope.github.io/understanding-json-schema/reference/object.html#required",SC25:"SchemaCheck: compoundIndexes needs to be specified in the indexes field",SC26:"SchemaCheck: indexes needs to be specified at collection schema level",SC27:"SchemaCheck: encrypted fields need to be specified at collection schema level",SC28:"SchemaCheck: encrypted fields is not defined in the schema",SC29:"SchemaCheck: missing object key 'properties'",SC30:"SchemaCheck: primaryKey is required",SC32:"SchemaCheck: primary field must have the type string/number/integer",SC33:"SchemaCheck: used primary key is not a property in the schema",SC34:"Fields of type string that are used in an index, must have set the maxLength attribute in the schema",SC35:"Fields of type number/integer that are used in an index, must have set the multipleOf attribute in the schema",SC36:"A field of this type cannot be used as index",SC37:"Fields of type number that are used in an index, must have set the minimum and maximum attribute in the schema",SC38:"Fields of type boolean that are used in an index, must be required in the schema",SC39:"The primary key must have the maxLength attribute set",VD1:"Sub-schema not found, does the schemaPath exists in your schema?",VD2:"object does not match schema",S1:"You cannot create collections after calling RxDatabase.server()",GQL1:"GraphQL replication: cannot find sub schema by key",GQL3:"GraphQL replication: pull returns more documents then batchSize",CRDT1:"CRDT operations cannot be used because the crdt options are not set in the schema.",CRDT2:"RxDocument.incrementalModify() cannot be used when CRDTs are activated.",CRDT3:"To use CRDTs you MUST NOT set a conflictHandler because the default CRDT conflict handler must be used",DXE1:"The dexie.js RxStorage does not support boolean indexes, see https://rxdb.info/rx-storage-dexie.html#boolean-index",SNH:"This should never happen"},Ko;function Fb(){if(!Ko){var e=new As,t=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(Object.getPrototypeOf(e));Ko=[...t,...r]}return Ko}var Wo;function Lb(){if(!Wo){var e=new Rs("pseudoInstance","memory"),t=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(Object.getPrototypeOf(e));Wo=[...t,...r],e.destroy()}return Wo}var jb=Ol(Qn),Ub=new jb,qo;function qf(){if(!qo){var e=["deleted","synced"],t=Object.getOwnPropertyNames(Ub),r=Object.getOwnPropertyNames(Qn);qo=[...t,...r,...e]}return qo}function zb(e){if(e!=="_deleted"){if(["properties"].includes(e))throw W("SC23",{fieldName:e});var t="^[a-zA-Z](?:[[a-zA-Z0-9_]*]?[a-zA-Z0-9])?$",r=new RegExp(t);if(e!=="_id"&&!e.match(r))throw W("SC1",{regex:t,fieldName:e})}}function Kb(e){var t=ut(e.primaryKey);function r(i,o,a){if(typeof i=="string"&&typeof o=="object"&&!Array.isArray(o)&&zb(i),o.hasOwnProperty("item")&&o.type!=="array")throw W("SC2",{fieldName:i});if(o.hasOwnProperty("required")&&typeof o.required=="boolean")throw W("SC24",{fieldName:i});if(o.hasOwnProperty("ref"))if(Array.isArray(o.type)){if(o.type.length>2||!o.type.includes("string")||!o.type.includes("null"))throw W("SC4",{fieldName:i})}else switch(o.type){case"string":break;case"array":if(!o.items||!o.items.type||o.items.type!=="string")throw W("SC3",{fieldName:i});break;default:throw W("SC4",{fieldName:i})}var s=a.split(".").length>=2;if(s){if(o.primary)throw W("SC6",{path:a,primary:o.primary});if(o.default)throw W("SC7",{path:a})}if(!s){if(i==="_id"&&t!=="_id")throw W("COL2",{fieldName:i});if(i.charAt(0)==="_"){if(i==="_id"||i==="_deleted")return;throw W("SC8",{fieldName:i})}}}function n(i,o){!i||typeof i!="object"||Object.keys(i).forEach(a=>{var s=i[a];!i.properties&&s&&typeof s=="object"&&!Array.isArray(i)&&r(a,s,o);var u=o;a!=="properties"&&(u=u+"."+a),n(s,u)})}return n(e,""),!0}function Wb(e){if(!e.primaryKey)throw W("SC30",{schema:e});function t(u){if(!u)throw W("SC33",{schema:e});var c=u.type;if(!c||!["string","number","integer"].includes(c))throw W("SC32",{schema:e,args:{schemaPart:u}})}if(typeof e.primaryKey=="string"){var r=e.primaryKey,n=e.properties[r];t(n)}else{var i=e.primaryKey,o=Xt(e,i.key);t(o),i.fields.forEach(u=>{var c=Xt(e,u);t(c)})}var a=ut(e.primaryKey),s=e.properties[a];if(!s.maxLength)throw W("SC39",{schema:e,args:{primaryPathSchemaPart:s}})}function uc(e){for(var t=e.split("."),r="",n=0;n<t.length;n+=1)t[n]!=="[]"?r=r.concat(".properties.".concat(t[n])):r=r.concat(".items");return Rn(r)}function qb(e){if(!e.primaryKey)throw W("SC30",{schema:e});if(!e.hasOwnProperty("properties"))throw W("SC29",{schema:e});if(e.properties._rev)throw W("SC10",{schema:e});if(!e.hasOwnProperty("version")||typeof e.version!="number"||e.version<0)throw W("SC11",{version:e.version});if(Kb(e),Wb(e),Object.keys(e.properties).forEach(t=>{var r=e.properties[t];if(t===e.primaryKey){if(e.indexes&&e.indexes.includes(t))throw W("SC13",{value:r,schema:e});if(r.unique)throw W("SC14",{value:r,schema:e});if(e.encrypted&&e.encrypted.includes(t))throw W("SC15",{value:r,schema:e});if(r.type!=="string")throw W("SC16",{value:r,schema:e})}if(qf().includes(t))throw W("SC17",{key:t,schema:e})}),e.indexes){if(!jr(e.indexes))throw W("SC18",{indexes:e.indexes,schema:e});e.indexes.forEach(t=>{if(!(typeof t=="string"||Array.isArray(t)))throw W("SC19",{index:t,schema:e});if(Array.isArray(t)){for(var r=0;r<t.length;r+=1)if(typeof t[r]!="string")throw W("SC20",{index:t,schema:e})}var n=jr(t)?t:[t];n.forEach(i=>{var o=Xt(e,i),a=o.type;switch(a){case"string":var s=o.maxLength;if(!s)throw W("SC34",{index:t,field:i,schema:e});break;case"number":case"integer":var u=o.multipleOf;if(!u)throw W("SC35",{index:t,field:i,schema:e});var c=o.maximum,l=o.minimum;if(typeof c>"u"||typeof l>"u")throw W("SC37",{index:t,field:i,schema:e});break;case"boolean":var f="",h=i;if(i.includes(".")){var d=i.split(".");h=d.pop(),f=d.join(".")}var y=f===""?e:Xt(e,f);if(!y.required||!y.required.includes(h))throw W("SC38",{index:t,field:i,schema:e});break;default:throw W("SC36",{fieldName:i,type:o.type,schema:e})}})})}Object.keys(oa(e)).map(t=>{var r=t.split(".");return r.pop(),r.join(".")}).filter(t=>t!=="").filter((t,r,n)=>n.indexOf(t)===r).filter(t=>{var r=Ht(e,t);return r&&!!r.index}).forEach(t=>{throw t=t.replace("properties.",""),t=t.replace(/\.properties\./g,"."),W("SC26",{index:Rn(t),schema:e})}),(e.indexes||[]).reduce((t,r)=>(jr(r)?no(t,r):t.push(r),t),[]).filter((t,r,n)=>n.indexOf(t)===r).map(t=>{var r=uc(t),n=Ht(e,r);if(!n||typeof n!="object")throw W("SC21",{index:t,schema:e});return{indexPath:t,schemaObj:n}}).filter(t=>t.schemaObj.type!=="string"&&t.schemaObj.type!=="integer"&&t.schemaObj.type!=="number"&&t.schemaObj.type!=="boolean").forEach(t=>{throw W("SC22",{key:t.indexPath,type:t.schemaObj.type,schema:e})}),Object.keys(oa(e)).map(t=>{var r=t.split(".");return r.pop(),r.join(".")}).filter(t=>t!==""&&t!=="attachments").filter((t,r,n)=>n.indexOf(t)===r).filter(t=>{var r=Ht(e,t);return r&&!!r.encrypted}).forEach(t=>{throw t=t.replace("properties.",""),t=t.replace(/\.properties\./g,"."),W("SC27",{index:Rn(t),schema:e})}),e.encrypted&&e.encrypted.forEach(t=>{var r=uc(t),n=Ht(e,r);if(!n||typeof n!="object")throw W("SC28",{field:t,schema:e})})}function Ho(e){e&&Object.entries(e).forEach(([t,r])=>{if(typeof t!="string")throw et("COL14",{name:t});if(t.startsWith("_"))throw et("COL15",{name:t});if(typeof r!="function")throw et("COL16",{name:t,type:typeof t});if(Fb().includes(t)||qf().includes(t))throw W("COL17",{name:t})})}function Hb(e,t){var r=Object.keys(e.properties);t&&Object.keys(t).filter(n=>r.includes(n)).forEach(n=>{throw W("COL18",{funName:n})})}function Yb(e,t){if(typeof t!="object"||Array.isArray(t))throw et("COL11",{schema:e});var r=Wp(e);if(r.length!==Object.keys(t).length)throw W("COL12",{have:Object.keys(t),should:r});return r.map(n=>({v:n,s:t[n+1]})).filter(n=>typeof n.s!="function").forEach(n=>{throw et("COL13",{version:n.v,type:typeof n,schema:e})}),!0}function Gb(e){if(Lb().includes(e.name))throw W("DB5",{name:e.name});Yf(e.name)}function Qb(e){if(Yf(e.name),Hc(e.name)&&(e.name.endsWith("/")||e.name.endsWith("\\")))throw W("DB11",{name:e.name})}var Hf="^[a-z][_$a-z0-9\\-]*$",Vb=new RegExp(Hf);function Yf(e){if(typeof e!="string"||e.length===0)throw et("UT1",{name:e});if(Hc(e))return!0;if(!e.match(Vb)&&e!==":memory:")throw W("UT2",{regex:Hf,givenName:e});return!0}function Zb(e){var t=Object.prototype.toString.call(e.queryObj)==="[object Object]";if(!t)throw et("QU11",{op:e.op,collection:e.collection.name,queryObj:e.queryObj});var r=["selector","limit","skip","sort","index"];if(Object.keys(e.queryObj).forEach(n=>{if(!r.includes(n))throw et("QU11",{op:e.op,collection:e.collection.name,queryObj:e.queryObj,key:n,args:{validKeys:r}})}),e.op==="count"&&(e.queryObj.limit||e.queryObj.skip))throw W("QU15",{collection:e.collection.name,query:e.queryObj})}function Xb(e){var t=e.rxQuery.collection.schema.jsonSchema,r=e.mangoQuery.selector,n=Object.keys(t.properties);Object.keys(r).filter(s=>!s.startsWith("$")).filter(s=>!s.includes(".")).forEach(s=>{if(!n.includes(s))throw W("QU13",{schema:t,field:s,query:e.mangoQuery})});var i=t.indexes?t.indexes:[],o=e.mangoQuery.index;if(o){var a=i.find(s=>Tn(s,o));if(!a)throw W("QU12",{collection:e.rxQuery.collection.name,query:e.mangoQuery,schema:t})}if(e.rxQuery.op==="count"&&!Jb(e.rxQuery.collection.schema.jsonSchema,e.mangoQuery)&&!e.rxQuery.collection.database.allowSlowCount)throw W("QU14",{collection:e.rxQuery.collection,query:e.mangoQuery});e.mangoQuery.sort&&e.mangoQuery.sort.map(s=>Object.keys(s)[0]).filter(s=>!s.includes(".")).forEach(s=>{if(!n.includes(s))throw W("QU13",{schema:t,field:s,query:e.mangoQuery})})}function Jb(e,t){var r=zf.prepareQuery(e,t);return r.queryPlan.selectorSatisfiedByIndex}function e_(e,t){if(!e)throw W("DOC20",{primaryKey:e,document:t});if(e!==e.trim())throw W("DOC21",{primaryKey:e,document:t});if(e.includes("\r")||e.includes(`
`))throw W("DOC22",{primaryKey:e,document:t});if(e.includes('"'))throw W("DOC23",{primaryKey:e,document:t})}function t_(e){return!e||typeof e=="string"||typeof e=="number"?e:Yc(e)}var r_="dev-mode",n_={name:r_,rxdb:!0,init:()=>{console.warn(["-------------- RxDB dev-mode warning -------------------------------","you are seeing this because you use the RxDB dev-mode plugin https://rxdb.info/dev-mode.html","This is great in development mode, because it will run many checks to ensure","that you use RxDB correct. If you see this in production mode,","you did something wrong because the dev-mode plugin will decrease the performance.",""," Hint: To get the most out of RxDB, check out the Premium Plugins","to get access to faster storages and more professional features: https://rxdb.info/premium.html","","Also take part in the RxDB User Survey: https://rxdb.info/survey.html","---------------------------------------------------------------------"].join(`
`))},overwritable:{isDevMode(){return!0},deepFreezeWhenDevMode:t_,tunnelErrorMessage(e){if(!sc[e])throw console.error("RxDB: Error-Code not known: "+e),new Error("Error-Code "+e+" not known, contact the maintainer");return sc[e]}},hooks:{preCreateRxSchema:{after:qb},preCreateRxDatabase:{after:function(e){Qb(e)}},preCreateRxCollection:{after:function(e){if(Gb(e),Hb(e.schema,e.methods),e.name.charAt(0)==="_")throw W("DB2",{name:e.name});if(!e.schema)throw W("DB4",{name:e.name,args:e})}},createRxDocument:{before:function(e){e_(e.primary,e.toJSON(!0))}},preCreateRxQuery:{after:function(e){Zb(e)}},prePrepareQuery:{after:e=>{Xb(e)}},createRxCollection:{after:e=>{Ho(e.creator.statics),Ho(e.creator.methods),Ho(e.creator.attachments),e.creator.schema&&e.creator.migrationStrategies&&Yb(e.creator.schema,e.creator.migrationStrategies)}}}};const i_={version:0,title:"Note Schema",description:"a single note object",primaryKey:"guid",type:"object",indexes:["createdAt","updatedAt"],properties:{guid:{type:"string",maxLength:42,description:"unique identifier for note"},name:{type:"string",description:"name/title of note"},body:{type:"string",description:"markdown body of note"},createdAt:{type:"integer",description:"unix timestamp of when note was created",multipleOf:1,minimum:0,maximum:17976931348623157e292},updatedAt:{type:"integer",description:"unix timestamp of when note was last updated",multipleOf:1,minimum:0,maximum:17976931348623157e292},currentSelection:{type:"string",description:"text selection within note body (if any)"}},required:["name"]},o_=localStorage.getItem("noteListHeight")||100;tf(n_);let Za;const a_=async()=>{const e=await Dv({name:"nvauxdb",storage:Nb(),ignoreDuplicate:!0});return await e.addCollections({notes:{schema:i_}}),Za=e,e},mo=()=>Za||a_(),Xi=an("search"),Qt=an(""),yo=an(o_),mr=an({}),Xa=an("");Qt.subscribe(e=>{e===""&&(Xi.set("search"),mr.set(""))});yo.subscribe(e=>localStorage.setItem("noteListHeight",e.toString()));function s_(e){let t,r,n;return{c(){t=Ee("button"),t.textContent="Download"},m(i,o){Ne(i,t,o),r||(n=Se(t,"click",e[0]),r=!0)},p:ue,i:ue,o:ue,d(i){i&&Te(t),r=!1,n()}}}function u_(e){let t;return[async()=>{let n=new Kc;t=await mo(),(await t.notes.find().exec()).map(o=>n.file(`${o.name}.txt`,`${o.body}`)),n.generateAsync({type:"blob"}).then(o=>Jh.saveAs(o,"nakedNV-notes.zip"))}]}class c_ extends Nt{constructor(t){super(),Bt(this,t,u_,s_,mt,{})}}function l_(e){let t,r,n,i,o,a;return{c(){t=Ee("div"),r=Ee("label"),r.textContent="[U]",n=Xe(),i=Ee("input"),Q(r,"for","file-upload"),Q(r,"class","svelte-17q8bna"),Q(i,"id","file-upload"),Q(i,"type","file"),Q(i,"class","svelte-17q8bna"),Q(t,"class","svelte-17q8bna")},m(s,u){Ne(s,t,u),de(t,r),de(t,n),de(t,i),o||(a=[Se(i,"change",e[2]),Se(i,"change",e[1])],o=!0)},p:ue,i:ue,o:ue,d(s){s&&Te(t),o=!1,st(a)}}}function f_(e,t,r){let n,i;const o=async s=>{n=await mo(),Kc.loadAsync(s.target.files[0]).then(u=>{u.forEach(async(c,l)=>{if(c.startsWith("__MACOSX"))return;console.log("file @@@@@@@@@@@@@ ",l);const f=l.date.getTime();l.async("string").then(async h=>{console.log("body @@@@@@@@@@@@@ ",h),await n.notes.insert({guid:jc(),name:l.name.split("/").pop().replace(/\.[^/.]+$/,""),body:h,createdAt:f,updatedAt:f})},h=>{console.log("file.async error @@@@@@@@@@",h)})})},u=>{console.log("loadAsync error, ",u)})};function a(){i=this.files,r(0,i)}return[i,o,a]}class h_ extends Nt{constructor(t){super(),Bt(this,t,f_,l_,mt,{})}}function d_(e){let t,r,n;return{c(){t=ar("svg"),r=ar("circle"),n=ar("line"),Q(r,"cx","11"),Q(r,"cy","11"),Q(r,"r","8"),Q(n,"x1","21"),Q(n,"y1","21"),Q(n,"x2","16.65"),Q(n,"y2","16.65"),Q(t,"xmlns","http://www.w3.org/2000/svg"),Q(t,"width","24"),Q(t,"height","24"),Q(t,"viewBox","0 0 24 24"),Q(t,"fill","none"),Q(t,"stroke","currentColor"),Q(t,"stroke-width","2"),Q(t,"stroke-linecap","round"),Q(t,"stroke-linejoin","round"),Q(t,"class","feather feather-search")},m(i,o){Ne(i,t,o),de(t,r),de(t,n)},p:ue,i:ue,o:ue,d(i){i&&Te(t)}}}class p_ extends Nt{constructor(t){super(),Bt(this,t,null,d_,mt,{})}}function m_(e){let t,r,n,i;return{c(){t=ar("svg"),r=ar("circle"),n=ar("line"),i=ar("line"),Q(r,"cx","12"),Q(r,"cy","12"),Q(r,"r","10"),Q(n,"x1","15"),Q(n,"y1","9"),Q(n,"x2","9"),Q(n,"y2","15"),Q(i,"x1","9"),Q(i,"y1","9"),Q(i,"x2","15"),Q(i,"y2","15"),Q(t,"xmlns","http://www.w3.org/2000/svg"),Q(t,"width","24"),Q(t,"height","24"),Q(t,"viewBox","0 0 24 24"),Q(t,"fill","none"),Q(t,"stroke","currentColor"),Q(t,"stroke-width","2"),Q(t,"stroke-linecap","round"),Q(t,"stroke-linejoin","round"),Q(t,"class","feather feather-x-circle")},m(o,a){Ne(o,t,a),de(t,r),de(t,n),de(t,i)},p:ue,i:ue,o:ue,d(o){o&&Te(t)}}}class y_ extends Nt{constructor(t){super(),Bt(this,t,null,m_,mt,{})}}function v_(e){let t;return{c(){t=lr("[E]")},m(r,n){Ne(r,t,n)},i:ue,o:ue,d(r){r&&Te(t)}}}function g_(e){let t,r;return t=new p_({}),{c(){Wt(t.$$.fragment)},m(n,i){Ot(t,n,i),r=!0},i(n){r||(Ue(t.$$.fragment,n),r=!0)},o(n){Qe(t.$$.fragment,n),r=!1},d(n){Ct(t,n)}}}function cc(e){let t,r,n,i,o;return r=new y_({}),{c(){t=Ee("button"),Wt(r.$$.fragment),Q(t,"class","icon right svelte-1ahii1d")},m(a,s){Ne(a,t,s),Ot(r,t,null),n=!0,i||(o=Se(t,"click",e[6]),i=!0)},p:ue,i(a){n||(Ue(r.$$.fragment,a),n=!0)},o(a){Qe(r.$$.fragment,a),n=!1},d(a){a&&Te(t),Ct(r),i=!1,o()}}}function b_(e){let t,r,n,i,o,a,s,u,c,l,f,h,d,y,p;r=new h_({}),i=new c_({});const b=[g_,v_],m=[];function g(x,k){return x[2]==="search"?0:1}u=g(e),c=m[u]=b[u](e);let w=e[1]!==""&&cc(e);return{c(){t=Ee("div"),Wt(r.$$.fragment),n=Xe(),Wt(i.$$.fragment),o=Xe(),a=Ee("div"),s=Ee("div"),c.c(),l=Xe(),w&&w.c(),f=Xe(),h=Ee("input"),Q(s,"class","icon left svelte-1ahii1d"),Q(h,"type","text"),Q(h,"class","flex-grow py-0.5 px-1 m-1.5 svelte-1ahii1d"),Q(h,"placeholder","Search or Create"),Q(a,"class","input-wrapper svelte-1ahii1d"),Q(t,"class","omnibar svelte-1ahii1d")},m(x,k){Ne(x,t,k),Ot(r,t,null),de(t,n),Ot(i,t,null),de(t,o),de(t,a),de(a,s),m[u].m(s,null),de(a,l),w&&w.m(a,null),de(a,f),de(a,h),e[7](h),$i(h,e[1]),d=!0,y||(p=[Se(window,"keydown",e[4]),Se(h,"input",e[8]),Se(h,"keydown",e[5]),Se(h,"focus",function(){os(e[0].select())&&e[0].select().apply(this,arguments)})],y=!0)},p(x,[k]){e=x;let D=u;u=g(e),u!==D&&(ta(),Qe(m[D],1,1,()=>{m[D]=null}),ra(),c=m[u],c||(c=m[u]=b[u](e),c.c()),Ue(c,1),c.m(s,null)),e[1]!==""?w?(w.p(e,k),k&2&&Ue(w,1)):(w=cc(e),w.c(),Ue(w,1),w.m(a,f)):w&&(ta(),Qe(w,1,1,()=>{w=null}),ra()),k&2&&h.value!==e[1]&&$i(h,e[1])},i(x){d||(Ue(r.$$.fragment,x),Ue(i.$$.fragment,x),Ue(c),Ue(w),d=!0)},o(x){Qe(r.$$.fragment,x),Qe(i.$$.fragment,x),Qe(c),Qe(w),d=!1},d(x){x&&Te(t),Ct(r),Ct(i),m[u].d(),w&&w.d(),e[7](null),y=!1,st(p)}}}function __(e,t,r){let n,i,o;pt(e,Qt,d=>r(1,n=d)),pt(e,Xi,d=>r(2,i=d)),pt(e,mr,d=>r(3,o=d));let a;as(()=>a.focus());const s=d=>{d.keyCode===27&&(Qt.set(""),a.focus())},u=d=>{n!==""&&d.keyCode===13&&c()},c=async()=>{await(await mo()).notes.insert({guid:jc(),name:n,createdAt:new Date().getTime(),updatedAt:new Date().getTime()}).then(y=>{mr.set(y),Xi.set("edit")}).then(()=>document.getElementById("body-editor").focus())},l=()=>{iu(Qt,n="",n),iu(mr,o="",o)};function f(d){Jo[d?"unshift":"push"](()=>{a=d,r(0,a)})}function h(){n=this.value,Qt.set(n)}return[a,n,i,o,s,u,l,f,h]}class w_ extends Nt{constructor(t){super(),Bt(this,t,__,b_,mt,{})}}function Sr(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function qe(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function vt(e){qe(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||gr(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function k_(e,t){qe(2,arguments);var r=vt(e).getTime(),n=Sr(t);return new Date(r+n)}var x_={};function vo(){return x_}function E_(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function S_(e){return qe(1,arguments),e instanceof Date||gr(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function O_(e){if(qe(1,arguments),!S_(e)&&typeof e!="number")return!1;var t=vt(e);return!isNaN(Number(t))}function C_(e,t){qe(2,arguments);var r=Sr(t);return k_(e,-r)}var D_=864e5;function P_(e){qe(1,arguments);var t=vt(e),r=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=t.getTime(),i=r-n;return Math.floor(i/D_)+1}function Ji(e){qe(1,arguments);var t=1,r=vt(e),n=r.getUTCDay(),i=(n<t?7:0)+n-t;return r.setUTCDate(r.getUTCDate()-i),r.setUTCHours(0,0,0,0),r}function Gf(e){qe(1,arguments);var t=vt(e),r=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0);var i=Ji(n),o=new Date(0);o.setUTCFullYear(r,0,4),o.setUTCHours(0,0,0,0);var a=Ji(o);return t.getTime()>=i.getTime()?r+1:t.getTime()>=a.getTime()?r:r-1}function A_(e){qe(1,arguments);var t=Gf(e),r=new Date(0);r.setUTCFullYear(t,0,4),r.setUTCHours(0,0,0,0);var n=Ji(r);return n}var I_=6048e5;function R_(e){qe(1,arguments);var t=vt(e),r=Ji(t).getTime()-A_(t).getTime();return Math.round(r/I_)+1}function eo(e,t){var r,n,i,o,a,s,u,c;qe(1,arguments);var l=vo(),f=Sr((r=(n=(i=(o=t==null?void 0:t.weekStartsOn)!==null&&o!==void 0?o:t==null||(a=t.locale)===null||a===void 0||(s=a.options)===null||s===void 0?void 0:s.weekStartsOn)!==null&&i!==void 0?i:l.weekStartsOn)!==null&&n!==void 0?n:(u=l.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&r!==void 0?r:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=vt(e),d=h.getUTCDay(),y=(d<f?7:0)+d-f;return h.setUTCDate(h.getUTCDate()-y),h.setUTCHours(0,0,0,0),h}function Qf(e,t){var r,n,i,o,a,s,u,c;qe(1,arguments);var l=vt(e),f=l.getUTCFullYear(),h=vo(),d=Sr((r=(n=(i=(o=t==null?void 0:t.firstWeekContainsDate)!==null&&o!==void 0?o:t==null||(a=t.locale)===null||a===void 0||(s=a.options)===null||s===void 0?void 0:s.firstWeekContainsDate)!==null&&i!==void 0?i:h.firstWeekContainsDate)!==null&&n!==void 0?n:(u=h.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var y=new Date(0);y.setUTCFullYear(f+1,0,d),y.setUTCHours(0,0,0,0);var p=eo(y,t),b=new Date(0);b.setUTCFullYear(f,0,d),b.setUTCHours(0,0,0,0);var m=eo(b,t);return l.getTime()>=p.getTime()?f+1:l.getTime()>=m.getTime()?f:f-1}function T_(e,t){var r,n,i,o,a,s,u,c;qe(1,arguments);var l=vo(),f=Sr((r=(n=(i=(o=t==null?void 0:t.firstWeekContainsDate)!==null&&o!==void 0?o:t==null||(a=t.locale)===null||a===void 0||(s=a.options)===null||s===void 0?void 0:s.firstWeekContainsDate)!==null&&i!==void 0?i:l.firstWeekContainsDate)!==null&&n!==void 0?n:(u=l.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&r!==void 0?r:1),h=Qf(e,t),d=new Date(0);d.setUTCFullYear(h,0,f),d.setUTCHours(0,0,0,0);var y=eo(d,t);return y}var $_=6048e5;function M_(e,t){qe(1,arguments);var r=vt(e),n=eo(r,t).getTime()-T_(r,t).getTime();return Math.round(n/$_)+1}function he(e,t){for(var r=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return r+n}var B_={y:function(t,r){var n=t.getUTCFullYear(),i=n>0?n:1-n;return he(r==="yy"?i%100:i,r.length)},M:function(t,r){var n=t.getUTCMonth();return r==="M"?String(n+1):he(n+1,2)},d:function(t,r){return he(t.getUTCDate(),r.length)},a:function(t,r){var n=t.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(t,r){return he(t.getUTCHours()%12||12,r.length)},H:function(t,r){return he(t.getUTCHours(),r.length)},m:function(t,r){return he(t.getUTCMinutes(),r.length)},s:function(t,r){return he(t.getUTCSeconds(),r.length)},S:function(t,r){var n=r.length,i=t.getUTCMilliseconds(),o=Math.floor(i*Math.pow(10,n-3));return he(o,r.length)}};const Lt=B_;var Rr={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},N_={G:function(t,r,n){var i=t.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(i,{width:"abbreviated"});case"GGGGG":return n.era(i,{width:"narrow"});case"GGGG":default:return n.era(i,{width:"wide"})}},y:function(t,r,n){if(r==="yo"){var i=t.getUTCFullYear(),o=i>0?i:1-i;return n.ordinalNumber(o,{unit:"year"})}return Lt.y(t,r)},Y:function(t,r,n,i){var o=Qf(t,i),a=o>0?o:1-o;if(r==="YY"){var s=a%100;return he(s,2)}return r==="Yo"?n.ordinalNumber(a,{unit:"year"}):he(a,r.length)},R:function(t,r){var n=Gf(t);return he(n,r.length)},u:function(t,r){var n=t.getUTCFullYear();return he(n,r.length)},Q:function(t,r,n){var i=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"Q":return String(i);case"QQ":return he(i,2);case"Qo":return n.ordinalNumber(i,{unit:"quarter"});case"QQQ":return n.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(i,{width:"wide",context:"formatting"})}},q:function(t,r,n){var i=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"q":return String(i);case"qq":return he(i,2);case"qo":return n.ordinalNumber(i,{unit:"quarter"});case"qqq":return n.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(i,{width:"wide",context:"standalone"})}},M:function(t,r,n){var i=t.getUTCMonth();switch(r){case"M":case"MM":return Lt.M(t,r);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(t,r,n){var i=t.getUTCMonth();switch(r){case"L":return String(i+1);case"LL":return he(i+1,2);case"Lo":return n.ordinalNumber(i+1,{unit:"month"});case"LLL":return n.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(i,{width:"wide",context:"standalone"})}},w:function(t,r,n,i){var o=M_(t,i);return r==="wo"?n.ordinalNumber(o,{unit:"week"}):he(o,r.length)},I:function(t,r,n){var i=R_(t);return r==="Io"?n.ordinalNumber(i,{unit:"week"}):he(i,r.length)},d:function(t,r,n){return r==="do"?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):Lt.d(t,r)},D:function(t,r,n){var i=P_(t);return r==="Do"?n.ordinalNumber(i,{unit:"dayOfYear"}):he(i,r.length)},E:function(t,r,n){var i=t.getUTCDay();switch(r){case"E":case"EE":case"EEE":return n.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(i,{width:"short",context:"formatting"});case"EEEE":default:return n.day(i,{width:"wide",context:"formatting"})}},e:function(t,r,n,i){var o=t.getUTCDay(),a=(o-i.weekStartsOn+8)%7||7;switch(r){case"e":return String(a);case"ee":return he(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(t,r,n,i){var o=t.getUTCDay(),a=(o-i.weekStartsOn+8)%7||7;switch(r){case"c":return String(a);case"cc":return he(a,r.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(t,r,n){var i=t.getUTCDay(),o=i===0?7:i;switch(r){case"i":return String(o);case"ii":return he(o,r.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(i,{width:"short",context:"formatting"});case"iiii":default:return n.day(i,{width:"wide",context:"formatting"})}},a:function(t,r,n){var i=t.getUTCHours(),o=i/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,r,n){var i=t.getUTCHours(),o;switch(i===12?o=Rr.noon:i===0?o=Rr.midnight:o=i/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,r,n){var i=t.getUTCHours(),o;switch(i>=17?o=Rr.evening:i>=12?o=Rr.afternoon:i>=4?o=Rr.morning:o=Rr.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,r,n){if(r==="ho"){var i=t.getUTCHours()%12;return i===0&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return Lt.h(t,r)},H:function(t,r,n){return r==="Ho"?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Lt.H(t,r)},K:function(t,r,n){var i=t.getUTCHours()%12;return r==="Ko"?n.ordinalNumber(i,{unit:"hour"}):he(i,r.length)},k:function(t,r,n){var i=t.getUTCHours();return i===0&&(i=24),r==="ko"?n.ordinalNumber(i,{unit:"hour"}):he(i,r.length)},m:function(t,r,n){return r==="mo"?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Lt.m(t,r)},s:function(t,r,n){return r==="so"?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Lt.s(t,r)},S:function(t,r){return Lt.S(t,r)},X:function(t,r,n,i){var o=i._originalDate||t,a=o.getTimezoneOffset();if(a===0)return"Z";switch(r){case"X":return fc(a);case"XXXX":case"XX":return or(a);case"XXXXX":case"XXX":default:return or(a,":")}},x:function(t,r,n,i){var o=i._originalDate||t,a=o.getTimezoneOffset();switch(r){case"x":return fc(a);case"xxxx":case"xx":return or(a);case"xxxxx":case"xxx":default:return or(a,":")}},O:function(t,r,n,i){var o=i._originalDate||t,a=o.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+lc(a,":");case"OOOO":default:return"GMT"+or(a,":")}},z:function(t,r,n,i){var o=i._originalDate||t,a=o.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+lc(a,":");case"zzzz":default:return"GMT"+or(a,":")}},t:function(t,r,n,i){var o=i._originalDate||t,a=Math.floor(o.getTime()/1e3);return he(a,r.length)},T:function(t,r,n,i){var o=i._originalDate||t,a=o.getTime();return he(a,r.length)}};function lc(e,t){var r=e>0?"-":"+",n=Math.abs(e),i=Math.floor(n/60),o=n%60;if(o===0)return r+String(i);var a=t||"";return r+String(i)+a+he(o,2)}function fc(e,t){if(e%60===0){var r=e>0?"-":"+";return r+he(Math.abs(e)/60,2)}return or(e,t)}function or(e,t){var r=t||"",n=e>0?"-":"+",i=Math.abs(e),o=he(Math.floor(i/60),2),a=he(i%60,2);return n+o+r+a}const F_=N_;var hc=function(t,r){switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},Vf=function(t,r){switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},L_=function(t,r){var n=t.match(/(P+)(p+)?/)||[],i=n[1],o=n[2];if(!o)return hc(t,r);var a;switch(i){case"P":a=r.dateTime({width:"short"});break;case"PP":a=r.dateTime({width:"medium"});break;case"PPP":a=r.dateTime({width:"long"});break;case"PPPP":default:a=r.dateTime({width:"full"});break}return a.replace("{{date}}",hc(i,r)).replace("{{time}}",Vf(o,r))},j_={p:Vf,P:L_};const U_=j_;var z_=["D","DD"],K_=["YY","YYYY"];function W_(e){return z_.indexOf(e)!==-1}function q_(e){return K_.indexOf(e)!==-1}function dc(e,t,r){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var H_={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Y_=function(t,r,n){var i,o=H_[t];return typeof o=="string"?i=o:r===1?i=o.one:i=o.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+i:i+" ago":i};const G_=Y_;function Yo(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth,n=e.formats[r]||e.formats[e.defaultWidth];return n}}var Q_={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},V_={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Z_={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},X_={date:Yo({formats:Q_,defaultWidth:"full"}),time:Yo({formats:V_,defaultWidth:"full"}),dateTime:Yo({formats:Z_,defaultWidth:"full"})};const J_=X_;var e0={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},t0=function(t,r,n,i){return e0[t]};const r0=t0;function vn(e){return function(t,r){var n=r!=null&&r.context?String(r.context):"standalone",i;if(n==="formatting"&&e.formattingValues){var o=e.defaultFormattingWidth||e.defaultWidth,a=r!=null&&r.width?String(r.width):o;i=e.formattingValues[a]||e.formattingValues[o]}else{var s=e.defaultWidth,u=r!=null&&r.width?String(r.width):e.defaultWidth;i=e.values[u]||e.values[s]}var c=e.argumentCallback?e.argumentCallback(t):t;return i[c]}}var n0={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},i0={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},o0={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},a0={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},s0={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},u0={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},c0=function(t,r){var n=Number(t),i=n%100;if(i>20||i<10)switch(i%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},l0={ordinalNumber:c0,era:vn({values:n0,defaultWidth:"wide"}),quarter:vn({values:i0,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:vn({values:o0,defaultWidth:"wide"}),day:vn({values:a0,defaultWidth:"wide"}),dayPeriod:vn({values:s0,defaultWidth:"wide",formattingValues:u0,defaultFormattingWidth:"wide"})};const f0=l0;function gn(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.width,i=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;var a=o[0],s=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(s)?d0(s,function(f){return f.test(a)}):h0(s,function(f){return f.test(a)}),c;c=e.valueCallback?e.valueCallback(u):u,c=r.valueCallback?r.valueCallback(c):c;var l=t.slice(a.length);return{value:c,rest:l}}}function h0(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r}function d0(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r}function p0(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.match(e.matchPattern);if(!n)return null;var i=n[0],o=t.match(e.parsePattern);if(!o)return null;var a=e.valueCallback?e.valueCallback(o[0]):o[0];a=r.valueCallback?r.valueCallback(a):a;var s=t.slice(i.length);return{value:a,rest:s}}}var m0=/^(\d+)(th|st|nd|rd)?/i,y0=/\d+/i,v0={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},g0={any:[/^b/i,/^(a|c)/i]},b0={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},_0={any:[/1/i,/2/i,/3/i,/4/i]},w0={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},k0={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},x0={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},E0={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},S0={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},O0={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},C0={ordinalNumber:p0({matchPattern:m0,parsePattern:y0,valueCallback:function(t){return parseInt(t,10)}}),era:gn({matchPatterns:v0,defaultMatchWidth:"wide",parsePatterns:g0,defaultParseWidth:"any"}),quarter:gn({matchPatterns:b0,defaultMatchWidth:"wide",parsePatterns:_0,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:gn({matchPatterns:w0,defaultMatchWidth:"wide",parsePatterns:k0,defaultParseWidth:"any"}),day:gn({matchPatterns:x0,defaultMatchWidth:"wide",parsePatterns:E0,defaultParseWidth:"any"}),dayPeriod:gn({matchPatterns:S0,defaultMatchWidth:"any",parsePatterns:O0,defaultParseWidth:"any"})};const D0=C0;var P0={code:"en-US",formatDistance:G_,formatLong:J_,formatRelative:r0,localize:f0,match:D0,options:{weekStartsOn:0,firstWeekContainsDate:1}};const A0=P0;var I0=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,R0=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,T0=/^'([^]*?)'?$/,$0=/''/g,M0=/[a-zA-Z]/;function B0(e,t,r){var n,i,o,a,s,u,c,l,f,h,d,y,p,b,m,g,w,x;qe(2,arguments);var k=String(t),D=vo(),E=(n=(i=r==null?void 0:r.locale)!==null&&i!==void 0?i:D.locale)!==null&&n!==void 0?n:A0,A=Sr((o=(a=(s=(u=r==null?void 0:r.firstWeekContainsDate)!==null&&u!==void 0?u:r==null||(c=r.locale)===null||c===void 0||(l=c.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:D.firstWeekContainsDate)!==null&&a!==void 0?a:(f=D.locale)===null||f===void 0||(h=f.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(A>=1&&A<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var P=Sr((d=(y=(p=(b=r==null?void 0:r.weekStartsOn)!==null&&b!==void 0?b:r==null||(m=r.locale)===null||m===void 0||(g=m.options)===null||g===void 0?void 0:g.weekStartsOn)!==null&&p!==void 0?p:D.weekStartsOn)!==null&&y!==void 0?y:(w=D.locale)===null||w===void 0||(x=w.options)===null||x===void 0?void 0:x.weekStartsOn)!==null&&d!==void 0?d:0);if(!(P>=0&&P<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!E.localize)throw new RangeError("locale must contain localize property");if(!E.formatLong)throw new RangeError("locale must contain formatLong property");var N=vt(e);if(!O_(N))throw new RangeError("Invalid time value");var Y=E_(N),C=C_(N,Y),$={firstWeekContainsDate:A,weekStartsOn:P,locale:E,_originalDate:N},_=k.match(R0).map(function(M){var V=M[0];if(V==="p"||V==="P"){var L=U_[V];return L(M,E.formatLong)}return M}).join("").match(I0).map(function(M){if(M==="''")return"'";var V=M[0];if(V==="'")return N0(M);var L=F_[V];if(L)return!(r!=null&&r.useAdditionalWeekYearTokens)&&q_(M)&&dc(M,t,String(e)),!(r!=null&&r.useAdditionalDayOfYearTokens)&&W_(M)&&dc(M,t,String(e)),L(C,M,E.localize,$);if(V.match(M0))throw new RangeError("Format string contains an unescaped latin alphabet character `"+V+"`");return M}).join("");return _}function N0(e){var t=e.match(T0);return t?t[1].replace($0,"'"):e}function pc(e,t,r){const n=e.slice();return n[16]=t[r],n}function F0(e){return{c:ue,m:ue,p:ue,d:ue}}function L0(e){let t,r=su(e[15]),n=[];for(let i=0;i<r.length;i+=1)n[i]=yc(pc(e,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();t=Lh()},m(i,o){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(i,o);Ne(i,t,o)},p(i,o){if(o&117){r=su(i[15]);let a;for(a=0;a<r.length;a+=1){const s=pc(i,r,a);n[a]?n[a].p(s,o):(n[a]=yc(s),n[a].c(),n[a].m(t.parentNode,t))}for(;a<n.length;a+=1)n[a].d(1);n.length=r.length}},d(i){i&&Te(t),Fh(n,i)}}}function mc(e){let t;return{c(){t=Ee("span"),t.textContent="",An(t,"color","#757575")},m(r,n){Ne(r,t,n)},d(r){r&&Te(t)}}}function yc(e){let t,r,n=e[16].name+"",i,o,a,s,u=(e[16].body??"")+"",c,l,f,h,d=e[4](e[16].updatedAt)+"",y,p,b,m,g,w,x=e[16].body!==""&&mc();function k(){return e[9](e[16])}function D(){return e[10](e[16])}function E(){return e[11](e[16])}return{c(){t=Ee("li"),r=Ee("span"),i=lr(n),o=Xe(),x&&x.c(),a=Xe(),s=Ee("span"),c=lr(u),f=Xe(),h=Ee("span"),y=lr(d),b=Xe(),Q(s,"class","mute svelte-wv6msr"),Q(s,"style",l=e[0]===e[16]&&"color: #fff;"),Q(r,"class","elipsis svelte-wv6msr"),Q(r,"role","button"),Q(r,"tabindex","-1"),Q(h,"class","meta svelte-wv6msr"),Q(h,"style",p=e[0]===e[16]&&"background: #0363e1; color: white;"),Q(t,"style",m=e[0]===e[16]&&"background: #0363e1; color: white;"),Q(t,"class","svelte-wv6msr")},m(A,P){Ne(A,t,P),de(t,r),de(r,i),de(r,o),x&&x.m(r,null),de(r,a),de(r,s),de(s,c),de(t,f),de(t,h),de(h,y),de(t,b),g||(w=[Se(r,"dblclick",e[8]),Se(t,"click",k),Se(t,"keydown",D),Se(t,"mouseover",E)],g=!0)},p(A,P){e=A,P&4&&n!==(n=e[16].name+"")&&_o(i,n),e[16].body!==""?x||(x=mc(),x.c(),x.m(r,a)):x&&(x.d(1),x=null),P&4&&u!==(u=(e[16].body??"")+"")&&_o(c,u),P&5&&l!==(l=e[0]===e[16]&&"color: #fff;")&&Q(s,"style",l),P&4&&d!==(d=e[4](e[16].updatedAt)+"")&&_o(y,d),P&5&&p!==(p=e[0]===e[16]&&"background: #0363e1; color: white;")&&Q(h,"style",p),P&5&&m!==(m=e[0]===e[16]&&"background: #0363e1; color: white;")&&Q(t,"style",m)},d(A){A&&Te(t),x&&x.d(),g=!1,st(w)}}}function j0(e){let t;return{c(){t=lr("Loading Notes...")},m(r,n){Ne(r,t,n)},p:ue,d(r){r&&Te(t)}}}function U0(e){let t,r,n,i,o={ctx:e,current:null,token:null,hasCatch:!1,pending:j0,then:L0,catch:F0,value:15};return au(r=e[2],o),{c(){t=Ee("ul"),o.block.c(),Q(t,"id","noteList"),An(t,"height",e[3]+"px"),Q(t,"class","svelte-wv6msr")},m(a,s){Ne(a,t,s),o.block.m(t,o.anchor=null),o.mount=()=>t,o.anchor=null,n||(i=[Se(t,"mousedown",e[12]),Se(t,"mouseup",e[13])],n=!0)},p(a,[s]){e=a,o.ctx=e,s&4&&r!==(r=e[2])&&au(r,o)||qh(o,e,s),s&8&&An(t,"height",e[3]+"px")},i:ue,o:ue,d(a){a&&Te(t),o.block.d(),o.token=null,o=null,n=!1,st(i)}}}function z0(e,t,r){let n,i,o;pt(e,mr,g=>r(0,n=g)),pt(e,Qt,g=>r(14,i=g)),pt(e,yo,g=>r(3,o=g));let a,s=!1,u=[];as(()=>{(async()=>{r(7,a=await mo()),a.notes.find({selector:{$or:[{name:{$regex:`.*${i}.*`}},{body:{$regex:`.*${i}.*`}}]},sort:[{updatedAt:"desc"}]}).$.subscribe(w=>r(2,u=w))})()});const c=g=>B0(new Date(g).getTime(),"MMM d, yyyy 'at' h:mm a"),l=g=>s&&f(g),f=g=>{mr.set(g),a.notes.findOne({selector:{name:n.name}}).exec().then(w=>{Xi.set("edit"),Qt.set(w.name),Xa.set(w.body)})},h=()=>document.getElementById("body-editor").focus(),d=g=>f(g),y=g=>f(g),p=g=>l(g),b=()=>r(1,s=!0),m=()=>r(1,s=!1);return e.$$.update=()=>{e.$$.dirty&129&&Qt.subscribe(g=>{a&&!n&&a.notes.find({selector:{$or:[{name:{$regex:`.*${g}.*`}},{body:{$regex:`.*${g}.*`}}]},sort:[{updatedAt:"desc"}]}).$.subscribe(w=>r(2,u=w))})},[n,s,u,o,c,l,f,a,h,d,y,p,b,m]}class K0 extends Nt{constructor(t){super(),Bt(this,t,z0,U0,mt,{})}}const W0=ed({x:0,y:0},e=>{const t=r=>{e({x:r.clientX,y:r.clientY})};return document.body.addEventListener("mousemove",t),()=>{document.body.removeEventListener("mousemove",t)}});function q0(e){let t,r,n;return{c(){t=Ee("div"),Q(t,"class","w-full resize-bar select-none svelte-iez92v"),Q(t,"role","button"),Q(t,"tabindex","-1")},m(i,o){Ne(i,t,o),r||(n=[Se(window,"mouseup",e[1]),Se(window,"mousemove",e[2]),Se(t,"mousedown",e[0])],r=!0)},p:ue,i:ue,o:ue,d(i){i&&Te(t),r=!1,st(n)}}}function H0(e,t,r){let n;pt(e,W0,u=>r(4,n=u));let i=!1;return[()=>i=!0,()=>i=!1,()=>{i&&yo.set(n.y>=55&&n.y-55)}]}class Y0 extends Nt{constructor(t){super(),Bt(this,t,H0,q0,mt,{})}}var Zf={exports:{}};(function(e){var t=function(){function r(h,d){return d!=null&&h instanceof d}var n;try{n=Map}catch{n=function(){}}var i;try{i=Set}catch{i=function(){}}var o;try{o=Promise}catch{o=function(){}}function a(h,d,y,p,b){typeof d=="object"&&(y=d.depth,p=d.prototype,b=d.includeNonEnumerable,d=d.circular);var m=[],g=[],w=typeof Buffer<"u";typeof d>"u"&&(d=!0),typeof y>"u"&&(y=1/0);function x(k,D){if(k===null)return null;if(D===0)return k;var E,A;if(typeof k!="object")return k;if(r(k,n))E=new n;else if(r(k,i))E=new i;else if(r(k,o))E=new o(function(L,te){k.then(function(j){L(x(j,D-1))},function(j){te(x(j,D-1))})});else if(a.__isArray(k))E=[];else if(a.__isRegExp(k))E=new RegExp(k.source,f(k)),k.lastIndex&&(E.lastIndex=k.lastIndex);else if(a.__isDate(k))E=new Date(k.getTime());else{if(w&&Buffer.isBuffer(k))return Buffer.allocUnsafe?E=Buffer.allocUnsafe(k.length):E=new Buffer(k.length),k.copy(E),E;r(k,Error)?E=Object.create(k):typeof p>"u"?(A=Object.getPrototypeOf(k),E=Object.create(A)):(E=Object.create(p),A=p)}if(d){var P=m.indexOf(k);if(P!=-1)return g[P];m.push(k),g.push(E)}r(k,n)&&k.forEach(function(L,te){var j=x(te,D-1),ee=x(L,D-1);E.set(j,ee)}),r(k,i)&&k.forEach(function(L){var te=x(L,D-1);E.add(te)});for(var N in k){var Y;A&&(Y=Object.getOwnPropertyDescriptor(A,N)),!(Y&&Y.set==null)&&(E[N]=x(k[N],D-1))}if(Object.getOwnPropertySymbols)for(var C=Object.getOwnPropertySymbols(k),N=0;N<C.length;N++){var $=C[N],_=Object.getOwnPropertyDescriptor(k,$);_&&!_.enumerable&&!b||(E[$]=x(k[$],D-1),_.enumerable||Object.defineProperty(E,$,{enumerable:!1}))}if(b)for(var M=Object.getOwnPropertyNames(k),N=0;N<M.length;N++){var V=M[N],_=Object.getOwnPropertyDescriptor(k,V);_&&_.enumerable||(E[V]=x(k[V],D-1),Object.defineProperty(E,V,{enumerable:!1}))}return E}return x(h,y)}a.clonePrototype=function(d){if(d===null)return null;var y=function(){};return y.prototype=d,new y};function s(h){return Object.prototype.toString.call(h)}a.__objToStr=s;function u(h){return typeof h=="object"&&s(h)==="[object Date]"}a.__isDate=u;function c(h){return typeof h=="object"&&s(h)==="[object Array]"}a.__isArray=c;function l(h){return typeof h=="object"&&s(h)==="[object RegExp]"}a.__isRegExp=l;function f(h){var d="";return h.global&&(d+="g"),h.ignoreCase&&(d+="i"),h.multiline&&(d+="m"),d}return a.__getRegExpFlags=f,a}();e.exports&&(e.exports=t)})(Zf);var G0=Zf.exports,vc=Object.prototype.toString,Xf=function(t){var r=vc.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&vc.call(t.callee)==="[object Function]"),n},Go,gc;function Q0(){if(gc)return Go;gc=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=Xf,i=Object.prototype.propertyIsEnumerable,o=!i.call({toString:null},"toString"),a=i.call(function(){},"prototype"),s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(h){var d=h.constructor;return d&&d.prototype===h},c={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},l=function(){if(typeof window>"u")return!1;for(var h in window)try{if(!c["$"+h]&&t.call(window,h)&&window[h]!==null&&typeof window[h]=="object")try{u(window[h])}catch{return!0}}catch{return!0}return!1}(),f=function(h){if(typeof window>"u"||!l)return u(h);try{return u(h)}catch{return!1}};e=function(d){var y=d!==null&&typeof d=="object",p=r.call(d)==="[object Function]",b=n(d),m=y&&r.call(d)==="[object String]",g=[];if(!y&&!p&&!b)throw new TypeError("Object.keys called on a non-object");var w=a&&p;if(m&&d.length>0&&!t.call(d,0))for(var x=0;x<d.length;++x)g.push(String(x));if(b&&d.length>0)for(var k=0;k<d.length;++k)g.push(String(k));else for(var D in d)!(w&&D==="prototype")&&t.call(d,D)&&g.push(String(D));if(o)for(var E=f(d),A=0;A<s.length;++A)!(E&&s[A]==="constructor")&&t.call(d,s[A])&&g.push(s[A]);return g}}return Go=e,Go}var V0=Array.prototype.slice,Z0=Xf,bc=Object.keys,Ti=bc?function(t){return bc(t)}:Q0(),_c=Object.keys;Ti.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return Z0(n)?_c(V0.call(n)):_c(n)})}else Object.keys=Ti;return Object.keys||Ti};var Jf=Ti,eh=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;t[r]=i;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,r);if(a.value!==i||a.enumerable!==!0)return!1}return!0},X0=eh,Vs=function(){return X0()&&!!Symbol.toStringTag},wc=typeof Symbol<"u"&&Symbol,J0=eh,ew=function(){return typeof wc!="function"||typeof Symbol!="function"||typeof wc("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:J0()},kc={foo:{}},tw=Object,rw=function(){return{__proto__:kc}.foo===kc.foo&&!({__proto__:null}instanceof tw)},nw="Function.prototype.bind called on incompatible ",Qo=Array.prototype.slice,iw=Object.prototype.toString,ow="[object Function]",aw=function(t){var r=this;if(typeof r!="function"||iw.call(r)!==ow)throw new TypeError(nw+r);for(var n=Qo.call(arguments,1),i,o=function(){if(this instanceof i){var l=r.apply(this,n.concat(Qo.call(arguments)));return Object(l)===l?l:this}else return r.apply(t,n.concat(Qo.call(arguments)))},a=Math.max(0,r.length-n.length),s=[],u=0;u<a;u++)s.push("$"+u);if(i=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i},sw=aw,Zs=Function.prototype.bind||sw,uw=Zs,cw=uw.call(Function.call,Object.prototype.hasOwnProperty),se,on=SyntaxError,th=Function,Gr=TypeError,Vo=function(e){try{return th('"use strict"; return ('+e+").constructor;")()}catch{}},yr=Object.getOwnPropertyDescriptor;if(yr)try{yr({},"")}catch{yr=null}var Zo=function(){throw new Gr},lw=yr?function(){try{return arguments.callee,Zo}catch{try{return yr(arguments,"callee").get}catch{return Zo}}}():Zo,Tr=ew(),fw=rw(),Ie=Object.getPrototypeOf||(fw?function(e){return e.__proto__}:null),Br={},hw=typeof Uint8Array>"u"||!Ie?se:Ie(Uint8Array),vr={"%AggregateError%":typeof AggregateError>"u"?se:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?se:ArrayBuffer,"%ArrayIteratorPrototype%":Tr&&Ie?Ie([][Symbol.iterator]()):se,"%AsyncFromSyncIteratorPrototype%":se,"%AsyncFunction%":Br,"%AsyncGenerator%":Br,"%AsyncGeneratorFunction%":Br,"%AsyncIteratorPrototype%":Br,"%Atomics%":typeof Atomics>"u"?se:Atomics,"%BigInt%":typeof BigInt>"u"?se:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?se:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?se:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?se:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?se:Float32Array,"%Float64Array%":typeof Float64Array>"u"?se:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?se:FinalizationRegistry,"%Function%":th,"%GeneratorFunction%":Br,"%Int8Array%":typeof Int8Array>"u"?se:Int8Array,"%Int16Array%":typeof Int16Array>"u"?se:Int16Array,"%Int32Array%":typeof Int32Array>"u"?se:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Tr&&Ie?Ie(Ie([][Symbol.iterator]())):se,"%JSON%":typeof JSON=="object"?JSON:se,"%Map%":typeof Map>"u"?se:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Tr||!Ie?se:Ie(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?se:Promise,"%Proxy%":typeof Proxy>"u"?se:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?se:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?se:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Tr||!Ie?se:Ie(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?se:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Tr&&Ie?Ie(""[Symbol.iterator]()):se,"%Symbol%":Tr?Symbol:se,"%SyntaxError%":on,"%ThrowTypeError%":lw,"%TypedArray%":hw,"%TypeError%":Gr,"%Uint8Array%":typeof Uint8Array>"u"?se:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?se:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?se:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?se:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?se:WeakMap,"%WeakRef%":typeof WeakRef>"u"?se:WeakRef,"%WeakSet%":typeof WeakSet>"u"?se:WeakSet};if(Ie)try{null.error}catch(e){var dw=Ie(Ie(e));vr["%Error.prototype%"]=dw}var pw=function e(t){var r;if(t==="%AsyncFunction%")r=Vo("async function () {}");else if(t==="%GeneratorFunction%")r=Vo("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=Vo("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&Ie&&(r=Ie(i.prototype))}return vr[t]=r,r},xc={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},ri=Zs,to=cw,mw=ri.call(Function.call,Array.prototype.concat),yw=ri.call(Function.apply,Array.prototype.splice),Ec=ri.call(Function.call,String.prototype.replace),ro=ri.call(Function.call,String.prototype.slice),vw=ri.call(Function.call,RegExp.prototype.exec),gw=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,bw=/\\(\\)?/g,_w=function(t){var r=ro(t,0,1),n=ro(t,-1);if(r==="%"&&n!=="%")throw new on("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new on("invalid intrinsic syntax, expected opening `%`");var i=[];return Ec(t,gw,function(o,a,s,u){i[i.length]=s?Ec(u,bw,"$1"):a||o}),i},ww=function(t,r){var n=t,i;if(to(xc,n)&&(i=xc[n],n="%"+i[0]+"%"),to(vr,n)){var o=vr[n];if(o===Br&&(o=pw(n)),typeof o>"u"&&!r)throw new Gr("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new on("intrinsic "+t+" does not exist!")},Xs=function(t,r){if(typeof t!="string"||t.length===0)throw new Gr("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Gr('"allowMissing" argument must be a boolean');if(vw(/^%?[^%]*%?$/,t)===null)throw new on("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=_w(t),i=n.length>0?n[0]:"",o=ww("%"+i+"%",r),a=o.name,s=o.value,u=!1,c=o.alias;c&&(i=c[0],yw(n,mw([0,1],c)));for(var l=1,f=!0;l<n.length;l+=1){var h=n[l],d=ro(h,0,1),y=ro(h,-1);if((d==='"'||d==="'"||d==="`"||y==='"'||y==="'"||y==="`")&&d!==y)throw new on("property names with quotes must have matching quotes");if((h==="constructor"||!f)&&(u=!0),i+="."+h,a="%"+i+"%",to(vr,a))s=vr[a];else if(s!=null){if(!(h in s)){if(!r)throw new Gr("base intrinsic for "+t+" exists, but the property is not available.");return}if(yr&&l+1>=n.length){var p=yr(s,h);f=!!p,f&&"get"in p&&!("originalValue"in p.get)?s=p.get:s=s[h]}else f=to(s,h),s=s[h];f&&!u&&(vr[a]=s)}}return s},rh={exports:{}};(function(e){var t=Zs,r=Xs,n=r("%Function.prototype.apply%"),i=r("%Function.prototype.call%"),o=r("%Reflect.apply%",!0)||t.call(i,n),a=r("%Object.getOwnPropertyDescriptor%",!0),s=r("%Object.defineProperty%",!0),u=r("%Math.max%");if(s)try{s({},"a",{value:1})}catch{s=null}e.exports=function(f){var h=o(t,i,arguments);if(a&&s){var d=a(h,"length");d.configurable&&s(h,"length",{value:1+u(0,f.length-(arguments.length-1))})}return h};var c=function(){return o(t,n,arguments)};s?s(e.exports,"apply",{value:c}):e.exports.apply=c})(rh);var Js=rh.exports,nh=Xs,ih=Js,kw=ih(nh("String.prototype.indexOf")),oh=function(t,r){var n=nh(t,!!r);return typeof n=="function"&&kw(t,".prototype.")>-1?ih(n):n},xw=Vs(),Ew=oh,Ja=Ew("Object.prototype.toString"),go=function(t){return xw&&t&&typeof t=="object"&&Symbol.toStringTag in t?!1:Ja(t)==="[object Arguments]"},ah=function(t){return go(t)?!0:t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&Ja(t)!=="[object Array]"&&Ja(t.callee)==="[object Function]"},Sw=function(){return go(arguments)}();go.isLegacyArguments=ah;var Ow=Sw?go:ah,Cw=Xs,es=Cw("%Object.defineProperty%",!0),ts=function(){if(es)try{return es({},"a",{value:1}),!0}catch{return!1}return!1};ts.hasArrayLengthDefineBug=function(){if(!ts())return null;try{return es([],"length",{value:1}).length!==1}catch{return!0}};var Dw=ts,Pw=Jf,Aw=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Iw=Object.prototype.toString,Rw=Array.prototype.concat,sh=Object.defineProperty,Tw=function(e){return typeof e=="function"&&Iw.call(e)==="[object Function]"},$w=Dw(),uh=sh&&$w,Mw=function(e,t,r,n){if(t in e){if(n===!0){if(e[t]===r)return}else if(!Tw(n)||!n())return}uh?sh(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r},ch=function(e,t){var r=arguments.length>2?arguments[2]:{},n=Pw(t);Aw&&(n=Rw.call(n,Object.getOwnPropertySymbols(t)));for(var i=0;i<n.length;i+=1)Mw(e,n[i],t[n[i]],r[n[i]])};ch.supportsDescriptors=!!uh;var ni=ch,Sc=function(e){return e!==e},lh=function(t,r){return t===0&&r===0?1/t===1/r:!!(t===r||Sc(t)&&Sc(r))},Bw=lh,fh=function(){return typeof Object.is=="function"?Object.is:Bw},Nw=fh,Fw=ni,Lw=function(){var t=Nw();return Fw(Object,{is:t},{is:function(){return Object.is!==t}}),t},jw=ni,Uw=Js,zw=lh,hh=fh,Kw=Lw,dh=Uw(hh(),Object);jw(dh,{getPolyfill:hh,implementation:zw,shim:Kw});var Ww=dh,rs=oh,ph=Vs(),mh,yh,ns,is;if(ph){mh=rs("Object.prototype.hasOwnProperty"),yh=rs("RegExp.prototype.exec"),ns={};var Xo=function(){throw ns};is={toString:Xo,valueOf:Xo},typeof Symbol.toPrimitive=="symbol"&&(is[Symbol.toPrimitive]=Xo)}var qw=rs("Object.prototype.toString"),Hw=Object.getOwnPropertyDescriptor,Yw="[object RegExp]",Gw=ph?function(t){if(!t||typeof t!="object")return!1;var r=Hw(t,"lastIndex"),n=r&&mh(r,"value");if(!n)return!1;try{yh(t,is)}catch(i){return i===ns}}:function(t){return!t||typeof t!="object"&&typeof t!="function"?!1:qw(t)===Yw},vh={exports:{}},Hn=function(){return typeof(function(){}).name=="string"},Pn=Object.getOwnPropertyDescriptor;if(Pn)try{Pn([],"length")}catch{Pn=null}Hn.functionsHaveConfigurableNames=function(){if(!Hn()||!Pn)return!1;var t=Pn(function(){},"name");return!!t&&!!t.configurable};var Qw=Function.prototype.bind;Hn.boundFunctionsHaveNames=function(){return Hn()&&typeof Qw=="function"&&(function(){}).bind().name!==""};var Vw=Hn;(function(e){var t=Vw.functionsHaveConfigurableNames(),r=Object,n=TypeError;e.exports=function(){if(this!=null&&this!==r(this))throw new n("RegExp.prototype.flags getter called on non-object");var o="";return this.hasIndices&&(o+="d"),this.global&&(o+="g"),this.ignoreCase&&(o+="i"),this.multiline&&(o+="m"),this.dotAll&&(o+="s"),this.unicode&&(o+="u"),this.unicodeSets&&(o+="v"),this.sticky&&(o+="y"),o},t&&Object.defineProperty&&Object.defineProperty(e.exports,"name",{value:"get flags"})})(vh);var gh=vh.exports,Zw=gh,Xw=ni.supportsDescriptors,Jw=Object.getOwnPropertyDescriptor,bh=function(){if(Xw&&/a/mig.flags==="gim"){var t=Jw(RegExp.prototype,"flags");if(t&&typeof t.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var r="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){r+="d"}}),Object.defineProperty(n,"sticky",{get:function(){r+="y"}}),r==="dy")return t.get}}return Zw},e1=ni.supportsDescriptors,t1=bh,r1=Object.getOwnPropertyDescriptor,n1=Object.defineProperty,i1=TypeError,Oc=Object.getPrototypeOf,o1=/a/,a1=function(){if(!e1||!Oc)throw new i1("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=t1(),r=Oc(o1),n=r1(r,"flags");return(!n||n.get!==t)&&n1(r,"flags",{configurable:!0,enumerable:!1,get:t}),t},s1=ni,u1=Js,c1=gh,_h=bh,l1=a1,wh=u1(_h());s1(wh,{getPolyfill:_h,implementation:c1,shim:l1});var f1=wh,h1=Date.prototype.getDay,d1=function(t){try{return h1.call(t),!0}catch{return!1}},p1=Object.prototype.toString,m1="[object Date]",y1=Vs(),v1=function(t){return typeof t!="object"||t===null?!1:y1?d1(t):p1.call(t)===m1},Cc=Jf,Dc=Ow,Pc=Ww,Ac=Gw,Ic=f1,Rc=v1,Tc=Date.prototype.getTime;function kh(e,t,r){var n=r||{};return(n.strict?Pc(e,t):e===t)?!0:!e||!t||typeof e!="object"&&typeof t!="object"?n.strict?Pc(e,t):e==t:g1(e,t,n)}function $c(e){return e==null}function Mc(e){return!(!e||typeof e!="object"||typeof e.length!="number"||typeof e.copy!="function"||typeof e.slice!="function"||e.length>0&&typeof e[0]!="number")}function g1(e,t,r){var n,i;if(typeof e!=typeof t||$c(e)||$c(t)||e.prototype!==t.prototype||Dc(e)!==Dc(t))return!1;var o=Ac(e),a=Ac(t);if(o!==a)return!1;if(o||a)return e.source===t.source&&Ic(e)===Ic(t);if(Rc(e)&&Rc(t))return Tc.call(e)===Tc.call(t);var s=Mc(e),u=Mc(t);if(s!==u)return!1;if(s||u){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}if(typeof e!=typeof t)return!1;try{var c=Cc(e),l=Cc(t)}catch{return!1}if(c.length!==l.length)return!1;for(c.sort(),l.sort(),n=c.length-1;n>=0;n--)if(c[n]!=l[n])return!1;for(n=c.length-1;n>=0;n--)if(i=c[n],!kh(e[i],t[i],r))return!1;return!0}var b1=kh;function xh(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var Bc=xh(G0),Nc=xh(b1),Fr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w1=function(e){return(typeof e>"u"?"undefined":Fr(e))==="object"&&e!==null},k1=function(e,t){return e.every(function(r){return t&&t(r)||r})},x1=function(e,t){return e.hasOwnProperty(t)},E1=function(e){return Object.keys(e)},Eh=function(e,t){Object.keys(e).forEach(function(r){t(e[r],r)})},S1=function(e){return Array.isArray(e)},Sh=function(e){return!!(typeof Uint8Array<"u"&&e instanceof Uint8Array||e&&e.$Uint8ArrayPolyfill)},Oh={isArray:S1,each:Eh},Ch=function(t){return Oh.isArray(t)&&!Sh(t)},O1=function(t){return Ch(t)||eu(t)},C1=function(t,r){if(!eu(t))return!1;var n=void 0;return Oh.each(t,function(i,o){var a=o.substr(0,1)==="$";if(n===void 0)n=a;else if(n!==a){if(!r)throw new Error("Inconsistent operator: "+JSON.stringify(t));n=!1}}),!!n},D1=function(t){return/^[0-9]+$/.test(t)},eu=function(e){return!(!e||typeof e=="number"||typeof e=="string"||typeof e=="boolean"||Ch(e)||e===null||e instanceof RegExp||typeof e=="function"||e instanceof Date||Sh(e))},ae=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};typeof e=="string"&&t.field&&(e+=" for field '"+t.field+"'");var r=new Error(e);return r.name="ModifyJsError",r},zt={all:k1,each:Eh,keys:E1,has:x1,isObject:w1},P1=function(e,t,r){if(!(r&&r.each))return A1(e,t,_1({},r,{returnInsteadOfReplacing:!0}))},A1=function(t,r,n){if(n=n||{},!eu(r))throw ae("Modifier must be an object");r=Bc(r);var i=C1(r),o;if(i?(o=Bc(t),zt.each(r,function(a,s){var u=R1[s];if(!u)throw ae("Invalid modifier specified "+s);zt.each(a,function(c,l){if(l==="")throw ae("An empty update path is not valid.");var f=l.split(".");if(!zt.all(f))throw ae("The update path '"+l+"' contains an empty field name, which is not allowed.");var h=Dh(o,f,{noCreate:I1[s],forbidArray:s==="$rename",arrayIndices:n.arrayIndices}),d=f.pop();u(h,d,c,l,o)})})):o=r,n.returnInsteadOfReplacing)return o;zt.each(zt.keys(t),function(a){a!=="_id"&&delete t[a]}),zt.each(o,function(a,s){t[s]=a})},Dh=function(t,r,n){n=n||{};for(var i=!1,o=0;o<r.length;o++){var a=o===r.length-1,s=r[o],u=O1(t);if(!u){if(n.noCreate)return;var c=ae("cannot use the part '"+s+"' to traverse "+t);throw c.setPropertyError=!0,c}if(t instanceof Array){if(n.forbidArray)return null;if(s==="$"){if(i)throw ae("Too many positional (i.e. '$') elements");if(!n.arrayIndices||!n.arrayIndices.length)throw ae("The positional operator did not find the match needed from the query");s=n.arrayIndices[0],i=!0}else if(D1(s))s=parseInt(s);else{if(n.noCreate)return;throw ae("can't append to array using string field name ["+s+"]")}if(a&&(r[o]=s),n.noCreate&&s>=t.length)return;for(;t.length<s;)t.push(null);if(!a){if(t.length===s)t.push({});else if(Fr(t[s])!=="object")throw ae("can't modify field '"+r[o+1]+"' of list value "+JSON.stringify(t[s]))}}else if(!(s in t)){if(n.noCreate)return;a||(t[s]={})}if(a)return t;t=t[s]}},I1={$unset:!0,$pop:!0,$rename:!0,$pull:!0,$pullAll:!0},R1={$currentDate:function(t,r,n){if((typeof n>"u"?"undefined":Fr(n))==="object"&&n.hasOwnProperty("$type")){if(n.$type!=="date")throw ae("Minimongo does currently only support the date type in $currentDate modifiers",{field:r})}else if(n!==!0)throw ae("Invalid $currentDate modifier",{field:r});t[r]=new Date},$min:function(t,r,n){if(typeof n!="number")throw ae("Modifier $min allowed for numbers only",{field:r});if(r in t){if(typeof t[r]!="number")throw ae("Cannot apply $min modifier to non-number",{field:r});t[r]>n&&(t[r]=n)}else t[r]=n},$max:function(t,r,n){if(typeof n!="number")throw ae("Modifier $max allowed for numbers only",{field:r});if(r in t){if(typeof t[r]!="number")throw ae("Cannot apply $max modifier to non-number",{field:r});t[r]<n&&(t[r]=n)}else t[r]=n},$inc:function(t,r,n){if(typeof n!="number")throw ae("Modifier $inc allowed for numbers only",{field:r});if(r in t){if(typeof t[r]!="number")throw ae("Cannot apply $inc modifier to non-number",{field:r});t[r]+=n}else t[r]=n},$set:function(t,r,n){if(!zt.isObject(t)){var i=ae("Cannot set property on non-object field",{field:r});throw i.setPropertyError=!0,i}if(t===null){var i=ae("Cannot set property on null",{field:r});throw i.setPropertyError=!0,i}t[r]=n},$setOnInsert:function(t,r,n){},$unset:function(t,r,n){t!==void 0&&(t instanceof Array?r in t&&(t[r]=null):delete t[r])},$push:function(t,r,n){if(t[r]===void 0&&(t[r]=[]),!(t[r]instanceof Array))throw ae("Cannot apply $push modifier to non-array",{field:r});if(!(n&&n.$each)){t[r].push(n);return}var i=n.$each;if(!(i instanceof Array))throw ae("$each must be an array",{field:r});var o=void 0;if("$position"in n){if(typeof n.$position!="number")throw ae("$position must be a numeric value",{field:r});if(n.$position<0)throw ae("$position in $push must be zero or positive",{field:r});o=n.$position}var a=void 0;if("$slice"in n){if(typeof n.$slice!="number")throw ae("$slice must be a numeric value",{field:r});if(n.$slice>0)throw ae("$slice in $push must be zero or negative",{field:r});a=n.$slice}if(n.$sort)throw ae("$sort in $push not implemented yet");if(o===void 0)for(var s=0;s<i.length;s++)t[r].push(i[s]);else{for(var u=[o,0],s=0;s<i.length;s++)u.push(i[s]);Array.prototype.splice.apply(t[r],u)}a!==void 0&&(a===0?t[r]=[]:t[r]=t[r].slice(a))},$pushAll:function(t,r,n){if(!((typeof n>"u"?"undefined":Fr(n))==="object"&&n instanceof Array))throw ae("Modifier $pushAll/pullAll allowed for arrays only");var i=t[r];if(i===void 0)t[r]=n;else if(i instanceof Array)for(var o=0;o<n.length;o++)i.push(n[o]);else throw ae("Cannot apply $pushAll modifier to non-array",{field:r})},$addToSet:function(t,r,n){var i=!1;if((typeof n>"u"?"undefined":Fr(n))==="object"){var o=Object.keys(n);o[0]==="$each"&&(i=!0)}var a=i?n.$each:[n],s=t[r];if(s===void 0)t[r]=a;else if(s instanceof Array)zt.each(a,function(u){for(var c=0;c<s.length;c++)if(Nc(u,s[c]))return;s.push(u)});else throw ae("Cannot apply $addToSet modifier to non-array",{field:r})},$pop:function(t,r,n){if(t!==void 0){var i=t[r];if(i!==void 0)if(i instanceof Array)typeof n=="number"&&n<0?i.splice(0,1):i.pop();else throw ae("Cannot apply $pop modifier to non-array",{field:r})}},$pull:function(t,r,n){if(t!==void 0){var i=t[r];if(i!==void 0)throw i instanceof Array?ae("$pull not implemented yet"):ae("Cannot apply $pull/pullAll modifier to non-array",{field:r})}},$pullAll:function(t,r,n){if(!((typeof n>"u"?"undefined":Fr(n))==="object"&&n instanceof Array))throw ae("Modifier $pushAll/pullAll allowed for arrays only",{field:r});if(t!==void 0){var i=t[r];if(i!==void 0)if(i instanceof Array){for(var o=[],a=0;a<i.length;a++){for(var s=!1,u=0;u<n.length;u++)if(Nc(i[a],n[u])){s=!0;break}s||o.push(i[a])}t[r]=o}else throw ae("Cannot apply $pull/pullAll modifier to non-array",{field:r})}},$rename:function(t,r,n,i,o){if(i===n)throw ae("$rename source must differ from target",{field:r});if(t===null)throw ae("$rename source field invalid",{field:r});if(typeof n!="string")throw ae("$rename target must be a string",{field:r});if(n.indexOf("\0")>-1)throw ae("The 'to' field for $rename cannot contain an embedded null byte",{field:r});if(t!==void 0){var a=t[r];delete t[r];var s=n.split("."),u=Dh(o,s,{forbidArray:!0});if(u===null)throw ae("$rename target field invalid",{field:r});var c=s.pop();u[c]=a}},$bit:function(t,r,n){throw ae("$bit is not supported",{field:r})}},T1=P1;const Ph=Uc(T1);function $1(e){return this.incrementalModify(t=>{var r=Ph(t,e);return r})}function M1(e){var t=this._data,r=Ph(t,e);return this._saveData(r,t)}function B1(e){return this.exec().then(t=>t?Array.isArray(t)?Promise.all(t.map(r=>r.update(e))).then(()=>t):t.update(e).then(()=>t):null)}var N1={name:"update",rxdb:!0,prototypes:{RxDocument:e=>{e.update=M1,e.incrementalUpdate=$1},RxQuery:e=>{e.update=B1}}};const F1=(e,t)=>{let r=null;return(...n)=>{window.clearTimeout(r),r=window.setTimeout(()=>{e.apply(null,n)},t)}},L1=e=>e&&Object.keys(e).length===0&&e.constructor===Object;function j1(e){let t;return{c(){t=Ee("div"),t.innerHTML='<h2 class="svelte-7y9ek8">No Note Selected</h2>',Q(t,"class","placeholder relative svelte-7y9ek8")},m(r,n){Ne(r,t,n)},p:ue,d(r){r&&Te(t)}}}function U1(e){let t,r,n;return{c(){t=Ee("textarea"),Q(t,"id","body-editor"),Q(t,"class","block w-full h-full relative no-resize border-0 outline-none border-box svelte-7y9ek8")},m(i,o){Ne(i,t,o),$i(t,e[2]),r||(n=[Se(t,"input",e[7]),Se(t,"keydown",e[4])],r=!0)},p(i,o){o&4&&$i(t,i[2])},d(i){i&&Te(t),r=!1,st(n)}}}function z1(e){let t,r,n;Mi(e[6]);function i(s,u){return s[3]?U1:j1}let o=i(e),a=o(e);return{c(){t=Ee("div"),a.c(),Q(t,"class","flex items-center justify-center relative w-full h-full overflow-hidden"),An(t,"height",e[0]-e[1]+15+"px")},m(s,u){Ne(s,t,u),a.m(t,null),r||(n=Se(window,"resize",e[6]),r=!0)},p(s,[u]){o===(o=i(s))&&a?a.p(s,u):(a.d(1),a=o(s),a&&(a.c(),a.m(t,null))),u&3&&An(t,"height",s[0]-s[1]+15+"px")},i:ue,o:ue,d(s){s&&Te(t),a.d(),r=!1,n()}}}function K1(e,t,r){let n,i,o,a;pt(e,yo,h=>r(5,i=h)),pt(e,Xa,h=>r(2,o=h)),pt(e,mr,h=>r(3,a=h));let s;as(()=>{tf(N1)});const u=F1(()=>!L1(a)&&c(),230),c=async()=>{await a.update({$set:{body:o,updatedAt:new Date().getTime()}})};function l(){r(0,s=window.innerHeight)}function f(){o=this.value,Xa.set(o)}return e.$$.update=()=>{e.$$.dirty&32&&r(1,n=80+i)},[s,n,o,a,u,i,l,f]}class W1 extends Nt{constructor(t){super(),Bt(this,t,K1,z1,mt,{})}}function q1(e){let t,r,n,i,o,a,s,u,c;return r=new w_({}),i=new K0({}),a=new Y0({}),u=new W1({}),{c(){t=Ee("main"),Wt(r.$$.fragment),n=Xe(),Wt(i.$$.fragment),o=Xe(),Wt(a.$$.fragment),s=Xe(),Wt(u.$$.fragment),Q(t,"class","w-screen h-screen flex justify-center flex-col")},m(l,f){Ne(l,t,f),Ot(r,t,null),de(t,n),Ot(i,t,null),de(t,o),Ot(a,t,null),de(t,s),Ot(u,t,null),c=!0},p:ue,i(l){c||(Ue(r.$$.fragment,l),Ue(i.$$.fragment,l),Ue(a.$$.fragment,l),Ue(u.$$.fragment,l),c=!0)},o(l){Qe(r.$$.fragment,l),Qe(i.$$.fragment,l),Qe(a.$$.fragment,l),Qe(u.$$.fragment,l),c=!1},d(l){l&&Te(t),Ct(r),Ct(i),Ct(a),Ct(u)}}}class H1 extends Nt{constructor(t){super(),Bt(this,t,null,q1,mt,{})}}new H1({target:document.getElementById("app")});

</script>
    <style>
*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e2e8f0}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#a0aec0}input::-ms-input-placeholder,textarea::-ms-input-placeholder{color:#a0aec0}input::placeholder,textarea::placeholder{color:#a0aec0}button,[role=button]{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit}pre,code,kbd,samp{font-family:Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}html,body{margin:0;padding:0;font-family:Verdana,Geneva,Tahoma,sans-serif;font-size:.9rem;height:100%;width:100%;overflow:hidden}.w-screen{width:100vw}.h-screen{height:100vh}.flex{display:flex}.flex-col{flex-direction:column}.justify-center{justify-content:center}.bg-gray-200{background-color:#edf2f7}.flex-grow{flex-grow:1}.py-1\.5{padding-top:.375rem;padding-bottom:.375rem}.m-1\.5{margin:.375rem}.py-0\.5{padding-top:.125rem;padding-bottom:.125rem}.px-2{padding-left:.5rem;padding-right:.5rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.px-1{padding-left:.25rem;padding-right:.25rem}.w-full{width:100%}.h-full{height:100%}.overflow-y-auto{overflow-y:auto}.overflow-x-clip{overflow-x:clip}.text-sm{font-size:.875rem}.justify-between{justify-content:space-between}.justify-end{justify-content:flex-end}.text-gray-600{color:#718096}.border-b{border-bottom-width:1px}.truncate{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.smooth-scroll{scroll-behavior:smooth}.select-none{-webkit-user-select:none;user-select:none}.items-center{align-items:center}.relative{position:relative}.block{display:block}.no-resize{resize:none}.border-0{border-width:0}.outline-none{outline:none}.border-box{box-sizing:border-box}div.svelte-17q8bna{position:absolute;right:28px;top:5px}input.svelte-17q8bna{display:none}label.svelte-17q8bna{display:inline-block;width:12px;height:12px;color:#535353}.omnibar.svelte-1ahii1d{box-sizing:border-box;padding:4px 3px 0;height:56px;border-bottom:1px solid #8b8b8b;background:linear-gradient(0deg,rgba(206,206,207,1) 0%,rgba(228,227,229,1) 100%)}.input-wrapper.svelte-1ahii1d{position:relative;padding:5px}input.svelte-1ahii1d{width:100%;box-sizing:border-box;border:1px solid #474747;border-radius:5px;padding:2px 4px 2px 20px}.icon.svelte-1ahii1d{position:absolute;color:#585858}.left.svelte-1ahii1d{top:7px;left:10px;width:12px;height:12px}.right.svelte-1ahii1d{color:#adadad;top:8px;right:9px;cursor:pointer;width:14px;height:14px}.right.svelte-1ahii1d:hover{color:#9b9b9b}ul.svelte-wv6msr{margin:0;padding:0;width:100%;background:#f7f7f7;overflow-y:auto;overflow-x:hidden;list-style-type:none;border-bottom:none}li.svelte-wv6msr{padding:2px 8px;display:flex;font-size:12px;justify-content:space-between;font-family:Helvetica,sans-serif;-webkit-user-select:none;user-select:none}li.svelte-wv6msr:nth-child(odd){background:#f5f5f5}li.svelte-wv6msr:nth-child(even){background:#f0f0f0}.meta.svelte-wv6msr{min-width:140px;color:#444;white-space:nowrap}.elipsis.svelte-wv6msr{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-right:10px}.mute.svelte-wv6msr{color:#8d8d8d}.resize-bar.svelte-iez92v{background:linear-gradient(0deg,#e0e0e0 0%,#f8f8f8 100%);border:1px solid #c6c6c6;height:7px;cursor:row-resize}h2.svelte-7y9ek8{font-size:18px;color:gray}textarea.svelte-7y9ek8{padding:6px;background:#f6f6f6}.placeholder.svelte-7y9ek8{top:-20%}

</style>
  </head>
  <body>
    <div id="app" />
    
  </body>
</html>
